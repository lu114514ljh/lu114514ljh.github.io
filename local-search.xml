<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>AI 写的塔防游戏</title>
    <link href="/2025/08/20/html%E5%A1%94%E9%98%B2%E6%B8%B8%E6%88%8F/"/>
    <url>/2025/08/20/html%E5%A1%94%E9%98%B2%E6%B8%B8%E6%88%8F/</url>
    
    <content type="html"><![CDATA[<h2 id="AI-写的塔防游戏"><a href="#AI-写的塔防游戏" class="headerlink" title="AI 写的塔防游戏"></a>AI 写的塔防游戏</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br><span class="line">543</span><br><span class="line">544</span><br><span class="line">545</span><br><span class="line">546</span><br><span class="line">547</span><br><span class="line">548</span><br><span class="line">549</span><br><span class="line">550</span><br><span class="line">551</span><br><span class="line">552</span><br><span class="line">553</span><br><span class="line">554</span><br><span class="line">555</span><br><span class="line">556</span><br><span class="line">557</span><br><span class="line">558</span><br><span class="line">559</span><br><span class="line">560</span><br><span class="line">561</span><br><span class="line">562</span><br><span class="line">563</span><br><span class="line">564</span><br><span class="line">565</span><br><span class="line">566</span><br><span class="line">567</span><br><span class="line">568</span><br><span class="line">569</span><br><span class="line">570</span><br><span class="line">571</span><br><span class="line">572</span><br><span class="line">573</span><br><span class="line">574</span><br><span class="line">575</span><br><span class="line">576</span><br><span class="line">577</span><br><span class="line">578</span><br><span class="line">579</span><br><span class="line">580</span><br><span class="line">581</span><br><span class="line">582</span><br><span class="line">583</span><br><span class="line">584</span><br><span class="line">585</span><br><span class="line">586</span><br><span class="line">587</span><br><span class="line">588</span><br><span class="line">589</span><br><span class="line">590</span><br><span class="line">591</span><br><span class="line">592</span><br><span class="line">593</span><br><span class="line">594</span><br><span class="line">595</span><br><span class="line">596</span><br><span class="line">597</span><br><span class="line">598</span><br><span class="line">599</span><br><span class="line">600</span><br><span class="line">601</span><br><span class="line">602</span><br><span class="line">603</span><br><span class="line">604</span><br><span class="line">605</span><br><span class="line">606</span><br><span class="line">607</span><br><span class="line">608</span><br><span class="line">609</span><br><span class="line">610</span><br><span class="line">611</span><br><span class="line">612</span><br><span class="line">613</span><br><span class="line">614</span><br><span class="line">615</span><br><span class="line">616</span><br><span class="line">617</span><br><span class="line">618</span><br><span class="line">619</span><br><span class="line">620</span><br><span class="line">621</span><br><span class="line">622</span><br><span class="line">623</span><br><span class="line">624</span><br><span class="line">625</span><br><span class="line">626</span><br><span class="line">627</span><br><span class="line">628</span><br><span class="line">629</span><br><span class="line">630</span><br><span class="line">631</span><br><span class="line">632</span><br><span class="line">633</span><br><span class="line">634</span><br><span class="line">635</span><br><span class="line">636</span><br><span class="line">637</span><br><span class="line">638</span><br><span class="line">639</span><br><span class="line">640</span><br><span class="line">641</span><br><span class="line">642</span><br><span class="line">643</span><br><span class="line">644</span><br><span class="line">645</span><br><span class="line">646</span><br><span class="line">647</span><br><span class="line">648</span><br><span class="line">649</span><br><span class="line">650</span><br><span class="line">651</span><br><span class="line">652</span><br><span class="line">653</span><br><span class="line">654</span><br><span class="line">655</span><br><span class="line">656</span><br><span class="line">657</span><br><span class="line">658</span><br><span class="line">659</span><br><span class="line">660</span><br><span class="line">661</span><br><span class="line">662</span><br><span class="line">663</span><br><span class="line">664</span><br><span class="line">665</span><br><span class="line">666</span><br><span class="line">667</span><br><span class="line">668</span><br><span class="line">669</span><br><span class="line">670</span><br><span class="line">671</span><br><span class="line">672</span><br><span class="line">673</span><br><span class="line">674</span><br><span class="line">675</span><br><span class="line">676</span><br><span class="line">677</span><br><span class="line">678</span><br><span class="line">679</span><br><span class="line">680</span><br><span class="line">681</span><br><span class="line">682</span><br><span class="line">683</span><br><span class="line">684</span><br><span class="line">685</span><br><span class="line">686</span><br><span class="line">687</span><br><span class="line">688</span><br><span class="line">689</span><br><span class="line">690</span><br><span class="line">691</span><br><span class="line">692</span><br><span class="line">693</span><br><span class="line">694</span><br><span class="line">695</span><br><span class="line">696</span><br><span class="line">697</span><br><span class="line">698</span><br><span class="line">699</span><br><span class="line">700</span><br><span class="line">701</span><br><span class="line">702</span><br><span class="line">703</span><br><span class="line">704</span><br><span class="line">705</span><br><span class="line">706</span><br><span class="line">707</span><br><span class="line">708</span><br><span class="line">709</span><br><span class="line">710</span><br><span class="line">711</span><br><span class="line">712</span><br><span class="line">713</span><br><span class="line">714</span><br><span class="line">715</span><br><span class="line">716</span><br><span class="line">717</span><br><span class="line">718</span><br><span class="line">719</span><br><span class="line">720</span><br><span class="line">721</span><br><span class="line">722</span><br><span class="line">723</span><br><span class="line">724</span><br><span class="line">725</span><br><span class="line">726</span><br><span class="line">727</span><br><span class="line">728</span><br><span class="line">729</span><br><span class="line">730</span><br><span class="line">731</span><br><span class="line">732</span><br><span class="line">733</span><br><span class="line">734</span><br><span class="line">735</span><br><span class="line">736</span><br><span class="line">737</span><br><span class="line">738</span><br><span class="line">739</span><br><span class="line">740</span><br><span class="line">741</span><br><span class="line">742</span><br><span class="line">743</span><br><span class="line">744</span><br><span class="line">745</span><br><span class="line">746</span><br><span class="line">747</span><br><span class="line">748</span><br><span class="line">749</span><br><span class="line">750</span><br><span class="line">751</span><br><span class="line">752</span><br><span class="line">753</span><br><span class="line">754</span><br><span class="line">755</span><br><span class="line">756</span><br><span class="line">757</span><br><span class="line">758</span><br><span class="line">759</span><br><span class="line">760</span><br><span class="line">761</span><br><span class="line">762</span><br><span class="line">763</span><br><span class="line">764</span><br><span class="line">765</span><br><span class="line">766</span><br><span class="line">767</span><br><span class="line">768</span><br><span class="line">769</span><br><span class="line">770</span><br><span class="line">771</span><br><span class="line">772</span><br><span class="line">773</span><br><span class="line">774</span><br><span class="line">775</span><br><span class="line">776</span><br><span class="line">777</span><br><span class="line">778</span><br><span class="line">779</span><br><span class="line">780</span><br><span class="line">781</span><br><span class="line">782</span><br><span class="line">783</span><br><span class="line">784</span><br><span class="line">785</span><br><span class="line">786</span><br><span class="line">787</span><br><span class="line">788</span><br><span class="line">789</span><br><span class="line">790</span><br><span class="line">791</span><br><span class="line">792</span><br><span class="line">793</span><br><span class="line">794</span><br><span class="line">795</span><br><span class="line">796</span><br><span class="line">797</span><br><span class="line">798</span><br><span class="line">799</span><br><span class="line">800</span><br><span class="line">801</span><br><span class="line">802</span><br><span class="line">803</span><br><span class="line">804</span><br><span class="line">805</span><br><span class="line">806</span><br><span class="line">807</span><br><span class="line">808</span><br><span class="line">809</span><br><span class="line">810</span><br><span class="line">811</span><br><span class="line">812</span><br><span class="line">813</span><br><span class="line">814</span><br><span class="line">815</span><br><span class="line">816</span><br><span class="line">817</span><br><span class="line">818</span><br><span class="line">819</span><br><span class="line">820</span><br><span class="line">821</span><br><span class="line">822</span><br><span class="line">823</span><br><span class="line">824</span><br><span class="line">825</span><br><span class="line">826</span><br><span class="line">827</span><br><span class="line">828</span><br><span class="line">829</span><br><span class="line">830</span><br><span class="line">831</span><br><span class="line">832</span><br><span class="line">833</span><br><span class="line">834</span><br><span class="line">835</span><br><span class="line">836</span><br><span class="line">837</span><br><span class="line">838</span><br><span class="line">839</span><br><span class="line">840</span><br><span class="line">841</span><br><span class="line">842</span><br><span class="line">843</span><br><span class="line">844</span><br><span class="line">845</span><br><span class="line">846</span><br><span class="line">847</span><br><span class="line">848</span><br><span class="line">849</span><br><span class="line">850</span><br><span class="line">851</span><br><span class="line">852</span><br><span class="line">853</span><br><span class="line">854</span><br><span class="line">855</span><br><span class="line">856</span><br><span class="line">857</span><br><span class="line">858</span><br><span class="line">859</span><br><span class="line">860</span><br><span class="line">861</span><br><span class="line">862</span><br><span class="line">863</span><br><span class="line">864</span><br><span class="line">865</span><br><span class="line">866</span><br><span class="line">867</span><br><span class="line">868</span><br><span class="line">869</span><br><span class="line">870</span><br><span class="line">871</span><br><span class="line">872</span><br><span class="line">873</span><br><span class="line">874</span><br><span class="line">875</span><br><span class="line">876</span><br><span class="line">877</span><br><span class="line">878</span><br><span class="line">879</span><br><span class="line">880</span><br><span class="line">881</span><br><span class="line">882</span><br><span class="line">883</span><br><span class="line">884</span><br><span class="line">885</span><br><span class="line">886</span><br><span class="line">887</span><br><span class="line">888</span><br><span class="line">889</span><br><span class="line">890</span><br><span class="line">891</span><br><span class="line">892</span><br><span class="line">893</span><br><span class="line">894</span><br><span class="line">895</span><br><span class="line">896</span><br><span class="line">897</span><br><span class="line">898</span><br><span class="line">899</span><br><span class="line">900</span><br><span class="line">901</span><br><span class="line">902</span><br><span class="line">903</span><br><span class="line">904</span><br><span class="line">905</span><br><span class="line">906</span><br><span class="line">907</span><br><span class="line">908</span><br><span class="line">909</span><br><span class="line">910</span><br><span class="line">911</span><br><span class="line">912</span><br><span class="line">913</span><br><span class="line">914</span><br><span class="line">915</span><br><span class="line">916</span><br><span class="line">917</span><br><span class="line">918</span><br><span class="line">919</span><br><span class="line">920</span><br><span class="line">921</span><br><span class="line">922</span><br><span class="line">923</span><br><span class="line">924</span><br><span class="line">925</span><br><span class="line">926</span><br><span class="line">927</span><br><span class="line">928</span><br><span class="line">929</span><br><span class="line">930</span><br><span class="line">931</span><br><span class="line">932</span><br><span class="line">933</span><br><span class="line">934</span><br><span class="line">935</span><br><span class="line">936</span><br><span class="line">937</span><br><span class="line">938</span><br><span class="line">939</span><br><span class="line">940</span><br><span class="line">941</span><br><span class="line">942</span><br><span class="line">943</span><br><span class="line">944</span><br><span class="line">945</span><br><span class="line">946</span><br><span class="line">947</span><br><span class="line">948</span><br><span class="line">949</span><br><span class="line">950</span><br><span class="line">951</span><br><span class="line">952</span><br><span class="line">953</span><br><span class="line">954</span><br><span class="line">955</span><br><span class="line">956</span><br><span class="line">957</span><br><span class="line">958</span><br><span class="line">959</span><br><span class="line">960</span><br><span class="line">961</span><br><span class="line">962</span><br><span class="line">963</span><br><span class="line">964</span><br><span class="line">965</span><br><span class="line">966</span><br><span class="line">967</span><br><span class="line">968</span><br><span class="line">969</span><br><span class="line">970</span><br><span class="line">971</span><br><span class="line">972</span><br><span class="line">973</span><br><span class="line">974</span><br><span class="line">975</span><br><span class="line">976</span><br><span class="line">977</span><br><span class="line">978</span><br><span class="line">979</span><br><span class="line">980</span><br><span class="line">981</span><br><span class="line">982</span><br><span class="line">983</span><br><span class="line">984</span><br><span class="line">985</span><br><span class="line">986</span><br><span class="line">987</span><br><span class="line">988</span><br><span class="line">989</span><br><span class="line">990</span><br><span class="line">991</span><br><span class="line">992</span><br><span class="line">993</span><br><span class="line">994</span><br><span class="line">995</span><br><span class="line">996</span><br><span class="line">997</span><br><span class="line">998</span><br><span class="line">999</span><br><span class="line">1000</span><br><span class="line">1001</span><br><span class="line">1002</span><br><span class="line">1003</span><br><span class="line">1004</span><br><span class="line">1005</span><br><span class="line">1006</span><br><span class="line">1007</span><br><span class="line">1008</span><br><span class="line">1009</span><br><span class="line">1010</span><br><span class="line">1011</span><br><span class="line">1012</span><br><span class="line">1013</span><br><span class="line">1014</span><br><span class="line">1015</span><br><span class="line">1016</span><br><span class="line">1017</span><br><span class="line">1018</span><br><span class="line">1019</span><br><span class="line">1020</span><br><span class="line">1021</span><br><span class="line">1022</span><br><span class="line">1023</span><br><span class="line">1024</span><br><span class="line">1025</span><br><span class="line">1026</span><br><span class="line">1027</span><br><span class="line">1028</span><br><span class="line">1029</span><br><span class="line">1030</span><br><span class="line">1031</span><br><span class="line">1032</span><br><span class="line">1033</span><br><span class="line">1034</span><br><span class="line">1035</span><br><span class="line">1036</span><br><span class="line">1037</span><br><span class="line">1038</span><br><span class="line">1039</span><br><span class="line">1040</span><br><span class="line">1041</span><br><span class="line">1042</span><br><span class="line">1043</span><br><span class="line">1044</span><br><span class="line">1045</span><br><span class="line">1046</span><br><span class="line">1047</span><br><span class="line">1048</span><br><span class="line">1049</span><br><span class="line">1050</span><br><span class="line">1051</span><br><span class="line">1052</span><br><span class="line">1053</span><br><span class="line">1054</span><br><span class="line">1055</span><br><span class="line">1056</span><br><span class="line">1057</span><br><span class="line">1058</span><br><span class="line">1059</span><br><span class="line">1060</span><br><span class="line">1061</span><br><span class="line">1062</span><br><span class="line">1063</span><br><span class="line">1064</span><br><span class="line">1065</span><br><span class="line">1066</span><br><span class="line">1067</span><br><span class="line">1068</span><br><span class="line">1069</span><br><span class="line">1070</span><br><span class="line">1071</span><br><span class="line">1072</span><br><span class="line">1073</span><br><span class="line">1074</span><br><span class="line">1075</span><br><span class="line">1076</span><br><span class="line">1077</span><br><span class="line">1078</span><br><span class="line">1079</span><br><span class="line">1080</span><br><span class="line">1081</span><br><span class="line">1082</span><br><span class="line">1083</span><br><span class="line">1084</span><br><span class="line">1085</span><br><span class="line">1086</span><br><span class="line">1087</span><br><span class="line">1088</span><br><span class="line">1089</span><br><span class="line">1090</span><br><span class="line">1091</span><br><span class="line">1092</span><br><span class="line">1093</span><br><span class="line">1094</span><br><span class="line">1095</span><br><span class="line">1096</span><br><span class="line">1097</span><br><span class="line">1098</span><br><span class="line">1099</span><br><span class="line">1100</span><br><span class="line">1101</span><br><span class="line">1102</span><br><span class="line">1103</span><br><span class="line">1104</span><br><span class="line">1105</span><br><span class="line">1106</span><br><span class="line">1107</span><br><span class="line">1108</span><br><span class="line">1109</span><br><span class="line">1110</span><br><span class="line">1111</span><br><span class="line">1112</span><br><span class="line">1113</span><br><span class="line">1114</span><br><span class="line">1115</span><br><span class="line">1116</span><br><span class="line">1117</span><br><span class="line">1118</span><br><span class="line">1119</span><br><span class="line">1120</span><br><span class="line">1121</span><br><span class="line">1122</span><br><span class="line">1123</span><br><span class="line">1124</span><br><span class="line">1125</span><br><span class="line">1126</span><br><span class="line">1127</span><br><span class="line">1128</span><br><span class="line">1129</span><br><span class="line">1130</span><br><span class="line">1131</span><br><span class="line">1132</span><br><span class="line">1133</span><br><span class="line">1134</span><br><span class="line">1135</span><br><span class="line">1136</span><br><span class="line">1137</span><br><span class="line">1138</span><br><span class="line">1139</span><br><span class="line">1140</span><br><span class="line">1141</span><br><span class="line">1142</span><br><span class="line">1143</span><br><span class="line">1144</span><br><span class="line">1145</span><br><span class="line">1146</span><br><span class="line">1147</span><br><span class="line">1148</span><br><span class="line">1149</span><br><span class="line">1150</span><br><span class="line">1151</span><br><span class="line">1152</span><br><span class="line">1153</span><br><span class="line">1154</span><br><span class="line">1155</span><br><span class="line">1156</span><br><span class="line">1157</span><br><span class="line">1158</span><br><span class="line">1159</span><br><span class="line">1160</span><br><span class="line">1161</span><br><span class="line">1162</span><br><span class="line">1163</span><br><span class="line">1164</span><br><span class="line">1165</span><br><span class="line">1166</span><br><span class="line">1167</span><br><span class="line">1168</span><br><span class="line">1169</span><br><span class="line">1170</span><br><span class="line">1171</span><br><span class="line">1172</span><br><span class="line">1173</span><br><span class="line">1174</span><br><span class="line">1175</span><br><span class="line">1176</span><br><span class="line">1177</span><br><span class="line">1178</span><br><span class="line">1179</span><br><span class="line">1180</span><br><span class="line">1181</span><br><span class="line">1182</span><br><span class="line">1183</span><br><span class="line">1184</span><br><span class="line">1185</span><br><span class="line">1186</span><br><span class="line">1187</span><br><span class="line">1188</span><br><span class="line">1189</span><br><span class="line">1190</span><br><span class="line">1191</span><br><span class="line">1192</span><br><span class="line">1193</span><br><span class="line">1194</span><br><span class="line">1195</span><br><span class="line">1196</span><br><span class="line">1197</span><br><span class="line">1198</span><br><span class="line">1199</span><br><span class="line">1200</span><br><span class="line">1201</span><br><span class="line">1202</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;zh&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>高级回合制塔防游戏<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="language-css"></span><br><span class="language-css">        * &#123;</span><br><span class="language-css">            <span class="hljs-attribute">box-sizing</span>: border-box;</span><br><span class="language-css">            <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span>;</span><br><span class="language-css">            <span class="hljs-attribute">padding</span>: <span class="hljs-number">0</span>;</span><br><span class="language-css">        &#125;</span><br><span class="language-css">        </span><br><span class="language-css">        <span class="hljs-selector-tag">body</span> &#123;</span><br><span class="language-css">            <span class="hljs-attribute">font-family</span>: <span class="hljs-string">&#x27;Arial&#x27;</span>, sans-serif;</span><br><span class="language-css">            <span class="hljs-attribute">background</span>: <span class="hljs-built_in">linear-gradient</span>(<span class="hljs-number">135deg</span>, <span class="hljs-number">#1a2a6c</span>, <span class="hljs-number">#b21f1f</span>, <span class="hljs-number">#fdbb2d</span>);</span><br><span class="language-css">            <span class="hljs-attribute">color</span>: white;</span><br><span class="language-css">            <span class="hljs-attribute">min-height</span>: <span class="hljs-number">100vh</span>;</span><br><span class="language-css">            <span class="hljs-attribute">padding</span>: <span class="hljs-number">20px</span>;</span><br><span class="language-css">        &#125;</span><br><span class="language-css">        </span><br><span class="language-css">        <span class="hljs-selector-class">.container</span> &#123;</span><br><span class="language-css">            <span class="hljs-attribute">max-width</span>: <span class="hljs-number">1200px</span>;</span><br><span class="language-css">            <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span> auto;</span><br><span class="language-css">        &#125;</span><br><span class="language-css">        </span><br><span class="language-css">        <span class="hljs-selector-tag">header</span> &#123;</span><br><span class="language-css">            <span class="hljs-attribute">text-align</span>: center;</span><br><span class="language-css">            <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">20px</span>;</span><br><span class="language-css">            <span class="hljs-attribute">padding</span>: <span class="hljs-number">20px</span>;</span><br><span class="language-css">            <span class="hljs-attribute">background</span>: <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0.7</span>);</span><br><span class="language-css">            <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">15px</span>;</span><br><span class="language-css">            <span class="hljs-attribute">box-shadow</span>: <span class="hljs-number">0</span> <span class="hljs-number">4px</span> <span class="hljs-number">15px</span> <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0.3</span>);</span><br><span class="language-css">        &#125;</span><br><span class="language-css">        </span><br><span class="language-css">        <span class="hljs-selector-tag">h1</span> &#123;</span><br><span class="language-css">            <span class="hljs-attribute">font-size</span>: <span class="hljs-number">2.5em</span>;</span><br><span class="language-css">            <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">10px</span>;</span><br><span class="language-css">            <span class="hljs-attribute">text-shadow</span>: <span class="hljs-number">2px</span> <span class="hljs-number">2px</span> <span class="hljs-number">4px</span> <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0.5</span>);</span><br><span class="language-css">        &#125;</span><br><span class="language-css">        </span><br><span class="language-css">        <span class="hljs-selector-class">.game-stats</span> &#123;</span><br><span class="language-css">            <span class="hljs-attribute">display</span>: flex;</span><br><span class="language-css">            <span class="hljs-attribute">justify-content</span>: center;</span><br><span class="language-css">            <span class="hljs-attribute">gap</span>: <span class="hljs-number">30px</span>;</span><br><span class="language-css">            <span class="hljs-attribute">margin-top</span>: <span class="hljs-number">10px</span>;</span><br><span class="language-css">        &#125;</span><br><span class="language-css">        </span><br><span class="language-css">        <span class="hljs-selector-class">.stat</span> &#123;</span><br><span class="language-css">            <span class="hljs-attribute">background</span>: <span class="hljs-built_in">rgba</span>(<span class="hljs-number">255</span>, <span class="hljs-number">255</span>, <span class="hljs-number">255</span>, <span class="hljs-number">0.1</span>);</span><br><span class="language-css">            <span class="hljs-attribute">padding</span>: <span class="hljs-number">10px</span> <span class="hljs-number">20px</span>;</span><br><span class="language-css">            <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">10px</span>;</span><br><span class="language-css">            <span class="hljs-attribute">border</span>: <span class="hljs-number">2px</span> solid <span class="hljs-built_in">rgba</span>(<span class="hljs-number">255</span>, <span class="hljs-number">255</span>, <span class="hljs-number">255</span>, <span class="hljs-number">0.2</span>);</span><br><span class="language-css">        &#125;</span><br><span class="language-css">        </span><br><span class="language-css">        <span class="hljs-selector-class">.game-area</span> &#123;</span><br><span class="language-css">            <span class="hljs-attribute">display</span>: grid;</span><br><span class="language-css">            <span class="hljs-attribute">grid-template-columns</span>: <span class="hljs-number">800px</span> <span class="hljs-number">350px</span>;</span><br><span class="language-css">            <span class="hljs-attribute">gap</span>: <span class="hljs-number">20px</span>;</span><br><span class="language-css">            <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">20px</span>;</span><br><span class="language-css">        &#125;</span><br><span class="language-css">        </span><br><span class="language-css">        <span class="hljs-selector-class">.game-board</span> &#123;</span><br><span class="language-css">            <span class="hljs-attribute">display</span>: grid;</span><br><span class="language-css">            <span class="hljs-attribute">grid-template-columns</span>: <span class="hljs-built_in">repeat</span>(<span class="hljs-number">12</span>, <span class="hljs-number">60px</span>);</span><br><span class="language-css">            <span class="hljs-attribute">grid-template-rows</span>: <span class="hljs-built_in">repeat</span>(<span class="hljs-number">12</span>, <span class="hljs-number">60px</span>);</span><br><span class="language-css">            <span class="hljs-attribute">gap</span>: <span class="hljs-number">2px</span>;</span><br><span class="language-css">            <span class="hljs-attribute">background</span>: <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0.8</span>);</span><br><span class="language-css">            <span class="hljs-attribute">padding</span>: <span class="hljs-number">10px</span>;</span><br><span class="language-css">            <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">15px</span>;</span><br><span class="language-css">            <span class="hljs-attribute">border</span>: <span class="hljs-number">3px</span> solid <span class="hljs-number">#ffd700</span>;</span><br><span class="language-css">            <span class="hljs-attribute">box-shadow</span>: <span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">20px</span> <span class="hljs-built_in">rgba</span>(<span class="hljs-number">255</span>, <span class="hljs-number">215</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0.3</span>);</span><br><span class="language-css">        &#125;</span><br><span class="language-css">        </span><br><span class="language-css">        <span class="hljs-selector-class">.cell</span> &#123;</span><br><span class="language-css">            <span class="hljs-attribute">width</span>: <span class="hljs-number">60px</span>;</span><br><span class="language-css">            <span class="hljs-attribute">height</span>: <span class="hljs-number">60px</span>;</span><br><span class="language-css">            <span class="hljs-attribute">background</span>: <span class="hljs-built_in">rgba</span>(<span class="hljs-number">255</span>, <span class="hljs-number">255</span>, <span class="hljs-number">255</span>, <span class="hljs-number">0.1</span>);</span><br><span class="language-css">            <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid <span class="hljs-built_in">rgba</span>(<span class="hljs-number">255</span>, <span class="hljs-number">255</span>, <span class="hljs-number">255</span>, <span class="hljs-number">0.2</span>);</span><br><span class="language-css">            <span class="hljs-attribute">display</span>: flex;</span><br><span class="language-css">            <span class="hljs-attribute">justify-content</span>: center;</span><br><span class="language-css">            <span class="hljs-attribute">align-items</span>: center;</span><br><span class="language-css">            <span class="hljs-attribute">cursor</span>: pointer;</span><br><span class="language-css">            <span class="hljs-attribute">position</span>: relative;</span><br><span class="language-css">            <span class="hljs-attribute">transition</span>: all <span class="hljs-number">0.2s</span> ease;</span><br><span class="language-css">            <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">5px</span>;</span><br><span class="language-css">        &#125;</span><br><span class="language-css">        </span><br><span class="language-css">        <span class="hljs-selector-class">.cell</span><span class="hljs-selector-pseudo">:hover</span> &#123;</span><br><span class="language-css">            <span class="hljs-attribute">background</span>: <span class="hljs-built_in">rgba</span>(<span class="hljs-number">255</span>, <span class="hljs-number">255</span>, <span class="hljs-number">255</span>, <span class="hljs-number">0.2</span>);</span><br><span class="language-css">            <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">scale</span>(<span class="hljs-number">1.05</span>);</span><br><span class="language-css">        &#125;</span><br><span class="language-css">        </span><br><span class="language-css">        <span class="hljs-selector-class">.cell</span><span class="hljs-selector-class">.path</span> &#123;</span><br><span class="language-css">            <span class="hljs-attribute">background</span>: <span class="hljs-built_in">linear-gradient</span>(<span class="hljs-number">45deg</span>, <span class="hljs-number">#4a90e2</span>, <span class="hljs-number">#7b68ee</span>);</span><br><span class="language-css">        &#125;</span><br><span class="language-css">        </span><br><span class="language-css">        <span class="hljs-selector-class">.cell</span><span class="hljs-selector-class">.tower-cell</span> &#123;</span><br><span class="language-css">            <span class="hljs-attribute">background</span>: <span class="hljs-built_in">rgba</span>(<span class="hljs-number">139</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0.3</span>);</span><br><span class="language-css">        &#125;</span><br><span class="language-css">        </span><br><span class="language-css">        <span class="hljs-selector-class">.cell</span><span class="hljs-selector-class">.start</span> &#123;</span><br><span class="language-css">            <span class="hljs-attribute">background</span>: <span class="hljs-built_in">linear-gradient</span>(<span class="hljs-number">45deg</span>, <span class="hljs-number">#00b09b</span>, <span class="hljs-number">#96c93d</span>);</span><br><span class="language-css">        &#125;</span><br><span class="language-css">        </span><br><span class="language-css">        <span class="hljs-selector-class">.cell</span><span class="hljs-selector-class">.end</span> &#123;</span><br><span class="language-css">            <span class="hljs-attribute">background</span>: <span class="hljs-built_in">linear-gradient</span>(<span class="hljs-number">45deg</span>, <span class="hljs-number">#ff416c</span>, <span class="hljs-number">#ff4b2b</span>);</span><br><span class="language-css">        &#125;</span><br><span class="language-css">        </span><br><span class="language-css">        <span class="hljs-selector-class">.cell</span><span class="hljs-selector-class">.obstacle</span> &#123;</span><br><span class="language-css">            <span class="hljs-attribute">background</span>: <span class="hljs-built_in">linear-gradient</span>(<span class="hljs-number">45deg</span>, <span class="hljs-number">#654321</span>, <span class="hljs-number">#8b4513</span>);</span><br><span class="language-css">        &#125;</span><br><span class="language-css">        </span><br><span class="language-css">        <span class="hljs-selector-class">.unit</span> &#123;</span><br><span class="language-css">            <span class="hljs-attribute">width</span>: <span class="hljs-number">40px</span>;</span><br><span class="language-css">            <span class="hljs-attribute">height</span>: <span class="hljs-number">40px</span>;</span><br><span class="language-css">            <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">50%</span>;</span><br><span class="language-css">            <span class="hljs-attribute">position</span>: absolute;</span><br><span class="language-css">            <span class="hljs-attribute">z-index</span>: <span class="hljs-number">10</span>;</span><br><span class="language-css">            <span class="hljs-attribute">box-shadow</span>: <span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">10px</span> currentColor;</span><br><span class="language-css">            <span class="hljs-attribute">animation</span>: pulse <span class="hljs-number">1.5s</span> infinite;</span><br><span class="language-css">        &#125;</span><br><span class="language-css">        </span><br><span class="language-css">        <span class="hljs-keyword">@keyframes</span> pulse &#123;</span><br><span class="language-css">            <span class="hljs-number">0%</span> &#123; <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">scale</span>(<span class="hljs-number">1</span>); &#125;</span><br><span class="language-css">            <span class="hljs-number">50%</span> &#123; <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">scale</span>(<span class="hljs-number">1.1</span>); &#125;</span><br><span class="language-css">            <span class="hljs-number">100%</span> &#123; <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">scale</span>(<span class="hljs-number">1</span>); &#125;</span><br><span class="language-css">        &#125;</span><br><span class="language-css">        </span><br><span class="language-css">        <span class="hljs-selector-class">.player-unit</span> &#123;</span><br><span class="language-css">            <span class="hljs-attribute">background</span>: <span class="hljs-built_in">linear-gradient</span>(<span class="hljs-number">45deg</span>, <span class="hljs-number">#00f260</span>, <span class="hljs-number">#0575e6</span>);</span><br><span class="language-css">            <span class="hljs-attribute">color</span>: <span class="hljs-number">#00f260</span>;</span><br><span class="language-css">        &#125;</span><br><span class="language-css">        </span><br><span class="language-css">        <span class="hljs-selector-class">.ai-unit</span> &#123;</span><br><span class="language-css">            <span class="hljs-attribute">background</span>: <span class="hljs-built_in">linear-gradient</span>(<span class="hljs-number">45deg</span>, <span class="hljs-number">#ff416c</span>, <span class="hljs-number">#ff4b2b</span>);</span><br><span class="language-css">            <span class="hljs-attribute">color</span>: <span class="hljs-number">#ff416c</span>;</span><br><span class="language-css">        &#125;</span><br><span class="language-css">        </span><br><span class="language-css">        <span class="hljs-selector-class">.tower</span> &#123;</span><br><span class="language-css">            <span class="hljs-attribute">width</span>: <span class="hljs-number">45px</span>;</span><br><span class="language-css">            <span class="hljs-attribute">height</span>: <span class="hljs-number">45px</span>;</span><br><span class="language-css">            <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">8px</span>;</span><br><span class="language-css">            <span class="hljs-attribute">position</span>: absolute;</span><br><span class="language-css">            <span class="hljs-attribute">z-index</span>: <span class="hljs-number">5</span>;</span><br><span class="language-css">            <span class="hljs-attribute">border</span>: <span class="hljs-number">3px</span> solid;</span><br><span class="language-css">            <span class="hljs-attribute">display</span>: flex;</span><br><span class="language-css">            <span class="hljs-attribute">justify-content</span>: center;</span><br><span class="language-css">            <span class="hljs-attribute">align-items</span>: center;</span><br><span class="language-css">            <span class="hljs-attribute">font-weight</span>: bold;</span><br><span class="language-css">            <span class="hljs-attribute">font-size</span>: <span class="hljs-number">18px</span>;</span><br><span class="language-css">        &#125;</span><br><span class="language-css">        </span><br><span class="language-css">        <span class="hljs-selector-class">.player-tower</span> &#123;</span><br><span class="language-css">            <span class="hljs-attribute">background</span>: <span class="hljs-built_in">linear-gradient</span>(<span class="hljs-number">45deg</span>, <span class="hljs-number">#2196f3</span>, <span class="hljs-number">#1976d2</span>);</span><br><span class="language-css">            <span class="hljs-attribute">border-color</span>: <span class="hljs-number">#0d47a1</span>;</span><br><span class="language-css">            <span class="hljs-attribute">color</span>: white;</span><br><span class="language-css">        &#125;</span><br><span class="language-css">        </span><br><span class="language-css">        <span class="hljs-selector-class">.ai-tower</span> &#123;</span><br><span class="language-css">            <span class="hljs-attribute">background</span>: <span class="hljs-built_in">linear-gradient</span>(<span class="hljs-number">45deg</span>, <span class="hljs-number">#9c27b0</span>, <span class="hljs-number">#7b1fa2</span>);</span><br><span class="language-css">            <span class="hljs-attribute">border-color</span>: <span class="hljs-number">#4a148c</span>;</span><br><span class="language-css">            <span class="hljs-attribute">color</span>: white;</span><br><span class="language-css">        &#125;</span><br><span class="language-css">        </span><br><span class="language-css">        <span class="hljs-selector-class">.tower-range</span> &#123;</span><br><span class="language-css">            <span class="hljs-attribute">position</span>: absolute;</span><br><span class="language-css">            <span class="hljs-attribute">border</span>: <span class="hljs-number">2px</span> dashed <span class="hljs-built_in">rgba</span>(<span class="hljs-number">255</span>, <span class="hljs-number">255</span>, <span class="hljs-number">255</span>, <span class="hljs-number">0.3</span>);</span><br><span class="language-css">            <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">50%</span>;</span><br><span class="language-css">            <span class="hljs-attribute">z-index</span>: <span class="hljs-number">2</span>;</span><br><span class="language-css">            <span class="hljs-attribute">pointer-events</span>: none;</span><br><span class="language-css">        &#125;</span><br><span class="language-css">        </span><br><span class="language-css">        <span class="hljs-selector-class">.control-panel</span> &#123;</span><br><span class="language-css">            <span class="hljs-attribute">background</span>: <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0.8</span>);</span><br><span class="language-css">            <span class="hljs-attribute">padding</span>: <span class="hljs-number">20px</span>;</span><br><span class="language-css">            <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">15px</span>;</span><br><span class="language-css">            <span class="hljs-attribute">border</span>: <span class="hljs-number">3px</span> solid <span class="hljs-number">#00bcd4</span>;</span><br><span class="language-css">            <span class="hljs-attribute">box-shadow</span>: <span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">20px</span> <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>, <span class="hljs-number">188</span>, <span class="hljs-number">212</span>, <span class="hljs-number">0.3</span>);</span><br><span class="language-css">        &#125;</span><br><span class="language-css">        </span><br><span class="language-css">        <span class="hljs-selector-class">.resource-display</span> &#123;</span><br><span class="language-css">            <span class="hljs-attribute">background</span>: <span class="hljs-built_in">rgba</span>(<span class="hljs-number">255</span>, <span class="hljs-number">215</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0.2</span>);</span><br><span class="language-css">            <span class="hljs-attribute">padding</span>: <span class="hljs-number">15px</span>;</span><br><span class="language-css">            <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">10px</span>;</span><br><span class="language-css">            <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">20px</span>;</span><br><span class="language-css">            <span class="hljs-attribute">border</span>: <span class="hljs-number">2px</span> solid <span class="hljs-number">#ffd700</span>;</span><br><span class="language-css">        &#125;</span><br><span class="language-css">        </span><br><span class="language-css">        <span class="hljs-selector-class">.resource-bar</span> &#123;</span><br><span class="language-css">            <span class="hljs-attribute">height</span>: <span class="hljs-number">20px</span>;</span><br><span class="language-css">            <span class="hljs-attribute">background</span>: <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0.5</span>);</span><br><span class="language-css">            <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">10px</span>;</span><br><span class="language-css">            <span class="hljs-attribute">margin</span>: <span class="hljs-number">10px</span> <span class="hljs-number">0</span>;</span><br><span class="language-css">            <span class="hljs-attribute">overflow</span>: hidden;</span><br><span class="language-css">        &#125;</span><br><span class="language-css">        </span><br><span class="language-css">        <span class="hljs-selector-class">.resource-fill</span> &#123;</span><br><span class="language-css">            <span class="hljs-attribute">height</span>: <span class="hljs-number">100%</span>;</span><br><span class="language-css">            <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">10px</span>;</span><br><span class="language-css">            <span class="hljs-attribute">transition</span>: width <span class="hljs-number">0.5s</span> ease;</span><br><span class="language-css">        &#125;</span><br><span class="language-css">        </span><br><span class="language-css">        <span class="hljs-selector-class">.player-resource</span> &#123; <span class="hljs-attribute">background</span>: <span class="hljs-built_in">linear-gradient</span>(<span class="hljs-number">90deg</span>, <span class="hljs-number">#00f260</span>, <span class="hljs-number">#0575e6</span>); &#125;</span><br><span class="language-css">        <span class="hljs-selector-class">.ai-resource</span> &#123; <span class="hljs-attribute">background</span>: <span class="hljs-built_in">linear-gradient</span>(<span class="hljs-number">90deg</span>, <span class="hljs-number">#ff416c</span>, <span class="hljs-number">#ff4b2b</span>); &#125;</span><br><span class="language-css">        </span><br><span class="language-css">        <span class="hljs-selector-class">.actions</span> &#123;</span><br><span class="language-css">            <span class="hljs-attribute">display</span>: grid;</span><br><span class="language-css">            <span class="hljs-attribute">grid-template-columns</span>: <span class="hljs-number">1</span>fr <span class="hljs-number">1</span>fr;</span><br><span class="language-css">            <span class="hljs-attribute">gap</span>: <span class="hljs-number">10px</span>;</span><br><span class="language-css">            <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">20px</span>;</span><br><span class="language-css">        &#125;</span><br><span class="language-css">        </span><br><span class="language-css">        <span class="hljs-selector-class">.btn</span> &#123;</span><br><span class="language-css">            <span class="hljs-attribute">padding</span>: <span class="hljs-number">12px</span>;</span><br><span class="language-css">            <span class="hljs-attribute">border</span>: none;</span><br><span class="language-css">            <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">8px</span>;</span><br><span class="language-css">            <span class="hljs-attribute">cursor</span>: pointer;</span><br><span class="language-css">            <span class="hljs-attribute">font-weight</span>: bold;</span><br><span class="language-css">            <span class="hljs-attribute">transition</span>: all <span class="hljs-number">0.3s</span> ease;</span><br><span class="language-css">            <span class="hljs-attribute">background</span>: <span class="hljs-built_in">linear-gradient</span>(<span class="hljs-number">45deg</span>, <span class="hljs-number">#667eea</span>, <span class="hljs-number">#764ba2</span>);</span><br><span class="language-css">            <span class="hljs-attribute">color</span>: white;</span><br><span class="language-css">            <span class="hljs-attribute">border</span>: <span class="hljs-number">2px</span> solid <span class="hljs-built_in">rgba</span>(<span class="hljs-number">255</span>, <span class="hljs-number">255</span>, <span class="hljs-number">255</span>, <span class="hljs-number">0.3</span>);</span><br><span class="language-css">        &#125;</span><br><span class="language-css">        </span><br><span class="language-css">        <span class="hljs-selector-class">.btn</span><span class="hljs-selector-pseudo">:hover</span> &#123;</span><br><span class="language-css">            <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">translateY</span>(-<span class="hljs-number">2px</span>);</span><br><span class="language-css">            <span class="hljs-attribute">box-shadow</span>: <span class="hljs-number">0</span> <span class="hljs-number">5px</span> <span class="hljs-number">15px</span> <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0.3</span>);</span><br><span class="language-css">        &#125;</span><br><span class="language-css">        </span><br><span class="language-css">        <span class="hljs-selector-class">.btn</span><span class="hljs-selector-pseudo">:disabled</span> &#123;</span><br><span class="language-css">            <span class="hljs-attribute">opacity</span>: <span class="hljs-number">0.5</span>;</span><br><span class="language-css">            <span class="hljs-attribute">cursor</span>: not-allowed;</span><br><span class="language-css">            <span class="hljs-attribute">transform</span>: none;</span><br><span class="language-css">        &#125;</span><br><span class="language-css">        </span><br><span class="language-css">        <span class="hljs-selector-class">.btn-primary</span> &#123;</span><br><span class="language-css">            <span class="hljs-attribute">background</span>: <span class="hljs-built_in">linear-gradient</span>(<span class="hljs-number">45deg</span>, <span class="hljs-number">#00b09b</span>, <span class="hljs-number">#96c93d</span>);</span><br><span class="language-css">        &#125;</span><br><span class="language-css">        </span><br><span class="language-css">        <span class="hljs-selector-class">.btn-danger</span> &#123;</span><br><span class="language-css">            <span class="hljs-attribute">background</span>: <span class="hljs-built_in">linear-gradient</span>(<span class="hljs-number">45deg</span>, <span class="hljs-number">#ff416c</span>, <span class="hljs-number">#ff4b2b</span>);</span><br><span class="language-css">        &#125;</span><br><span class="language-css">        </span><br><span class="language-css">        <span class="hljs-selector-class">.tower-info</span>, <span class="hljs-selector-class">.unit-info</span> &#123;</span><br><span class="language-css">            <span class="hljs-attribute">background</span>: <span class="hljs-built_in">rgba</span>(<span class="hljs-number">255</span>, <span class="hljs-number">255</span>, <span class="hljs-number">255</span>, <span class="hljs-number">0.1</span>);</span><br><span class="language-css">            <span class="hljs-attribute">padding</span>: <span class="hljs-number">15px</span>;</span><br><span class="language-css">            <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">10px</span>;</span><br><span class="language-css">            <span class="hljs-attribute">margin</span>: <span class="hljs-number">10px</span> <span class="hljs-number">0</span>;</span><br><span class="language-css">            <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid <span class="hljs-built_in">rgba</span>(<span class="hljs-number">255</span>, <span class="hljs-number">255</span>, <span class="hljs-number">255</span>, <span class="hljs-number">0.2</span>);</span><br><span class="language-css">        &#125;</span><br><span class="language-css">        </span><br><span class="language-css">        <span class="hljs-selector-class">.upgrades</span> &#123;</span><br><span class="language-css">            <span class="hljs-attribute">display</span>: grid;</span><br><span class="language-css">            <span class="hljs-attribute">grid-template-columns</span>: <span class="hljs-number">1</span>fr <span class="hljs-number">1</span>fr;</span><br><span class="language-css">            <span class="hljs-attribute">gap</span>: <span class="hljs-number">10px</span>;</span><br><span class="language-css">            <span class="hljs-attribute">margin-top</span>: <span class="hljs-number">15px</span>;</span><br><span class="language-css">        &#125;</span><br><span class="language-css">        </span><br><span class="language-css">        <span class="hljs-selector-class">.upgrade-btn</span> &#123;</span><br><span class="language-css">            <span class="hljs-attribute">padding</span>: <span class="hljs-number">8px</span>;</span><br><span class="language-css">            <span class="hljs-attribute">font-size</span>: <span class="hljs-number">12px</span>;</span><br><span class="language-css">            <span class="hljs-attribute">background</span>: <span class="hljs-built_in">rgba</span>(<span class="hljs-number">255</span>, <span class="hljs-number">215</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0.3</span>);</span><br><span class="language-css">            <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#ffd700</span>;</span><br><span class="language-css">        &#125;</span><br><span class="language-css">        </span><br><span class="language-css">        <span class="hljs-selector-class">.log-container</span> &#123;</span><br><span class="language-css">            <span class="hljs-attribute">background</span>: <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0.7</span>);</span><br><span class="language-css">            <span class="hljs-attribute">padding</span>: <span class="hljs-number">15px</span>;</span><br><span class="language-css">            <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">10px</span>;</span><br><span class="language-css">            <span class="hljs-attribute">border</span>: <span class="hljs-number">2px</span> solid <span class="hljs-number">#7b68ee</span>;</span><br><span class="language-css">            <span class="hljs-attribute">max-height</span>: <span class="hljs-number">300px</span>;</span><br><span class="language-css">            <span class="hljs-attribute">overflow-y</span>: auto;</span><br><span class="language-css">        &#125;</span><br><span class="language-css">        </span><br><span class="language-css">        <span class="hljs-selector-class">.log-entry</span> &#123;</span><br><span class="language-css">            <span class="hljs-attribute">padding</span>: <span class="hljs-number">8px</span>;</span><br><span class="language-css">            <span class="hljs-attribute">margin</span>: <span class="hljs-number">5px</span> <span class="hljs-number">0</span>;</span><br><span class="language-css">            <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">5px</span>;</span><br><span class="language-css">            <span class="hljs-attribute">font-size</span>: <span class="hljs-number">14px</span>;</span><br><span class="language-css">            <span class="hljs-attribute">border-left</span>: <span class="hljs-number">4px</span> solid;</span><br><span class="language-css">        &#125;</span><br><span class="language-css">        </span><br><span class="language-css">        <span class="hljs-selector-class">.player-log</span> &#123; <span class="hljs-attribute">border-color</span>: <span class="hljs-number">#00f260</span>; <span class="hljs-attribute">background</span>: <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>, <span class="hljs-number">242</span>, <span class="hljs-number">96</span>, <span class="hljs-number">0.1</span>); &#125;</span><br><span class="language-css">        <span class="hljs-selector-class">.ai-log</span> &#123; <span class="hljs-attribute">border-color</span>: <span class="hljs-number">#ff416c</span>; <span class="hljs-attribute">background</span>: <span class="hljs-built_in">rgba</span>(<span class="hljs-number">255</span>, <span class="hljs-number">65</span>, <span class="hljs-number">108</span>, <span class="hljs-number">0.1</span>); &#125;</span><br><span class="language-css">        <span class="hljs-selector-class">.system-log</span> &#123; <span class="hljs-attribute">border-color</span>: <span class="hljs-number">#2196f3</span>; <span class="hljs-attribute">background</span>: <span class="hljs-built_in">rgba</span>(<span class="hljs-number">33</span>, <span class="hljs-number">150</span>, <span class="hljs-number">243</span>, <span class="hljs-number">0.1</span>); &#125;</span><br><span class="language-css">        <span class="hljs-selector-class">.combat-log</span> &#123; <span class="hljs-attribute">border-color</span>: <span class="hljs-number">#ffd700</span>; <span class="hljs-attribute">background</span>: <span class="hljs-built_in">rgba</span>(<span class="hljs-number">255</span>, <span class="hljs-number">215</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0.1</span>); &#125;</span><br><span class="language-css">        </span><br><span class="language-css">        <span class="hljs-selector-class">.tech-tree</span> &#123;</span><br><span class="language-css">            <span class="hljs-attribute">background</span>: <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0.7</span>);</span><br><span class="language-css">            <span class="hljs-attribute">padding</span>: <span class="hljs-number">20px</span>;</span><br><span class="language-css">            <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">15px</span>;</span><br><span class="language-css">            <span class="hljs-attribute">border</span>: <span class="hljs-number">3px</span> solid <span class="hljs-number">#9c27b0</span>;</span><br><span class="language-css">            <span class="hljs-attribute">margin-top</span>: <span class="hljs-number">20px</span>;</span><br><span class="language-css">        &#125;</span><br><span class="language-css">        </span><br><span class="language-css">        <span class="hljs-selector-class">.tech-category</span> &#123;</span><br><span class="language-css">            <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">15px</span>;</span><br><span class="language-css">        &#125;</span><br><span class="language-css">        </span><br><span class="language-css">        <span class="hljs-selector-class">.tech-item</span> &#123;</span><br><span class="language-css">            <span class="hljs-attribute">display</span>: flex;</span><br><span class="language-css">            <span class="hljs-attribute">justify-content</span>: space-between;</span><br><span class="language-css">            <span class="hljs-attribute">align-items</span>: center;</span><br><span class="language-css">            <span class="hljs-attribute">padding</span>: <span class="hljs-number">8px</span>;</span><br><span class="language-css">            <span class="hljs-attribute">margin</span>: <span class="hljs-number">5px</span> <span class="hljs-number">0</span>;</span><br><span class="language-css">            <span class="hljs-attribute">background</span>: <span class="hljs-built_in">rgba</span>(<span class="hljs-number">255</span>, <span class="hljs-number">255</span>, <span class="hljs-number">255</span>, <span class="hljs-number">0.1</span>);</span><br><span class="language-css">            <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">5px</span>;</span><br><span class="language-css">            <span class="hljs-attribute">cursor</span>: pointer;</span><br><span class="language-css">            <span class="hljs-attribute">transition</span>: all <span class="hljs-number">0.2s</span> ease;</span><br><span class="language-css">        &#125;</span><br><span class="language-css">        </span><br><span class="language-css">        <span class="hljs-selector-class">.tech-item</span><span class="hljs-selector-pseudo">:hover</span> &#123;</span><br><span class="language-css">            <span class="hljs-attribute">background</span>: <span class="hljs-built_in">rgba</span>(<span class="hljs-number">255</span>, <span class="hljs-number">255</span>, <span class="hljs-number">255</span>, <span class="hljs-number">0.2</span>);</span><br><span class="language-css">        &#125;</span><br><span class="language-css">        </span><br><span class="language-css">        <span class="hljs-selector-class">.tech-item</span><span class="hljs-selector-class">.unavailable</span> &#123;</span><br><span class="language-css">            <span class="hljs-attribute">opacity</span>: <span class="hljs-number">0.5</span>;</span><br><span class="language-css">            <span class="hljs-attribute">cursor</span>: not-allowed;</span><br><span class="language-css">        &#125;</span><br><span class="language-css">        </span><br><span class="language-css">        <span class="hljs-selector-class">.modal</span> &#123;</span><br><span class="language-css">            <span class="hljs-attribute">display</span>: none;</span><br><span class="language-css">            <span class="hljs-attribute">position</span>: fixed;</span><br><span class="language-css">            <span class="hljs-attribute">top</span>: <span class="hljs-number">0</span>;</span><br><span class="language-css">            <span class="hljs-attribute">left</span>: <span class="hljs-number">0</span>;</span><br><span class="language-css">            <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;</span><br><span class="language-css">            <span class="hljs-attribute">height</span>: <span class="hljs-number">100%</span>;</span><br><span class="language-css">            <span class="hljs-attribute">background</span>: <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0.9</span>);</span><br><span class="language-css">            <span class="hljs-attribute">z-index</span>: <span class="hljs-number">1000</span>;</span><br><span class="language-css">            <span class="hljs-attribute">justify-content</span>: center;</span><br><span class="language-css">            <span class="hljs-attribute">align-items</span>: center;</span><br><span class="language-css">        &#125;</span><br><span class="language-css">        </span><br><span class="language-css">        <span class="hljs-selector-class">.modal-content</span> &#123;</span><br><span class="language-css">            <span class="hljs-attribute">background</span>: <span class="hljs-built_in">rgba</span>(<span class="hljs-number">30</span>, <span class="hljs-number">30</span>, <span class="hljs-number">50</span>, <span class="hljs-number">0.95</span>);</span><br><span class="language-css">            <span class="hljs-attribute">padding</span>: <span class="hljs-number">30px</span>;</span><br><span class="language-css">            <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">20px</span>;</span><br><span class="language-css">            <span class="hljs-attribute">border</span>: <span class="hljs-number">3px</span> solid <span class="hljs-number">#00bcd4</span>;</span><br><span class="language-css">            <span class="hljs-attribute">max-width</span>: <span class="hljs-number">500px</span>;</span><br><span class="language-css">            <span class="hljs-attribute">text-align</span>: center;</span><br><span class="language-css">        &#125;</span><br><span class="language-css">        </span><br><span class="language-css">        <span class="hljs-selector-class">.modal</span> <span class="hljs-selector-tag">h2</span> &#123;</span><br><span class="language-css">            <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">20px</span>;</span><br><span class="language-css">            <span class="hljs-attribute">color</span>: <span class="hljs-number">#00bcd4</span>;</span><br><span class="language-css">        &#125;</span><br><span class="language-css">        </span><br><span class="language-css">        <span class="hljs-selector-class">.modal-btn</span> &#123;</span><br><span class="language-css">            <span class="hljs-attribute">padding</span>: <span class="hljs-number">12px</span> <span class="hljs-number">30px</span>;</span><br><span class="language-css">            <span class="hljs-attribute">margin</span>: <span class="hljs-number">15px</span> <span class="hljs-number">10px</span>;</span><br><span class="language-css">            <span class="hljs-attribute">font-size</span>: <span class="hljs-number">18px</span>;</span><br><span class="language-css">            <span class="hljs-attribute">background</span>: <span class="hljs-built_in">linear-gradient</span>(<span class="hljs-number">45deg</span>, <span class="hljs-number">#00b09b</span>, <span class="hljs-number">#96c93d</span>);</span><br><span class="language-css">            <span class="hljs-attribute">border</span>: none;</span><br><span class="language-css">            <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">8px</span>;</span><br><span class="language-css">            <span class="hljs-attribute">cursor</span>: pointer;</span><br><span class="language-css">            <span class="hljs-attribute">color</span>: white;</span><br><span class="language-css">        &#125;</span><br><span class="language-css">        </span><br><span class="language-css">        <span class="hljs-selector-class">.health-bar</span> &#123;</span><br><span class="language-css">            <span class="hljs-attribute">position</span>: absolute;</span><br><span class="language-css">            <span class="hljs-attribute">bottom</span>: <span class="hljs-number">5px</span>;</span><br><span class="language-css">            <span class="hljs-attribute">left</span>: <span class="hljs-number">5px</span>;</span><br><span class="language-css">            <span class="hljs-attribute">right</span>: <span class="hljs-number">5px</span>;</span><br><span class="language-css">            <span class="hljs-attribute">height</span>: <span class="hljs-number">4px</span>;</span><br><span class="language-css">            <span class="hljs-attribute">background</span>: <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0.5</span>);</span><br><span class="language-css">            <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">2px</span>;</span><br><span class="language-css">            <span class="hljs-attribute">overflow</span>: hidden;</span><br><span class="language-css">        &#125;</span><br><span class="language-css">        </span><br><span class="language-css">        <span class="hljs-selector-class">.health-fill</span> &#123;</span><br><span class="language-css">            <span class="hljs-attribute">height</span>: <span class="hljs-number">100%</span>;</span><br><span class="language-css">            <span class="hljs-attribute">background</span>: <span class="hljs-built_in">linear-gradient</span>(<span class="hljs-number">90deg</span>, <span class="hljs-number">#ff416c</span>, <span class="hljs-number">#00f260</span>);</span><br><span class="language-css">            <span class="hljs-attribute">transition</span>: width <span class="hljs-number">0.3s</span> ease;</span><br><span class="language-css">        &#125;</span><br><span class="language-css">        </span><br><span class="language-css">        <span class="hljs-selector-class">.effect</span> &#123;</span><br><span class="language-css">            <span class="hljs-attribute">position</span>: absolute;</span><br><span class="language-css">            <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;</span><br><span class="language-css">            <span class="hljs-attribute">height</span>: <span class="hljs-number">100%</span>;</span><br><span class="language-css">            <span class="hljs-attribute">pointer-events</span>: none;</span><br><span class="language-css">            <span class="hljs-attribute">z-index</span>: <span class="hljs-number">20</span>;</span><br><span class="language-css">            <span class="hljs-attribute">animation</span>: effect <span class="hljs-number">0.5s</span> ease-out;</span><br><span class="language-css">        &#125;</span><br><span class="language-css">        </span><br><span class="language-css">        <span class="hljs-keyword">@keyframes</span> effect &#123;</span><br><span class="language-css">            <span class="hljs-number">0%</span> &#123; <span class="hljs-attribute">opacity</span>: <span class="hljs-number">1</span>; <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">scale</span>(<span class="hljs-number">0.5</span>); &#125;</span><br><span class="language-css">            <span class="hljs-number">100%</span> &#123; <span class="hljs-attribute">opacity</span>: <span class="hljs-number">0</span>; <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">scale</span>(<span class="hljs-number">1.5</span>); &#125;</span><br><span class="language-css">        &#125;</span><br><span class="language-css">        </span><br><span class="language-css">        <span class="hljs-selector-class">.damage-text</span> &#123;</span><br><span class="language-css">            <span class="hljs-attribute">position</span>: absolute;</span><br><span class="language-css">            <span class="hljs-attribute">color</span>: <span class="hljs-number">#ff416c</span>;</span><br><span class="language-css">            <span class="hljs-attribute">font-weight</span>: bold;</span><br><span class="language-css">            <span class="hljs-attribute">font-size</span>: <span class="hljs-number">14px</span>;</span><br><span class="language-css">            <span class="hljs-attribute">pointer-events</span>: none;</span><br><span class="language-css">            <span class="hljs-attribute">z-index</span>: <span class="hljs-number">25</span>;</span><br><span class="language-css">            <span class="hljs-attribute">animation</span>: floatUp <span class="hljs-number">1s</span> ease-out;</span><br><span class="language-css">        &#125;</span><br><span class="language-css">        </span><br><span class="language-css">        <span class="hljs-keyword">@keyframes</span> floatUp &#123;</span><br><span class="language-css">            <span class="hljs-number">0%</span> &#123; <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">translateY</span>(<span class="hljs-number">0</span>); <span class="hljs-attribute">opacity</span>: <span class="hljs-number">1</span>; &#125;</span><br><span class="language-css">            <span class="hljs-number">100%</span> &#123; <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">translateY</span>(-<span class="hljs-number">30px</span>); <span class="hljs-attribute">opacity</span>: <span class="hljs-number">0</span>; &#125;</span><br><span class="language-css">        &#125;</span><br><span class="language-css">    </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;container&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">header</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>⚔️ 高级回合制塔防游戏 🛡️<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;game-stats&quot;</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;stat&quot;</span>&gt;</span>回合: <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;currentTurn&quot;</span>&gt;</span>1<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;stat&quot;</span>&gt;</span>玩家分数: <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;playerScore&quot;</span>&gt;</span>0<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;stat&quot;</span>&gt;</span>AI分数: <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;aiScore&quot;</span>&gt;</span>0<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;stat&quot;</span>&gt;</span>游戏状态: <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;gameStatus&quot;</span>&gt;</span>进行中<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">header</span>&gt;</span><br>        <br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;game-area&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;game-board&quot;</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;gameBoard&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>            <br>            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;control-panel&quot;</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;resource-display&quot;</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>💰 资源<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>玩家: <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;playerResources&quot;</span>&gt;</span>150<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span> (+<span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;playerIncome&quot;</span>&gt;</span>25<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>/回合)<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;resource-bar&quot;</span>&gt;</span><br>                        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;resource-fill player-resource&quot;</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;width: 100%&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>                    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>AI: <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;aiResources&quot;</span>&gt;</span>150<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span> (+<span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;aiIncome&quot;</span>&gt;</span>25<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>/回合)<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;resource-bar&quot;</span>&gt;</span><br>                        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;resource-fill ai-resource&quot;</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;width: 100%&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>                    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>                <br>                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;actions&quot;</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;btn btn-primary&quot;</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;buildBasicTowerBtn&quot;</span>&gt;</span>建造基础塔 (80💰)<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;btn btn-primary&quot;</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;buildAdvancedTowerBtn&quot;</span>&gt;</span>建造高级塔 (150💰)<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;btn btn-primary&quot;</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;sendBasicUnitBtn&quot;</span>&gt;</span>派遣基础单位 (40💰)<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;btn btn-primary&quot;</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;sendAdvancedUnitBtn&quot;</span>&gt;</span>派遣高级单位 (80💰)<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;btn&quot;</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;upgradeEconomyBtn&quot;</span>&gt;</span>升级经济 (100💰)<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;btn&quot;</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;researchTechBtn&quot;</span>&gt;</span>研究科技 (120💰)<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;btn btn-danger&quot;</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;specialAbilityBtn&quot;</span>&gt;</span>特殊能力 (200💰)<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;btn&quot;</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;endTurnBtn&quot;</span>&gt;</span>结束回合<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>                <br>                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;tower-info&quot;</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">h4</span>&gt;</span>🏰 塔信息<span class="hljs-tag">&lt;/<span class="hljs-name">h4</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>基础塔: 伤害 15 | 范围 3 | 造价 80<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>高级塔: 伤害 25 | 范围 4 | 造价 150<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>                <br>                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;unit-info&quot;</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">h4</span>&gt;</span>⚔️ 单位信息<span class="hljs-tag">&lt;/<span class="hljs-name">h4</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>基础单位: 生命 120 | 速度 1 | 造价 40<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>高级单位: 生命 200 | 速度 2 | 造价 80<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>                <br>                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;log-container&quot;</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;gameLog&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>        <br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;tech-tree&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>🔬 科技树<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;tech-category&quot;</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">h4</span>&gt;</span>军事科技<span class="hljs-tag">&lt;/<span class="hljs-name">h4</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;tech-item&quot;</span> <span class="hljs-attr">data-tech</span>=<span class="hljs-string">&quot;range&quot;</span>&gt;</span>射程提升 (+1范围) - 80💰<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;tech-item unavailable&quot;</span> <span class="hljs-attr">data-tech</span>=<span class="hljs-string">&quot;damage&quot;</span>&gt;</span>伤害提升 (+20%) - 120💰<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;tech-item unavailable&quot;</span> <span class="hljs-attr">data-tech</span>=<span class="hljs-string">&quot;speed&quot;</span>&gt;</span>攻击速度提升 - 150💰<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;tech-category&quot;</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">h4</span>&gt;</span>经济科技<span class="hljs-tag">&lt;/<span class="hljs-name">h4</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;tech-item&quot;</span> <span class="hljs-attr">data-tech</span>=<span class="hljs-string">&quot;income&quot;</span>&gt;</span>收入提升 (+10/回合) - 100💰<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;tech-item unavailable&quot;</span> <span class="hljs-attr">data-tech</span>=<span class="hljs-string">&quot;discount&quot;</span>&gt;</span>建筑折扣 (-20%) - 200💰<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;modal&quot;</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;gameOverModal&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;modal-content&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">h2</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;gameOverTitle&quot;</span>&gt;</span>游戏结束<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;gameOverMessage&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;modal-btn&quot;</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">&quot;resetGame()&quot;</span>&gt;</span>再来一局<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">        <span class="hljs-comment">// 游戏状态和配置</span></span><br><span class="language-javascript">        <span class="hljs-keyword">const</span> gameConfig = &#123;</span><br><span class="language-javascript">            <span class="hljs-attr">boardSize</span>: <span class="hljs-number">12</span>,</span><br><span class="language-javascript">            <span class="hljs-attr">startingResources</span>: <span class="hljs-number">150</span>,</span><br><span class="language-javascript">            <span class="hljs-attr">baseIncome</span>: <span class="hljs-number">25</span>,</span><br><span class="language-javascript">            <span class="hljs-attr">maxTurns</span>: <span class="hljs-number">50</span></span><br><span class="language-javascript">        &#125;;</span><br><span class="language-javascript">        </span><br><span class="language-javascript">        <span class="hljs-keyword">const</span> gameState = &#123;</span><br><span class="language-javascript">            <span class="hljs-attr">currentPlayer</span>: <span class="hljs-string">&#x27;player&#x27;</span>,</span><br><span class="language-javascript">            <span class="hljs-attr">playerResources</span>: gameConfig.<span class="hljs-property">startingResources</span>,</span><br><span class="language-javascript">            <span class="hljs-attr">aiResources</span>: gameConfig.<span class="hljs-property">startingResources</span>,</span><br><span class="language-javascript">            <span class="hljs-attr">playerIncome</span>: gameConfig.<span class="hljs-property">baseIncome</span>,</span><br><span class="language-javascript">            <span class="hljs-attr">aiIncome</span>: gameConfig.<span class="hljs-property">baseIncome</span>,</span><br><span class="language-javascript">            <span class="hljs-attr">turn</span>: <span class="hljs-number">1</span>,</span><br><span class="language-javascript">            <span class="hljs-attr">board</span>: [],</span><br><span class="language-javascript">            <span class="hljs-attr">playerUnits</span>: [],</span><br><span class="language-javascript">            <span class="hljs-attr">aiUnits</span>: [],</span><br><span class="language-javascript">            <span class="hljs-attr">playerTowers</span>: [],</span><br><span class="language-javascript">            <span class="hljs-attr">aiTowers</span>: [],</span><br><span class="language-javascript">            <span class="hljs-attr">playerTech</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>(),</span><br><span class="language-javascript">            <span class="hljs-attr">aiTech</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>(),</span><br><span class="language-javascript">            <span class="hljs-attr">path</span>: [],</span><br><span class="language-javascript">            <span class="hljs-attr">obstacles</span>: [],</span><br><span class="language-javascript">            <span class="hljs-attr">playerScore</span>: <span class="hljs-number">0</span>,</span><br><span class="language-javascript">            <span class="hljs-attr">aiScore</span>: <span class="hljs-number">0</span>,</span><br><span class="language-javascript">            <span class="hljs-attr">gameOver</span>: <span class="hljs-literal">false</span>,</span><br><span class="language-javascript">            <span class="hljs-attr">selectedCell</span>: <span class="hljs-literal">null</span></span><br><span class="language-javascript">        &#125;;</span><br><span class="language-javascript">        </span><br><span class="language-javascript">        <span class="hljs-comment">// 塔类型配置</span></span><br><span class="language-javascript">        <span class="hljs-keyword">const</span> towerTypes = &#123;</span><br><span class="language-javascript">            <span class="hljs-attr">basic</span>: &#123; <span class="hljs-attr">damage</span>: <span class="hljs-number">15</span>, <span class="hljs-attr">range</span>: <span class="hljs-number">3</span>, <span class="hljs-attr">cost</span>: <span class="hljs-number">80</span>, <span class="hljs-attr">symbol</span>: <span class="hljs-string">&#x27;T1&#x27;</span> &#125;,</span><br><span class="language-javascript">            <span class="hljs-attr">advanced</span>: &#123; <span class="hljs-attr">damage</span>: <span class="hljs-number">25</span>, <span class="hljs-attr">range</span>: <span class="hljs-number">4</span>, <span class="hljs-attr">cost</span>: <span class="hljs-number">150</span>, <span class="hljs-attr">symbol</span>: <span class="hljs-string">&#x27;T2&#x27;</span> &#125;</span><br><span class="language-javascript">        &#125;;</span><br><span class="language-javascript">        </span><br><span class="language-javascript">        <span class="hljs-comment">// 单位类型配置</span></span><br><span class="language-javascript">        <span class="hljs-keyword">const</span> unitTypes = &#123;</span><br><span class="language-javascript">            <span class="hljs-attr">basic</span>: &#123; <span class="hljs-attr">health</span>: <span class="hljs-number">120</span>, <span class="hljs-attr">speed</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">cost</span>: <span class="hljs-number">40</span>, <span class="hljs-attr">symbol</span>: <span class="hljs-string">&#x27;U1&#x27;</span> &#125;,</span><br><span class="language-javascript">            <span class="hljs-attr">advanced</span>: &#123; <span class="hljs-attr">health</span>: <span class="hljs-number">200</span>, <span class="hljs-attr">speed</span>: <span class="hljs-number">2</span>, <span class="hljs-attr">cost</span>: <span class="hljs-number">80</span>, <span class="hljs-attr">symbol</span>: <span class="hljs-string">&#x27;U2&#x27;</span> &#125;</span><br><span class="language-javascript">        &#125;;</span><br><span class="language-javascript">        </span><br><span class="language-javascript">        <span class="hljs-comment">// 科技效果配置</span></span><br><span class="language-javascript">        <span class="hljs-keyword">const</span> techEffects = &#123;</span><br><span class="language-javascript">            <span class="hljs-attr">range</span>: &#123; <span class="hljs-attr">cost</span>: <span class="hljs-number">80</span>, <span class="hljs-attr">effect</span>: <span class="hljs-string">&#x27;towerRange+1&#x27;</span> &#125;,</span><br><span class="language-javascript">            <span class="hljs-attr">damage</span>: &#123; <span class="hljs-attr">cost</span>: <span class="hljs-number">120</span>, <span class="hljs-attr">effect</span>: <span class="hljs-string">&#x27;towerDamage+20%&#x27;</span> &#125;,</span><br><span class="language-javascript">            <span class="hljs-attr">speed</span>: &#123; <span class="hljs-attr">cost</span>: <span class="hljs-number">150</span>, <span class="hljs-attr">effect</span>: <span class="hljs-string">&#x27;attackSpeed+1&#x27;</span> &#125;,</span><br><span class="language-javascript">            <span class="hljs-attr">income</span>: &#123; <span class="hljs-attr">cost</span>: <span class="hljs-number">100</span>, <span class="hljs-attr">effect</span>: <span class="hljs-string">&#x27;income+10&#x27;</span> &#125;,</span><br><span class="language-javascript">            <span class="hljs-attr">discount</span>: &#123; <span class="hljs-attr">cost</span>: <span class="hljs-number">200</span>, <span class="hljs-attr">effect</span>: <span class="hljs-string">&#x27;buildCost-20%&#x27;</span> &#125;</span><br><span class="language-javascript">        &#125;;</span><br><span class="language-javascript">        </span><br><span class="language-javascript">        <span class="hljs-comment">// 初始化游戏板</span></span><br><span class="language-javascript">        <span class="hljs-keyword">function</span> <span class="hljs-title function_">initializeBoard</span>(<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">            <span class="hljs-keyword">const</span> gameBoard = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&#x27;gameBoard&#x27;</span>);</span><br><span class="language-javascript">            gameBoard.<span class="hljs-property">innerHTML</span> = <span class="hljs-string">&#x27;&#x27;</span>;</span><br><span class="language-javascript">            gameState.<span class="hljs-property">board</span> = [];</span><br><span class="language-javascript">            </span><br><span class="language-javascript">            <span class="hljs-comment">// 创建游戏板</span></span><br><span class="language-javascript">            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> y = <span class="hljs-number">0</span>; y &lt; gameConfig.<span class="hljs-property">boardSize</span>; y++) &#123;</span><br><span class="language-javascript">                gameState.<span class="hljs-property">board</span>[y] = [];</span><br><span class="language-javascript">                <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> x = <span class="hljs-number">0</span>; x &lt; gameConfig.<span class="hljs-property">boardSize</span>; x++) &#123;</span><br><span class="language-javascript">                    gameState.<span class="hljs-property">board</span>[y][x] = &#123; </span><br><span class="language-javascript">                        <span class="hljs-attr">type</span>: <span class="hljs-string">&#x27;empty&#x27;</span>, </span><br><span class="language-javascript">                        <span class="hljs-attr">unit</span>: <span class="hljs-literal">null</span>, </span><br><span class="language-javascript">                        <span class="hljs-attr">tower</span>: <span class="hljs-literal">null</span>,</span><br><span class="language-javascript">                        <span class="hljs-attr">obstacle</span>: <span class="hljs-literal">false</span></span><br><span class="language-javascript">                    &#125;;</span><br><span class="language-javascript">                    </span><br><span class="language-javascript">                    <span class="hljs-keyword">const</span> cell = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">&#x27;div&#x27;</span>);</span><br><span class="language-javascript">                    cell.<span class="hljs-property">className</span> = <span class="hljs-string">&#x27;cell&#x27;</span>;</span><br><span class="language-javascript">                    cell.<span class="hljs-property">dataset</span>.<span class="hljs-property">x</span> = x;</span><br><span class="language-javascript">                    cell.<span class="hljs-property">dataset</span>.<span class="hljs-property">y</span> = y;</span><br><span class="language-javascript">                    cell.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&#x27;click&#x27;</span>, <span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">handleCellClick</span>(x, y));</span><br><span class="language-javascript">                    gameBoard.<span class="hljs-title function_">appendChild</span>(cell);</span><br><span class="language-javascript">                &#125;</span><br><span class="language-javascript">            &#125;</span><br><span class="language-javascript">            </span><br><span class="language-javascript">            <span class="hljs-comment">// 生成复杂路径</span></span><br><span class="language-javascript">            <span class="hljs-title function_">generateComplexPath</span>();</span><br><span class="language-javascript">            </span><br><span class="language-javascript">            <span class="hljs-comment">// 生成障碍物</span></span><br><span class="language-javascript">            <span class="hljs-title function_">generateObstacles</span>();</span><br><span class="language-javascript">            </span><br><span class="language-javascript">            <span class="hljs-title function_">updateBoardDisplay</span>();</span><br><span class="language-javascript">        &#125;</span><br><span class="language-javascript">        </span><br><span class="language-javascript">        <span class="hljs-comment">// 生成复杂路径</span></span><br><span class="language-javascript">        <span class="hljs-keyword">function</span> <span class="hljs-title function_">generateComplexPath</span>(<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">            gameState.<span class="hljs-property">path</span> = [];</span><br><span class="language-javascript">            <span class="hljs-keyword">const</span> directions = [</span><br><span class="language-javascript">                &#123;<span class="hljs-attr">dx</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">dy</span>: <span class="hljs-number">0</span>&#125;, &#123;<span class="hljs-attr">dx</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">dy</span>: <span class="hljs-number">1</span>&#125;, </span><br><span class="language-javascript">                &#123;<span class="hljs-attr">dx</span>: -<span class="hljs-number">1</span>, <span class="hljs-attr">dy</span>: <span class="hljs-number">0</span>&#125;, &#123;<span class="hljs-attr">dx</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">dy</span>: -<span class="hljs-number">1</span>&#125;</span><br><span class="language-javascript">            ];</span><br><span class="language-javascript">            </span><br><span class="language-javascript">            <span class="hljs-keyword">let</span> x = <span class="hljs-number">0</span>, y = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>(<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>() * <span class="hljs-number">4</span>) + <span class="hljs-number">2</span>;</span><br><span class="language-javascript">            gameState.<span class="hljs-property">path</span>.<span class="hljs-title function_">push</span>(&#123;x, y&#125;);</span><br><span class="language-javascript">            gameState.<span class="hljs-property">board</span>[y][x].<span class="hljs-property">type</span> = <span class="hljs-string">&#x27;start&#x27;</span>;</span><br><span class="language-javascript">            </span><br><span class="language-javascript">            <span class="hljs-keyword">while</span> (x &lt; gameConfig.<span class="hljs-property">boardSize</span> - <span class="hljs-number">1</span>) &#123;</span><br><span class="language-javascript">                <span class="hljs-comment">// 随机选择方向（优先向右）</span></span><br><span class="language-javascript">                <span class="hljs-keyword">const</span> dir = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>() &lt; <span class="hljs-number">0.6</span> ? directions[<span class="hljs-number">0</span>] : </span><br><span class="language-javascript">                           directions[<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>(<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>() * directions.<span class="hljs-property">length</span>)];</span><br><span class="language-javascript">                </span><br><span class="language-javascript">                <span class="hljs-keyword">const</span> newX = x + dir.<span class="hljs-property">dx</span>;</span><br><span class="language-javascript">                <span class="hljs-keyword">const</span> newY = y + dir.<span class="hljs-property">dy</span>;</span><br><span class="language-javascript">                </span><br><span class="language-javascript">                <span class="hljs-keyword">if</span> (newX &gt;= <span class="hljs-number">0</span> &amp;&amp; newX &lt; gameConfig.<span class="hljs-property">boardSize</span> &amp;&amp; </span><br><span class="language-javascript">                    newY &gt;= <span class="hljs-number">0</span> &amp;&amp; newY &lt; gameConfig.<span class="hljs-property">boardSize</span> &amp;&amp;</span><br><span class="language-javascript">                    !gameState.<span class="hljs-property">path</span>.<span class="hljs-title function_">some</span>(<span class="hljs-function"><span class="hljs-params">p</span> =&gt;</span> p.<span class="hljs-property">x</span> === newX &amp;&amp; p.<span class="hljs-property">y</span> === newY)) &#123;</span><br><span class="language-javascript">                    </span><br><span class="language-javascript">                    x = newX;</span><br><span class="language-javascript">                    y = newY;</span><br><span class="language-javascript">                    gameState.<span class="hljs-property">path</span>.<span class="hljs-title function_">push</span>(&#123;x, y&#125;);</span><br><span class="language-javascript">                    gameState.<span class="hljs-property">board</span>[y][x].<span class="hljs-property">type</span> = <span class="hljs-string">&#x27;path&#x27;</span>;</span><br><span class="language-javascript">                &#125;</span><br><span class="language-javascript">            &#125;</span><br><span class="language-javascript">            </span><br><span class="language-javascript">            gameState.<span class="hljs-property">board</span>[y][x].<span class="hljs-property">type</span> = <span class="hljs-string">&#x27;end&#x27;</span>;</span><br><span class="language-javascript">        &#125;</span><br><span class="language-javascript">        </span><br><span class="language-javascript">        <span class="hljs-comment">// 生成障碍物</span></span><br><span class="language-javascript">        <span class="hljs-keyword">function</span> <span class="hljs-title function_">generateObstacles</span>(<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">            gameState.<span class="hljs-property">obstacles</span> = [];</span><br><span class="language-javascript">            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">15</span>; i++) &#123;</span><br><span class="language-javascript">                <span class="hljs-keyword">const</span> x = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>(<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>() * gameConfig.<span class="hljs-property">boardSize</span>);</span><br><span class="language-javascript">                <span class="hljs-keyword">const</span> y = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>(<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>() * gameConfig.<span class="hljs-property">boardSize</span>);</span><br><span class="language-javascript">                </span><br><span class="language-javascript">                <span class="hljs-keyword">if</span> (gameState.<span class="hljs-property">board</span>[y][x].<span class="hljs-property">type</span> === <span class="hljs-string">&#x27;empty&#x27;</span>) &#123;</span><br><span class="language-javascript">                    gameState.<span class="hljs-property">board</span>[y][x].<span class="hljs-property">type</span> = <span class="hljs-string">&#x27;obstacle&#x27;</span>;</span><br><span class="language-javascript">                    gameState.<span class="hljs-property">board</span>[y][x].<span class="hljs-property">obstacle</span> = <span class="hljs-literal">true</span>;</span><br><span class="language-javascript">                    gameState.<span class="hljs-property">obstacles</span>.<span class="hljs-title function_">push</span>(&#123;x, y&#125;);</span><br><span class="language-javascript">                &#125;</span><br><span class="language-javascript">            &#125;</span><br><span class="language-javascript">        &#125;</span><br><span class="language-javascript">        </span><br><span class="language-javascript">        <span class="hljs-comment">// 处理单元格点击</span></span><br><span class="language-javascript">        <span class="hljs-keyword">function</span> <span class="hljs-title function_">handleCellClick</span>(<span class="hljs-params">x, y</span>) &#123;</span><br><span class="language-javascript">            <span class="hljs-keyword">if</span> (gameState.<span class="hljs-property">currentPlayer</span> !== <span class="hljs-string">&#x27;player&#x27;</span> || gameState.<span class="hljs-property">gameOver</span>) <span class="hljs-keyword">return</span>;</span><br><span class="language-javascript">            </span><br><span class="language-javascript">            <span class="hljs-keyword">const</span> cell = gameState.<span class="hljs-property">board</span>[y][x];</span><br><span class="language-javascript">            gameState.<span class="hljs-property">selectedCell</span> = &#123;x, y&#125;;</span><br><span class="language-javascript">            </span><br><span class="language-javascript">            <span class="hljs-keyword">if</span> (cell.<span class="hljs-property">type</span> === <span class="hljs-string">&#x27;empty&#x27;</span> &amp;&amp; !cell.<span class="hljs-property">tower</span> &amp;&amp; !cell.<span class="hljs-property">obstacle</span>) &#123;</span><br><span class="language-javascript">                <span class="hljs-title function_">showBuildOptions</span>(x, y);</span><br><span class="language-javascript">            &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (cell.<span class="hljs-property">tower</span> &amp;&amp; cell.<span class="hljs-property">tower</span>.<span class="hljs-property">owner</span> === <span class="hljs-string">&#x27;player&#x27;</span>) &#123;</span><br><span class="language-javascript">                <span class="hljs-title function_">showTowerOptions</span>(x, y);</span><br><span class="language-javascript">            &#125;</span><br><span class="language-javascript">        &#125;</span><br><span class="language-javascript">        </span><br><span class="language-javascript">        <span class="hljs-comment">// 显示建造选项</span></span><br><span class="language-javascript">        <span class="hljs-keyword">function</span> <span class="hljs-title function_">showBuildOptions</span>(<span class="hljs-params">x, y</span>) &#123;</span><br><span class="language-javascript">            <span class="hljs-keyword">const</span> basicCost = towerTypes.<span class="hljs-property">basic</span>.<span class="hljs-property">cost</span>;</span><br><span class="language-javascript">            <span class="hljs-keyword">const</span> advancedCost = towerTypes.<span class="hljs-property">advanced</span>.<span class="hljs-property">cost</span>;</span><br><span class="language-javascript">            </span><br><span class="language-javascript">            <span class="hljs-keyword">if</span> (<span class="hljs-title function_">confirm</span>(<span class="hljs-string">`在位置 (<span class="hljs-subst">$&#123;x&#125;</span>, <span class="hljs-subst">$&#123;y&#125;</span>) 建造:\n\n基础塔 - <span class="hljs-subst">$&#123;basicCost&#125;</span>💰\n高级塔 - <span class="hljs-subst">$&#123;advancedCost&#125;</span>💰`</span>)) &#123;</span><br><span class="language-javascript">                <span class="hljs-keyword">const</span> choice = <span class="hljs-title function_">prompt</span>(<span class="hljs-string">&#x27;选择要建造的塔类型 (输入 1 或 2):\n1. 基础塔\n2. 高级塔&#x27;</span>);</span><br><span class="language-javascript">                </span><br><span class="language-javascript">                <span class="hljs-keyword">if</span> (choice === <span class="hljs-string">&#x27;1&#x27;</span>) &#123;</span><br><span class="language-javascript">                    <span class="hljs-title function_">buildTower</span>(x, y, <span class="hljs-string">&#x27;player&#x27;</span>, <span class="hljs-string">&#x27;basic&#x27;</span>);</span><br><span class="language-javascript">                &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (choice === <span class="hljs-string">&#x27;2&#x27;</span>) &#123;</span><br><span class="language-javascript">                    <span class="hljs-title function_">buildTower</span>(x, y, <span class="hljs-string">&#x27;player&#x27;</span>, <span class="hljs-string">&#x27;advanced&#x27;</span>);</span><br><span class="language-javascript">                &#125;</span><br><span class="language-javascript">            &#125;</span><br><span class="language-javascript">        &#125;</span><br><span class="language-javascript">        </span><br><span class="language-javascript">        <span class="hljs-comment">// 建造塔</span></span><br><span class="language-javascript">        <span class="hljs-keyword">function</span> <span class="hljs-title function_">buildTower</span>(<span class="hljs-params">x, y, owner, type</span>) &#123;</span><br><span class="language-javascript">            <span class="hljs-keyword">const</span> towerConfig = towerTypes[type];</span><br><span class="language-javascript">            <span class="hljs-keyword">const</span> cost = towerConfig.<span class="hljs-property">cost</span>;</span><br><span class="language-javascript">            </span><br><span class="language-javascript">            <span class="hljs-keyword">if</span> (owner === <span class="hljs-string">&#x27;player&#x27;</span> &amp;&amp; gameState.<span class="hljs-property">playerResources</span> &lt; cost) &#123;</span><br><span class="language-javascript">                <span class="hljs-title function_">addLog</span>(<span class="hljs-string">&#x27;资源不足，无法建造防御塔&#x27;</span>, <span class="hljs-string">&#x27;system&#x27;</span>);</span><br><span class="language-javascript">                <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;</span><br><span class="language-javascript">            &#125;</span><br><span class="language-javascript">            </span><br><span class="language-javascript">            <span class="hljs-keyword">if</span> (owner === <span class="hljs-string">&#x27;ai&#x27;</span> &amp;&amp; gameState.<span class="hljs-property">aiResources</span> &lt; cost) &#123;</span><br><span class="language-javascript">                <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;</span><br><span class="language-javascript">            &#125;</span><br><span class="language-javascript">            </span><br><span class="language-javascript">            gameState.<span class="hljs-property">board</span>[y][x].<span class="hljs-property">tower</span> = &#123; </span><br><span class="language-javascript">                owner, </span><br><span class="language-javascript">                type,</span><br><span class="language-javascript">                <span class="hljs-attr">damage</span>: towerConfig.<span class="hljs-property">damage</span>,</span><br><span class="language-javascript">                <span class="hljs-attr">range</span>: towerConfig.<span class="hljs-property">range</span>,</span><br><span class="language-javascript">                <span class="hljs-attr">attacks</span>: <span class="hljs-number">0</span></span><br><span class="language-javascript">            &#125;;</span><br><span class="language-javascript">            </span><br><span class="language-javascript">            <span class="hljs-keyword">if</span> (owner === <span class="hljs-string">&#x27;player&#x27;</span>) &#123;</span><br><span class="language-javascript">                gameState.<span class="hljs-property">playerResources</span> -= cost;</span><br><span class="language-javascript">                gameState.<span class="hljs-property">playerTowers</span>.<span class="hljs-title function_">push</span>(&#123; x, y, type &#125;);</span><br><span class="language-javascript">                <span class="hljs-title function_">addLog</span>(<span class="hljs-string">`玩家建造了<span class="hljs-subst">$&#123;type === <span class="hljs-string">&#x27;basic&#x27;</span> ? <span class="hljs-string">&#x27;基础&#x27;</span> : <span class="hljs-string">&#x27;高级&#x27;</span>&#125;</span>防御塔 (<span class="hljs-subst">$&#123;x&#125;</span>, <span class="hljs-subst">$&#123;y&#125;</span>)`</span>, <span class="hljs-string">&#x27;player&#x27;</span>);</span><br><span class="language-javascript">            &#125; <span class="hljs-keyword">else</span> &#123;</span><br><span class="language-javascript">                gameState.<span class="hljs-property">aiResources</span> -= cost;</span><br><span class="language-javascript">                gameState.<span class="hljs-property">aiTowers</span>.<span class="hljs-title function_">push</span>(&#123; x, y, type &#125;);</span><br><span class="language-javascript">                <span class="hljs-title function_">addLog</span>(<span class="hljs-string">`AI建造了<span class="hljs-subst">$&#123;type === <span class="hljs-string">&#x27;basic&#x27;</span> ? <span class="hljs-string">&#x27;基础&#x27;</span> : <span class="hljs-string">&#x27;高级&#x27;</span>&#125;</span>防御塔 (<span class="hljs-subst">$&#123;x&#125;</span>, <span class="hljs-subst">$&#123;y&#125;</span>)`</span>, <span class="hljs-string">&#x27;ai&#x27;</span>);</span><br><span class="language-javascript">            &#125;</span><br><span class="language-javascript">            </span><br><span class="language-javascript">            <span class="hljs-title function_">updateBoardDisplay</span>();</span><br><span class="language-javascript">            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;</span><br><span class="language-javascript">        &#125;</span><br><span class="language-javascript">        </span><br><span class="language-javascript">        <span class="hljs-comment">// 派遣单位</span></span><br><span class="language-javascript">        <span class="hljs-keyword">function</span> <span class="hljs-title function_">sendUnit</span>(<span class="hljs-params">owner, type</span>) &#123;</span><br><span class="language-javascript">            <span class="hljs-keyword">const</span> unitConfig = unitTypes[type];</span><br><span class="language-javascript">            <span class="hljs-keyword">const</span> cost = unitConfig.<span class="hljs-property">cost</span>;</span><br><span class="language-javascript">            </span><br><span class="language-javascript">            <span class="hljs-keyword">if</span> (owner === <span class="hljs-string">&#x27;player&#x27;</span> &amp;&amp; gameState.<span class="hljs-property">playerResources</span> &lt; cost) &#123;</span><br><span class="language-javascript">                <span class="hljs-title function_">addLog</span>(<span class="hljs-string">&#x27;资源不足，无法派遣单位&#x27;</span>, <span class="hljs-string">&#x27;system&#x27;</span>);</span><br><span class="language-javascript">                <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;</span><br><span class="language-javascript">            &#125;</span><br><span class="language-javascript">            </span><br><span class="language-javascript">            <span class="hljs-keyword">if</span> (owner === <span class="hljs-string">&#x27;ai&#x27;</span> &amp;&amp; gameState.<span class="hljs-property">aiResources</span> &lt; cost) &#123;</span><br><span class="language-javascript">                <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;</span><br><span class="language-javascript">            &#125;</span><br><span class="language-javascript">            </span><br><span class="language-javascript">            <span class="hljs-keyword">const</span> start = gameState.<span class="hljs-property">path</span>[<span class="hljs-number">0</span>];</span><br><span class="language-javascript">            <span class="hljs-keyword">const</span> unit = &#123; </span><br><span class="language-javascript">                owner, </span><br><span class="language-javascript">                type,</span><br><span class="language-javascript">                <span class="hljs-attr">health</span>: unitConfig.<span class="hljs-property">health</span>,</span><br><span class="language-javascript">                <span class="hljs-attr">maxHealth</span>: unitConfig.<span class="hljs-property">health</span>,</span><br><span class="language-javascript">                <span class="hljs-attr">position</span>: <span class="hljs-number">0</span>,</span><br><span class="language-javascript">                <span class="hljs-attr">x</span>: start.<span class="hljs-property">x</span>, </span><br><span class="language-javascript">                <span class="hljs-attr">y</span>: start.<span class="hljs-property">y</span>,</span><br><span class="language-javascript">                <span class="hljs-attr">speed</span>: unitConfig.<span class="hljs-property">speed</span>,</span><br><span class="language-javascript">                <span class="hljs-attr">damageTaken</span>: <span class="hljs-number">0</span></span><br><span class="language-javascript">            &#125;;</span><br><span class="language-javascript">            </span><br><span class="language-javascript">            gameState.<span class="hljs-property">board</span>[start.<span class="hljs-property">y</span>][start.<span class="hljs-property">x</span>].<span class="hljs-property">unit</span> = unit;</span><br><span class="language-javascript">            </span><br><span class="language-javascript">            <span class="hljs-keyword">if</span> (owner === <span class="hljs-string">&#x27;player&#x27;</span>) &#123;</span><br><span class="language-javascript">                gameState.<span class="hljs-property">playerResources</span> -= cost;</span><br><span class="language-javascript">                gameState.<span class="hljs-property">playerUnits</span>.<span class="hljs-title function_">push</span>(unit);</span><br><span class="language-javascript">                <span class="hljs-title function_">addLog</span>(<span class="hljs-string">`玩家派遣了<span class="hljs-subst">$&#123;type === <span class="hljs-string">&#x27;basic&#x27;</span> ? <span class="hljs-string">&#x27;基础&#x27;</span> : <span class="hljs-string">&#x27;高级&#x27;</span>&#125;</span>单位`</span>, <span class="hljs-string">&#x27;player&#x27;</span>);</span><br><span class="language-javascript">            &#125; <span class="hljs-keyword">else</span> &#123;</span><br><span class="language-javascript">                gameState.<span class="hljs-property">aiResources</span> -= cost;</span><br><span class="language-javascript">                gameState.<span class="hljs-property">aiUnits</span>.<span class="hljs-title function_">push</span>(unit);</span><br><span class="language-javascript">                <span class="hljs-title function_">addLog</span>(<span class="hljs-string">`AI派遣了<span class="hljs-subst">$&#123;type === <span class="hljs-string">&#x27;basic&#x27;</span> ? <span class="hljs-string">&#x27;基础&#x27;</span> : <span class="hljs-string">&#x27;高级&#x27;</span>&#125;</span>单位`</span>, <span class="hljs-string">&#x27;ai&#x27;</span>);</span><br><span class="language-javascript">            &#125;</span><br><span class="language-javascript">            </span><br><span class="language-javascript">            <span class="hljs-title function_">updateBoardDisplay</span>();</span><br><span class="language-javascript">            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;</span><br><span class="language-javascript">        &#125;</span><br><span class="language-javascript">        </span><br><span class="language-javascript">        <span class="hljs-comment">// AI智能决策</span></span><br><span class="language-javascript">        <span class="hljs-keyword">function</span> <span class="hljs-title function_">aiDecision</span>(<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">            <span class="hljs-keyword">const</span> strategy = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>();</span><br><span class="language-javascript">            <span class="hljs-keyword">let</span> actionTaken = <span class="hljs-literal">false</span>;</span><br><span class="language-javascript">            </span><br><span class="language-javascript">            <span class="hljs-comment">// 40%几率建造塔</span></span><br><span class="language-javascript">            <span class="hljs-keyword">if</span> (strategy &lt; <span class="hljs-number">0.4</span> &amp;&amp; gameState.<span class="hljs-property">aiResources</span> &gt;= towerTypes.<span class="hljs-property">basic</span>.<span class="hljs-property">cost</span>) &#123;</span><br><span class="language-javascript">                <span class="hljs-keyword">const</span> bestSpot = <span class="hljs-title function_">findBestTowerSpot</span>();</span><br><span class="language-javascript">                <span class="hljs-keyword">if</span> (bestSpot) &#123;</span><br><span class="language-javascript">                    <span class="hljs-keyword">const</span> towerType = gameState.<span class="hljs-property">aiResources</span> &gt;= towerTypes.<span class="hljs-property">advanced</span>.<span class="hljs-property">cost</span> &amp;&amp; <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>() &lt; <span class="hljs-number">0.3</span> ? <span class="hljs-string">&#x27;advanced&#x27;</span> : <span class="hljs-string">&#x27;basic&#x27;</span>;</span><br><span class="language-javascript">                    actionTaken = <span class="hljs-title function_">buildTower</span>(bestSpot.<span class="hljs-property">x</span>, bestSpot.<span class="hljs-property">y</span>, <span class="hljs-string">&#x27;ai&#x27;</span>, towerType);</span><br><span class="language-javascript">                &#125;</span><br><span class="language-javascript">            &#125;</span><br><span class="language-javascript">            <span class="hljs-comment">// 30%几率派遣单位</span></span><br><span class="language-javascript">            <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (strategy &lt; <span class="hljs-number">0.7</span> &amp;&amp; gameState.<span class="hljs-property">aiResources</span> &gt;= unitTypes.<span class="hljs-property">basic</span>.<span class="hljs-property">cost</span>) &#123;</span><br><span class="language-javascript">                <span class="hljs-keyword">const</span> unitType = gameState.<span class="hljs-property">aiResources</span> &gt;= unitTypes.<span class="hljs-property">advanced</span>.<span class="hljs-property">cost</span> &amp;&amp; <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>() &lt; <span class="hljs-number">0.4</span> ? <span class="hljs-string">&#x27;advanced&#x27;</span> : <span class="hljs-string">&#x27;basic&#x27;</span>;</span><br><span class="language-javascript">                actionTaken = <span class="hljs-title function_">sendUnit</span>(<span class="hljs-string">&#x27;ai&#x27;</span>, unitType);</span><br><span class="language-javascript">            &#125;</span><br><span class="language-javascript">            <span class="hljs-comment">// 20%几率研究科技</span></span><br><span class="language-javascript">            <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (strategy &lt; <span class="hljs-number">0.9</span> &amp;&amp; gameState.<span class="hljs-property">aiResources</span> &gt;= <span class="hljs-number">80</span>) &#123;</span><br><span class="language-javascript">                actionTaken = <span class="hljs-title function_">researchTech</span>(<span class="hljs-string">&#x27;ai&#x27;</span>);</span><br><span class="language-javascript">            &#125;</span><br><span class="language-javascript">            <span class="hljs-comment">// 10%几率升级经济</span></span><br><span class="language-javascript">            <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (gameState.<span class="hljs-property">aiResources</span> &gt;= <span class="hljs-number">100</span>) &#123;</span><br><span class="language-javascript">                actionTaken = <span class="hljs-title function_">upgradeEconomy</span>(<span class="hljs-string">&#x27;ai&#x27;</span>);</span><br><span class="language-javascript">            &#125;</span><br><span class="language-javascript">            </span><br><span class="language-javascript">            <span class="hljs-comment">// 如果没采取行动，结束回合</span></span><br><span class="language-javascript">            <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> &#123;</span><br><span class="language-javascript">                <span class="hljs-keyword">if</span> (!actionTaken) <span class="hljs-title function_">addLog</span>(<span class="hljs-string">&#x27;AI选择保存资源&#x27;</span>, <span class="hljs-string">&#x27;ai&#x27;</span>);</span><br><span class="language-javascript">                <span class="hljs-title function_">endTurn</span>();</span><br><span class="language-javascript">            &#125;, <span class="hljs-number">1000</span>);</span><br><span class="language-javascript">        &#125;</span><br><span class="language-javascript">        </span><br><span class="language-javascript">        <span class="hljs-comment">// 寻找最佳塔位置</span></span><br><span class="language-javascript">        <span class="hljs-keyword">function</span> <span class="hljs-title function_">findBestTowerSpot</span>(<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">            <span class="hljs-keyword">let</span> bestSpot = <span class="hljs-literal">null</span>;</span><br><span class="language-javascript">            <span class="hljs-keyword">let</span> maxCoverage = <span class="hljs-number">0</span>;</span><br><span class="language-javascript">            </span><br><span class="language-javascript">            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> y = <span class="hljs-number">0</span>; y &lt; gameConfig.<span class="hljs-property">boardSize</span>; y++) &#123;</span><br><span class="language-javascript">                <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> x = <span class="hljs-number">0</span>; x &lt; gameConfig.<span class="hljs-property">boardSize</span>; x++) &#123;</span><br><span class="language-javascript">                    <span class="hljs-keyword">if</span> (gameState.<span class="hljs-property">board</span>[y][x].<span class="hljs-property">type</span> === <span class="hljs-string">&#x27;empty&#x27;</span> &amp;&amp; </span><br><span class="language-javascript">                        !gameState.<span class="hljs-property">board</span>[y][x].<span class="hljs-property">tower</span> &amp;&amp; </span><br><span class="language-javascript">                        !gameState.<span class="hljs-property">board</span>[y][x].<span class="hljs-property">obstacle</span>) &#123;</span><br><span class="language-javascript">                        </span><br><span class="language-javascript">                        <span class="hljs-keyword">let</span> coverage = <span class="hljs-number">0</span>;</span><br><span class="language-javascript">                        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> pathPos <span class="hljs-keyword">of</span> gameState.<span class="hljs-property">path</span>) &#123;</span><br><span class="language-javascript">                            <span class="hljs-keyword">const</span> distance = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">abs</span>(pathPos.<span class="hljs-property">x</span> - x), <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">abs</span>(pathPos.<span class="hljs-property">y</span> - y));</span><br><span class="language-javascript">                            <span class="hljs-keyword">if</span> (distance &lt;= <span class="hljs-number">3</span>) coverage++;</span><br><span class="language-javascript">                        &#125;</span><br><span class="language-javascript">                        </span><br><span class="language-javascript">                        <span class="hljs-keyword">if</span> (coverage &gt; maxCoverage) &#123;</span><br><span class="language-javascript">                            maxCoverage = coverage;</span><br><span class="language-javascript">                            bestSpot = &#123; x, y &#125;;</span><br><span class="language-javascript">                        &#125;</span><br><span class="language-javascript">                    &#125;</span><br><span class="language-javascript">                &#125;</span><br><span class="language-javascript">            &#125;</span><br><span class="language-javascript">            </span><br><span class="language-javascript">            <span class="hljs-keyword">return</span> bestSpot;</span><br><span class="language-javascript">        &#125;</span><br><span class="language-javascript">        </span><br><span class="language-javascript">        <span class="hljs-comment">// 研究科技</span></span><br><span class="language-javascript">        <span class="hljs-keyword">function</span> <span class="hljs-title function_">researchTech</span>(<span class="hljs-params">owner</span>) &#123;</span><br><span class="language-javascript">            <span class="hljs-keyword">const</span> availableTechs = <span class="hljs-title class_">Array</span>.<span class="hljs-title function_">from</span>(<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">entries</span>(techEffects))</span><br><span class="language-javascript">                .<span class="hljs-title function_">filter</span>(<span class="hljs-function">(<span class="hljs-params">[tech]</span>) =&gt;</span> !gameState[owner === <span class="hljs-string">&#x27;player&#x27;</span> ? <span class="hljs-string">&#x27;playerTech&#x27;</span> : <span class="hljs-string">&#x27;aiTech&#x27;</span>].<span class="hljs-title function_">has</span>(tech))</span><br><span class="language-javascript">                .<span class="hljs-title function_">filter</span>(<span class="hljs-function">(<span class="hljs-params">[_, config]</span>) =&gt;</span> (owner === <span class="hljs-string">&#x27;player&#x27;</span> ? gameState.<span class="hljs-property">playerResources</span> : gameState.<span class="hljs-property">aiResources</span>) &gt;= config.<span class="hljs-property">cost</span>);</span><br><span class="language-javascript">            </span><br><span class="language-javascript">            <span class="hljs-keyword">if</span> (availableTechs.<span class="hljs-property">length</span> === <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;</span><br><span class="language-javascript">            </span><br><span class="language-javascript">            <span class="hljs-keyword">const</span> [tech] = availableTechs[<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>(<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>() * availableTechs.<span class="hljs-property">length</span>)];</span><br><span class="language-javascript">            <span class="hljs-keyword">const</span> cost = techEffects[tech].<span class="hljs-property">cost</span>;</span><br><span class="language-javascript">            </span><br><span class="language-javascript">            <span class="hljs-keyword">if</span> (owner === <span class="hljs-string">&#x27;player&#x27;</span>) &#123;</span><br><span class="language-javascript">                gameState.<span class="hljs-property">playerResources</span> -= cost;</span><br><span class="language-javascript">                gameState.<span class="hljs-property">playerTech</span>.<span class="hljs-title function_">add</span>(tech);</span><br><span class="language-javascript">                <span class="hljs-title function_">addLog</span>(<span class="hljs-string">`玩家研究了科技: <span class="hljs-subst">$&#123;tech&#125;</span>`</span>, <span class="hljs-string">&#x27;player&#x27;</span>);</span><br><span class="language-javascript">            &#125; <span class="hljs-keyword">else</span> &#123;</span><br><span class="language-javascript">                gameState.<span class="hljs-property">aiResources</span> -= cost;</span><br><span class="language-javascript">                gameState.<span class="hljs-property">aiTech</span>.<span class="hljs-title function_">add</span>(tech);</span><br><span class="language-javascript">                <span class="hljs-title function_">addLog</span>(<span class="hljs-string">`AI研究了科技: <span class="hljs-subst">$&#123;tech&#125;</span>`</span>, <span class="hljs-string">&#x27;ai&#x27;</span>);</span><br><span class="language-javascript">            &#125;</span><br><span class="language-javascript">            </span><br><span class="language-javascript">            <span class="hljs-title function_">applyTechEffect</span>(owner, tech);</span><br><span class="language-javascript">            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;</span><br><span class="language-javascript">        &#125;</span><br><span class="language-javascript">        </span><br><span class="language-javascript">        <span class="hljs-comment">// 应用科技效果</span></span><br><span class="language-javascript">        <span class="hljs-keyword">function</span> <span class="hljs-title function_">applyTechEffect</span>(<span class="hljs-params">owner, tech</span>) &#123;</span><br><span class="language-javascript">            <span class="hljs-keyword">switch</span> (tech) &#123;</span><br><span class="language-javascript">                <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;range&#x27;</span>:</span><br><span class="language-javascript">                    <span class="hljs-comment">// 增加所有塔的范围</span></span><br><span class="language-javascript">                    <span class="hljs-keyword">const</span> towers = owner === <span class="hljs-string">&#x27;player&#x27;</span> ? gameState.<span class="hljs-property">playerTowers</span> : gameState.<span class="hljs-property">aiTowers</span>;</span><br><span class="language-javascript">                    towers.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">tower</span> =&gt;</span> &#123;</span><br><span class="language-javascript">                        gameState.<span class="hljs-property">board</span>[tower.<span class="hljs-property">y</span>][tower.<span class="hljs-property">x</span>].<span class="hljs-property">tower</span>.<span class="hljs-property">range</span> += <span class="hljs-number">1</span>;</span><br><span class="language-javascript">                    &#125;);</span><br><span class="language-javascript">                    <span class="hljs-keyword">break</span>;</span><br><span class="language-javascript">                <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;income&#x27;</span>:</span><br><span class="language-javascript">                    <span class="hljs-keyword">if</span> (owner === <span class="hljs-string">&#x27;player&#x27;</span>) &#123;</span><br><span class="language-javascript">                        gameState.<span class="hljs-property">playerIncome</span> += <span class="hljs-number">10</span>;</span><br><span class="language-javascript">                    &#125; <span class="hljs-keyword">else</span> &#123;</span><br><span class="language-javascript">                        gameState.<span class="hljs-property">aiIncome</span> += <span class="hljs-number">10</span>;</span><br><span class="language-javascript">                    &#125;</span><br><span class="language-javascript">                    <span class="hljs-keyword">break</span>;</span><br><span class="language-javascript">            &#125;</span><br><span class="language-javascript">        &#125;</span><br><span class="language-javascript">        </span><br><span class="language-javascript">        <span class="hljs-comment">// 升级经济</span></span><br><span class="language-javascript">        <span class="hljs-keyword">function</span> <span class="hljs-title function_">upgradeEconomy</span>(<span class="hljs-params">owner</span>) &#123;</span><br><span class="language-javascript">            <span class="hljs-keyword">const</span> cost = <span class="hljs-number">100</span>;</span><br><span class="language-javascript">            </span><br><span class="language-javascript">            <span class="hljs-keyword">if</span> (owner === <span class="hljs-string">&#x27;player&#x27;</span> &amp;&amp; gameState.<span class="hljs-property">playerResources</span> &lt; cost) &#123;</span><br><span class="language-javascript">                <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;</span><br><span class="language-javascript">            &#125;</span><br><span class="language-javascript">            </span><br><span class="language-javascript">            <span class="hljs-keyword">if</span> (owner === <span class="hljs-string">&#x27;ai&#x27;</span> &amp;&amp; gameState.<span class="hljs-property">aiResources</span> &lt; cost) &#123;</span><br><span class="language-javascript">                <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;</span><br><span class="language-javascript">            &#125;</span><br><span class="language-javascript">            </span><br><span class="language-javascript">            <span class="hljs-keyword">if</span> (owner === <span class="hljs-string">&#x27;player&#x27;</span>) &#123;</span><br><span class="language-javascript">                gameState.<span class="hljs-property">playerResources</span> -= cost;</span><br><span class="language-javascript">                gameState.<span class="hljs-property">playerIncome</span> += <span class="hljs-number">5</span>;</span><br><span class="language-javascript">                <span class="hljs-title function_">addLog</span>(<span class="hljs-string">&#x27;玩家升级了经济 (+5收入/回合)&#x27;</span>, <span class="hljs-string">&#x27;player&#x27;</span>);</span><br><span class="language-javascript">            &#125; <span class="hljs-keyword">else</span> &#123;</span><br><span class="language-javascript">                gameState.<span class="hljs-property">aiResources</span> -= cost;</span><br><span class="language-javascript">                gameState.<span class="hljs-property">aiIncome</span> += <span class="hljs-number">5</span>;</span><br><span class="language-javascript">                <span class="hljs-title function_">addLog</span>(<span class="hljs-string">&#x27;AI升级了经济 (+5收入/回合)&#x27;</span>, <span class="hljs-string">&#x27;ai&#x27;</span>);</span><br><span class="language-javascript">            &#125;</span><br><span class="language-javascript">            </span><br><span class="language-javascript">            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;</span><br><span class="language-javascript">        &#125;</span><br><span class="language-javascript">        </span><br><span class="language-javascript">        <span class="hljs-comment">// 移动单位</span></span><br><span class="language-javascript">        <span class="hljs-keyword">function</span> <span class="hljs-title function_">moveUnits</span>(<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">            <span class="hljs-comment">// 移动所有单位</span></span><br><span class="language-javascript">            [...gameState.<span class="hljs-property">playerUnits</span>, ...gameState.<span class="hljs-property">aiUnits</span>].<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">unit</span> =&gt;</span> &#123;</span><br><span class="language-javascript">                <span class="hljs-keyword">if</span> (unit.<span class="hljs-property">health</span> &gt; <span class="hljs-number">0</span>) &#123;</span><br><span class="language-javascript">                    <span class="hljs-title function_">moveUnit</span>(unit);</span><br><span class="language-javascript">                &#125;</span><br><span class="language-javascript">            &#125;);</span><br><span class="language-javascript">        &#125;</span><br><span class="language-javascript">        </span><br><span class="language-javascript">        <span class="hljs-comment">// 移动单个单位</span></span><br><span class="language-javascript">        <span class="hljs-keyword">function</span> <span class="hljs-title function_">moveUnit</span>(<span class="hljs-params">unit</span>) &#123;</span><br><span class="language-javascript">            gameState.<span class="hljs-property">board</span>[unit.<span class="hljs-property">y</span>][unit.<span class="hljs-property">x</span>].<span class="hljs-property">unit</span> = <span class="hljs-literal">null</span>;</span><br><span class="language-javascript">            </span><br><span class="language-javascript">            unit.<span class="hljs-property">position</span> += unit.<span class="hljs-property">speed</span>;</span><br><span class="language-javascript">            </span><br><span class="language-javascript">            <span class="hljs-keyword">if</span> (unit.<span class="hljs-property">position</span> &gt;= gameState.<span class="hljs-property">path</span>.<span class="hljs-property">length</span>) &#123;</span><br><span class="language-javascript">                <span class="hljs-comment">// 单位到达终点</span></span><br><span class="language-javascript">                <span class="hljs-title function_">unitReachedEnd</span>(unit);</span><br><span class="language-javascript">                <span class="hljs-keyword">return</span>;</span><br><span class="language-javascript">            &#125;</span><br><span class="language-javascript">            </span><br><span class="language-javascript">            <span class="hljs-keyword">const</span> newPos = gameState.<span class="hljs-property">path</span>[unit.<span class="hljs-property">position</span>];</span><br><span class="language-javascript">            unit.<span class="hljs-property">x</span> = newPos.<span class="hljs-property">x</span>;</span><br><span class="language-javascript">            unit.<span class="hljs-property">y</span> = newPos.<span class="hljs-property">y</span>;</span><br><span class="language-javascript">            gameState.<span class="hljs-property">board</span>[unit.<span class="hljs-property">y</span>][unit.<span class="hljs-property">x</span>].<span class="hljs-property">unit</span> = unit;</span><br><span class="language-javascript">        &#125;</span><br><span class="language-javascript">        </span><br><span class="language-javascript">        <span class="hljs-comment">// 单位到达终点</span></span><br><span class="language-javascript">        <span class="hljs-keyword">function</span> <span class="hljs-title function_">unitReachedEnd</span>(<span class="hljs-params">unit</span>) &#123;</span><br><span class="language-javascript">            <span class="hljs-keyword">const</span> index = unit.<span class="hljs-property">owner</span> === <span class="hljs-string">&#x27;player&#x27;</span> </span><br><span class="language-javascript">                ? gameState.<span class="hljs-property">playerUnits</span>.<span class="hljs-title function_">indexOf</span>(unit) </span><br><span class="language-javascript">                : gameState.<span class="hljs-property">aiUnits</span>.<span class="hljs-title function_">indexOf</span>(unit);</span><br><span class="language-javascript">            </span><br><span class="language-javascript">            <span class="hljs-keyword">if</span> (index &gt; -<span class="hljs-number">1</span>) &#123;</span><br><span class="language-javascript">                <span class="hljs-keyword">if</span> (unit.<span class="hljs-property">owner</span> === <span class="hljs-string">&#x27;player&#x27;</span>) &#123;</span><br><span class="language-javascript">                    gameState.<span class="hljs-property">playerUnits</span>.<span class="hljs-title function_">splice</span>(index, <span class="hljs-number">1</span>);</span><br><span class="language-javascript">                    gameState.<span class="hljs-property">playerScore</span> += unit.<span class="hljs-property">type</span> === <span class="hljs-string">&#x27;advanced&#x27;</span> ? <span class="hljs-number">3</span> : <span class="hljs-number">1</span>;</span><br><span class="language-javascript">                    <span class="hljs-title function_">addLog</span>(<span class="hljs-string">`玩家单位到达终点! +<span class="hljs-subst">$&#123;unit.type === <span class="hljs-string">&#x27;advanced&#x27;</span> ? <span class="hljs-number">3</span> : <span class="hljs-number">1</span>&#125;</span>分`</span>, <span class="hljs-string">&#x27;system&#x27;</span>);</span><br><span class="language-javascript">                &#125; <span class="hljs-keyword">else</span> &#123;</span><br><span class="language-javascript">                    gameState.<span class="hljs-property">aiUnits</span>.<span class="hljs-title function_">splice</span>(index, <span class="hljs-number">1</span>);</span><br><span class="language-javascript">                    gameState.<span class="hljs-property">aiScore</span> += unit.<span class="hljs-property">type</span> === <span class="hljs-string">&#x27;advanced&#x27;</span> ? <span class="hljs-number">3</span> : <span class="hljs-number">1</span>;</span><br><span class="language-javascript">                    <span class="hljs-title function_">addLog</span>(<span class="hljs-string">`AI单位到达终点! +<span class="hljs-subst">$&#123;unit.type === <span class="hljs-string">&#x27;advanced&#x27;</span> ? <span class="hljs-number">3</span> : <span class="hljs-number">1</span>&#125;</span>分`</span>, <span class="hljs-string">&#x27;system&#x27;</span>);</span><br><span class="language-javascript">                &#125;</span><br><span class="language-javascript">                <span class="hljs-title function_">checkGameOver</span>();</span><br><span class="language-javascript">            &#125;</span><br><span class="language-javascript">        &#125;</span><br><span class="language-javascript">        </span><br><span class="language-javascript">        <span class="hljs-comment">// 塔攻击</span></span><br><span class="language-javascript">        <span class="hljs-keyword">function</span> <span class="hljs-title function_">towersAttack</span>(<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">            <span class="hljs-keyword">const</span> currentPlayer = gameState.<span class="hljs-property">currentPlayer</span>;</span><br><span class="language-javascript">            <span class="hljs-keyword">const</span> attacker = currentPlayer === <span class="hljs-string">&#x27;player&#x27;</span> ? <span class="hljs-string">&#x27;player&#x27;</span> : <span class="hljs-string">&#x27;ai&#x27;</span>;</span><br><span class="language-javascript">            <span class="hljs-keyword">const</span> defender = currentPlayer === <span class="hljs-string">&#x27;player&#x27;</span> ? <span class="hljs-string">&#x27;ai&#x27;</span> : <span class="hljs-string">&#x27;player&#x27;</span>;</span><br><span class="language-javascript">            </span><br><span class="language-javascript">            <span class="hljs-keyword">const</span> towers = attacker === <span class="hljs-string">&#x27;player&#x27;</span> ? gameState.<span class="hljs-property">playerTowers</span> : gameState.<span class="hljs-property">aiTowers</span>;</span><br><span class="language-javascript">            </span><br><span class="language-javascript">            towers.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">tower</span> =&gt;</span> &#123;</span><br><span class="language-javascript">                <span class="hljs-keyword">const</span> towerData = gameState.<span class="hljs-property">board</span>[tower.<span class="hljs-property">y</span>][tower.<span class="hljs-property">x</span>].<span class="hljs-property">tower</span>;</span><br><span class="language-javascript">                <span class="hljs-keyword">const</span> targets = defender === <span class="hljs-string">&#x27;player&#x27;</span> ? gameState.<span class="hljs-property">playerUnits</span> : gameState.<span class="hljs-property">aiUnits</span>;</span><br><span class="language-javascript">                </span><br><span class="language-javascript">                <span class="hljs-keyword">const</span> inRange = targets.<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">unit</span> =&gt;</span> &#123;</span><br><span class="language-javascript">                    <span class="hljs-keyword">const</span> distance = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">abs</span>(unit.<span class="hljs-property">x</span> - tower.<span class="hljs-property">x</span>), <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">abs</span>(unit.<span class="hljs-property">y</span> - tower.<span class="hljs-property">y</span>));</span><br><span class="language-javascript">                    <span class="hljs-keyword">return</span> distance &lt;= towerData.<span class="hljs-property">range</span> &amp;&amp; unit.<span class="hljs-property">health</span> &gt; <span class="hljs-number">0</span>;</span><br><span class="language-javascript">                &#125;);</span><br><span class="language-javascript">                </span><br><span class="language-javascript">                <span class="hljs-keyword">if</span> (inRange.<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span>) &#123;</span><br><span class="language-javascript">                    <span class="hljs-comment">// 选择最近的目标</span></span><br><span class="language-javascript">                    inRange.<span class="hljs-title function_">sort</span>(<span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> a.<span class="hljs-property">position</span> - b.<span class="hljs-property">position</span>);</span><br><span class="language-javascript">                    <span class="hljs-keyword">const</span> target = inRange[<span class="hljs-number">0</span>];</span><br><span class="language-javascript">                    </span><br><span class="language-javascript">                    <span class="hljs-comment">// 造成伤害</span></span><br><span class="language-javascript">                    target.<span class="hljs-property">health</span> -= towerData.<span class="hljs-property">damage</span>;</span><br><span class="language-javascript">                    target.<span class="hljs-property">damageTaken</span> += towerData.<span class="hljs-property">damage</span>;</span><br><span class="language-javascript">                    </span><br><span class="language-javascript">                    <span class="hljs-comment">// 显示伤害效果</span></span><br><span class="language-javascript">                    <span class="hljs-title function_">showDamageEffect</span>(target.<span class="hljs-property">x</span>, target.<span class="hljs-property">y</span>, towerData.<span class="hljs-property">damage</span>);</span><br><span class="language-javascript">                    </span><br><span class="language-javascript">                    <span class="hljs-title function_">addLog</span>(<span class="hljs-string">`<span class="hljs-subst">$&#123;attacker === <span class="hljs-string">&#x27;player&#x27;</span> ? <span class="hljs-string">&#x27;玩家&#x27;</span> : <span class="hljs-string">&#x27;AI&#x27;</span>&#125;</span>塔攻击<span class="hljs-subst">$&#123;defender === <span class="hljs-string">&#x27;player&#x27;</span> ? <span class="hljs-string">&#x27;玩家&#x27;</span> : <span class="hljs-string">&#x27;AI&#x27;</span>&#125;</span>单位, 造成 <span class="hljs-subst">$&#123;towerData.damage&#125;</span> 伤害`</span>, <span class="hljs-string">&#x27;combat&#x27;</span>);</span><br><span class="language-javascript">                    </span><br><span class="language-javascript">                    <span class="hljs-comment">// 检查是否消灭目标</span></span><br><span class="language-javascript">                    <span class="hljs-keyword">if</span> (target.<span class="hljs-property">health</span> &lt;= <span class="hljs-number">0</span>) &#123;</span><br><span class="language-javascript">                        gameState.<span class="hljs-property">board</span>[target.<span class="hljs-property">y</span>][target.<span class="hljs-property">x</span>].<span class="hljs-property">unit</span> = <span class="hljs-literal">null</span>;</span><br><span class="language-javascript">                        <span class="hljs-keyword">const</span> targetIndex = targets.<span class="hljs-title function_">indexOf</span>(target);</span><br><span class="language-javascript">                        <span class="hljs-keyword">if</span> (targetIndex &gt; -<span class="hljs-number">1</span>) targets.<span class="hljs-title function_">splice</span>(targetIndex, <span class="hljs-number">1</span>);</span><br><span class="language-javascript">                        </span><br><span class="language-javascript">                        <span class="hljs-keyword">if</span> (attacker === <span class="hljs-string">&#x27;player&#x27;</span>) &#123;</span><br><span class="language-javascript">                            gameState.<span class="hljs-property">playerScore</span> += target.<span class="hljs-property">type</span> === <span class="hljs-string">&#x27;advanced&#x27;</span> ? <span class="hljs-number">2</span> : <span class="hljs-number">1</span>;</span><br><span class="language-javascript">                        &#125; <span class="hljs-keyword">else</span> &#123;</span><br><span class="language-javascript">                            gameState.<span class="hljs-property">aiScore</span> += target.<span class="hljs-property">type</span> === <span class="hljs-string">&#x27;advanced&#x27;</span> ? <span class="hljs-number">2</span> : <span class="hljs-number">1</span>;</span><br><span class="language-javascript">                        &#125;</span><br><span class="language-javascript">                        </span><br><span class="language-javascript">                        <span class="hljs-title function_">addLog</span>(<span class="hljs-string">`<span class="hljs-subst">$&#123;defender === <span class="hljs-string">&#x27;player&#x27;</span> ? <span class="hljs-string">&#x27;玩家&#x27;</span> : <span class="hljs-string">&#x27;AI&#x27;</span>&#125;</span>单位被消灭!`</span>, <span class="hljs-string">&#x27;combat&#x27;</span>);</span><br><span class="language-javascript">                    &#125;</span><br><span class="language-javascript">                &#125;</span><br><span class="language-javascript">            &#125;);</span><br><span class="language-javascript">        &#125;</span><br><span class="language-javascript">        </span><br><span class="language-javascript">        <span class="hljs-comment">// 显示伤害效果</span></span><br><span class="language-javascript">        <span class="hljs-keyword">function</span> <span class="hljs-title function_">showDamageEffect</span>(<span class="hljs-params">x, y, damage</span>) &#123;</span><br><span class="language-javascript">            <span class="hljs-keyword">const</span> cell = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">`.cell[data-x=&quot;<span class="hljs-subst">$&#123;x&#125;</span>&quot;][data-y=&quot;<span class="hljs-subst">$&#123;y&#125;</span>&quot;]`</span>);</span><br><span class="language-javascript">            <span class="hljs-keyword">if</span> (!cell) <span class="hljs-keyword">return</span>;</span><br><span class="language-javascript">            </span><br><span class="language-javascript">            <span class="hljs-keyword">const</span> damageText = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">&#x27;div&#x27;</span>);</span><br><span class="language-javascript">            damageText.<span class="hljs-property">className</span> = <span class="hljs-string">&#x27;damage-text&#x27;</span>;</span><br><span class="language-javascript">            damageText.<span class="hljs-property">textContent</span> = <span class="hljs-string">`-<span class="hljs-subst">$&#123;damage&#125;</span>`</span>;</span><br><span class="language-javascript">            damageText.<span class="hljs-property">style</span>.<span class="hljs-property">left</span> = <span class="hljs-string">&#x27;50%&#x27;</span>;</span><br><span class="language-javascript">            damageText.<span class="hljs-property">style</span>.<span class="hljs-property">top</span> = <span class="hljs-string">&#x27;50%&#x27;</span>;</span><br><span class="language-javascript">            cell.<span class="hljs-title function_">appendChild</span>(damageText);</span><br><span class="language-javascript">            </span><br><span class="language-javascript">            <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> damageText.<span class="hljs-title function_">remove</span>(), <span class="hljs-number">1000</span>);</span><br><span class="language-javascript">        &#125;</span><br><span class="language-javascript">        </span><br><span class="language-javascript">        <span class="hljs-comment">// 检查游戏结束</span></span><br><span class="language-javascript">        <span class="hljs-keyword">function</span> <span class="hljs-title function_">checkGameOver</span>(<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">            <span class="hljs-keyword">if</span> (gameState.<span class="hljs-property">turn</span> &gt;= gameConfig.<span class="hljs-property">maxTurns</span>) &#123;</span><br><span class="language-javascript">                <span class="hljs-title function_">endGame</span>(gameState.<span class="hljs-property">playerScore</span> &gt; gameState.<span class="hljs-property">aiScore</span> ? <span class="hljs-string">&#x27;player&#x27;</span> : </span><br><span class="language-javascript">                       gameState.<span class="hljs-property">aiScore</span> &gt; gameState.<span class="hljs-property">playerScore</span> ? <span class="hljs-string">&#x27;ai&#x27;</span> : <span class="hljs-string">&#x27;draw&#x27;</span>);</span><br><span class="language-javascript">                <span class="hljs-keyword">return</span>;</span><br><span class="language-javascript">            &#125;</span><br><span class="language-javascript">            </span><br><span class="language-javascript">            <span class="hljs-keyword">if</span> (gameState.<span class="hljs-property">playerScore</span> &gt;= <span class="hljs-number">20</span>) &#123;</span><br><span class="language-javascript">                <span class="hljs-title function_">endGame</span>(<span class="hljs-string">&#x27;player&#x27;</span>);</span><br><span class="language-javascript">            &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (gameState.<span class="hljs-property">aiScore</span> &gt;= <span class="hljs-number">20</span>) &#123;</span><br><span class="language-javascript">                <span class="hljs-title function_">endGame</span>(<span class="hljs-string">&#x27;ai&#x27;</span>);</span><br><span class="language-javascript">            &#125;</span><br><span class="language-javascript">        &#125;</span><br><span class="language-javascript">        </span><br><span class="language-javascript">        <span class="hljs-comment">// 结束游戏</span></span><br><span class="language-javascript">        <span class="hljs-keyword">function</span> <span class="hljs-title function_">endGame</span>(<span class="hljs-params">winner</span>) &#123;</span><br><span class="language-javascript">            gameState.<span class="hljs-property">gameOver</span> = <span class="hljs-literal">true</span>;</span><br><span class="language-javascript">            <span class="hljs-keyword">const</span> modal = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&#x27;gameOverModal&#x27;</span>);</span><br><span class="language-javascript">            <span class="hljs-keyword">const</span> title = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&#x27;gameOverTitle&#x27;</span>);</span><br><span class="language-javascript">            <span class="hljs-keyword">const</span> message = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&#x27;gameOverMessage&#x27;</span>);</span><br><span class="language-javascript">            </span><br><span class="language-javascript">            <span class="hljs-keyword">if</span> (winner === <span class="hljs-string">&#x27;player&#x27;</span>) &#123;</span><br><span class="language-javascript">                title.<span class="hljs-property">textContent</span> = <span class="hljs-string">&#x27;🎉 玩家胜利! 🎉&#x27;</span>;</span><br><span class="language-javascript">                message.<span class="hljs-property">textContent</span> = <span class="hljs-string">`恭喜! 你以 <span class="hljs-subst">$&#123;gameState.playerScore&#125;</span> : <span class="hljs-subst">$&#123;gameState.aiScore&#125;</span> 的比分获胜!`</span>;</span><br><span class="language-javascript">            &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (winner === <span class="hljs-string">&#x27;ai&#x27;</span>) &#123;</span><br><span class="language-javascript">                title.<span class="hljs-property">textContent</span> = <span class="hljs-string">&#x27;😵 AI胜利! 😵&#x27;</span>;</span><br><span class="language-javascript">                message.<span class="hljs-property">textContent</span> = <span class="hljs-string">`AI以 <span class="hljs-subst">$&#123;gameState.aiScore&#125;</span> : <span class="hljs-subst">$&#123;gameState.playerScore&#125;</span> 的比分获胜!`</span>;</span><br><span class="language-javascript">            &#125; <span class="hljs-keyword">else</span> &#123;</span><br><span class="language-javascript">                title.<span class="hljs-property">textContent</span> = <span class="hljs-string">&#x27;🤝 平局! 🤝&#x27;</span>;</span><br><span class="language-javascript">                message.<span class="hljs-property">textContent</span> = <span class="hljs-string">`比赛以 <span class="hljs-subst">$&#123;gameState.playerScore&#125;</span> : <span class="hljs-subst">$&#123;gameState.aiScore&#125;</span> 的比分结束!`</span>;</span><br><span class="language-javascript">            &#125;</span><br><span class="language-javascript">            </span><br><span class="language-javascript">            modal.<span class="hljs-property">style</span>.<span class="hljs-property">display</span> = <span class="hljs-string">&#x27;flex&#x27;</span>;</span><br><span class="language-javascript">        &#125;</span><br><span class="language-javascript">        </span><br><span class="language-javascript">        <span class="hljs-comment">// 重置游戏</span></span><br><span class="language-javascript">        <span class="hljs-keyword">function</span> <span class="hljs-title function_">resetGame</span>(<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">            <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&#x27;gameOverModal&#x27;</span>).<span class="hljs-property">style</span>.<span class="hljs-property">display</span> = <span class="hljs-string">&#x27;none&#x27;</span>;</span><br><span class="language-javascript">            <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">assign</span>(gameState, &#123;</span><br><span class="language-javascript">                <span class="hljs-attr">currentPlayer</span>: <span class="hljs-string">&#x27;player&#x27;</span>,</span><br><span class="language-javascript">                <span class="hljs-attr">playerResources</span>: gameConfig.<span class="hljs-property">startingResources</span>,</span><br><span class="language-javascript">                <span class="hljs-attr">aiResources</span>: gameConfig.<span class="hljs-property">startingResources</span>,</span><br><span class="language-javascript">                <span class="hljs-attr">playerIncome</span>: gameConfig.<span class="hljs-property">baseIncome</span>,</span><br><span class="language-javascript">                <span class="hljs-attr">aiIncome</span>: gameConfig.<span class="hljs-property">baseIncome</span>,</span><br><span class="language-javascript">                <span class="hljs-attr">turn</span>: <span class="hljs-number">1</span>,</span><br><span class="language-javascript">                <span class="hljs-attr">playerUnits</span>: [],</span><br><span class="language-javascript">                <span class="hljs-attr">aiUnits</span>: [],</span><br><span class="language-javascript">                <span class="hljs-attr">playerTowers</span>: [],</span><br><span class="language-javascript">                <span class="hljs-attr">aiTowers</span>: [],</span><br><span class="language-javascript">                <span class="hljs-attr">playerTech</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>(),</span><br><span class="language-javascript">                <span class="hljs-attr">aiTech</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>(),</span><br><span class="language-javascript">                <span class="hljs-attr">playerScore</span>: <span class="hljs-number">0</span>,</span><br><span class="language-javascript">                <span class="hljs-attr">aiScore</span>: <span class="hljs-number">0</span>,</span><br><span class="language-javascript">                <span class="hljs-attr">gameOver</span>: <span class="hljs-literal">false</span></span><br><span class="language-javascript">            &#125;);</span><br><span class="language-javascript">            </span><br><span class="language-javascript">            <span class="hljs-title function_">initializeBoard</span>();</span><br><span class="language-javascript">            <span class="hljs-title function_">updateUI</span>();</span><br><span class="language-javascript">            <span class="hljs-title function_">addLog</span>(<span class="hljs-string">&#x27;游戏开始! 玩家先行动&#x27;</span>, <span class="hljs-string">&#x27;system&#x27;</span>);</span><br><span class="language-javascript">        &#125;</span><br><span class="language-javascript">        </span><br><span class="language-javascript">        <span class="hljs-comment">// 更新UI</span></span><br><span class="language-javascript">        <span class="hljs-keyword">function</span> <span class="hljs-title function_">updateUI</span>(<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">            <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&#x27;currentTurn&#x27;</span>).<span class="hljs-property">textContent</span> = gameState.<span class="hljs-property">turn</span>;</span><br><span class="language-javascript">            <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&#x27;playerScore&#x27;</span>).<span class="hljs-property">textContent</span> = gameState.<span class="hljs-property">playerScore</span>;</span><br><span class="language-javascript">            <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&#x27;aiScore&#x27;</span>).<span class="hljs-property">textContent</span> = gameState.<span class="hljs-property">aiScore</span>;</span><br><span class="language-javascript">            <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&#x27;playerResources&#x27;</span>).<span class="hljs-property">textContent</span> = gameState.<span class="hljs-property">playerResources</span>;</span><br><span class="language-javascript">            <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&#x27;aiResources&#x27;</span>).<span class="hljs-property">textContent</span> = gameState.<span class="hljs-property">aiResources</span>;</span><br><span class="language-javascript">            <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&#x27;playerIncome&#x27;</span>).<span class="hljs-property">textContent</span> = gameState.<span class="hljs-property">playerIncome</span>;</span><br><span class="language-javascript">            <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&#x27;aiIncome&#x27;</span>).<span class="hljs-property">textContent</span> = gameState.<span class="hljs-property">aiIncome</span>;</span><br><span class="language-javascript">            </span><br><span class="language-javascript">            <span class="hljs-comment">// 更新资源条</span></span><br><span class="language-javascript">            <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">&#x27;.player-resource&#x27;</span>).<span class="hljs-property">style</span>.<span class="hljs-property">width</span> = </span><br><span class="language-javascript">                <span class="hljs-string">`<span class="hljs-subst">$&#123;<span class="hljs-built_in">Math</span>.min(<span class="hljs-number">100</span>, (gameState.playerResources / <span class="hljs-number">500</span>) * <span class="hljs-number">100</span>)&#125;</span>%`</span>;</span><br><span class="language-javascript">            <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">&#x27;.ai-resource&#x27;</span>).<span class="hljs-property">style</span>.<span class="hljs-property">width</span> = </span><br><span class="language-javascript">                <span class="hljs-string">`<span class="hljs-subst">$&#123;<span class="hljs-built_in">Math</span>.min(<span class="hljs-number">100</span>, (gameState.aiResources / <span class="hljs-number">500</span>) * <span class="hljs-number">100</span>)&#125;</span>%`</span>;</span><br><span class="language-javascript">        &#125;</span><br><span class="language-javascript">        </span><br><span class="language-javascript">        <span class="hljs-comment">// 添加日志</span></span><br><span class="language-javascript">        <span class="hljs-keyword">function</span> <span class="hljs-title function_">addLog</span>(<span class="hljs-params">message, type</span>) &#123;</span><br><span class="language-javascript">            <span class="hljs-keyword">const</span> log = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&#x27;gameLog&#x27;</span>);</span><br><span class="language-javascript">            <span class="hljs-keyword">const</span> entry = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">&#x27;div&#x27;</span>);</span><br><span class="language-javascript">            entry.<span class="hljs-property">className</span> = <span class="hljs-string">`log-entry <span class="hljs-subst">$&#123;type&#125;</span>-log`</span>;</span><br><span class="language-javascript">            entry.<span class="hljs-property">textContent</span> = <span class="hljs-string">`[<span class="hljs-subst">$&#123;<span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>().toLocaleTimeString()&#125;</span>] <span class="hljs-subst">$&#123;message&#125;</span>`</span>;</span><br><span class="language-javascript">            log.<span class="hljs-title function_">appendChild</span>(entry);</span><br><span class="language-javascript">            log.<span class="hljs-property">scrollTop</span> = log.<span class="hljs-property">scrollHeight</span>;</span><br><span class="language-javascript">        &#125;</span><br><span class="language-javascript">        </span><br><span class="language-javascript">        <span class="hljs-comment">// 更新游戏板显示</span></span><br><span class="language-javascript">        <span class="hljs-keyword">function</span> <span class="hljs-title function_">updateBoardDisplay</span>(<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">            <span class="hljs-keyword">const</span> cells = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelectorAll</span>(<span class="hljs-string">&#x27;.cell&#x27;</span>);</span><br><span class="language-javascript">            </span><br><span class="language-javascript">            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> y = <span class="hljs-number">0</span>; y &lt; gameConfig.<span class="hljs-property">boardSize</span>; y++) &#123;</span><br><span class="language-javascript">                <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> x = <span class="hljs-number">0</span>; x &lt; gameConfig.<span class="hljs-property">boardSize</span>; x++) &#123;</span><br><span class="language-javascript">                    <span class="hljs-keyword">const</span> index = y * gameConfig.<span class="hljs-property">boardSize</span> + x;</span><br><span class="language-javascript">                    <span class="hljs-keyword">const</span> cell = cells[index];</span><br><span class="language-javascript">                    <span class="hljs-keyword">const</span> boardCell = gameState.<span class="hljs-property">board</span>[y][x];</span><br><span class="language-javascript">                    </span><br><span class="language-javascript">                    cell.<span class="hljs-property">className</span> = <span class="hljs-string">&#x27;cell&#x27;</span>;</span><br><span class="language-javascript">                    cell.<span class="hljs-property">innerHTML</span> = <span class="hljs-string">&#x27;&#x27;</span>;</span><br><span class="language-javascript">                    </span><br><span class="language-javascript">                    <span class="hljs-comment">// 设置单元格类型</span></span><br><span class="language-javascript">                    <span class="hljs-keyword">if</span> (boardCell.<span class="hljs-property">type</span> === <span class="hljs-string">&#x27;path&#x27;</span>) cell.<span class="hljs-property">classList</span>.<span class="hljs-title function_">add</span>(<span class="hljs-string">&#x27;path&#x27;</span>);</span><br><span class="language-javascript">                    <span class="hljs-keyword">if</span> (boardCell.<span class="hljs-property">type</span> === <span class="hljs-string">&#x27;start&#x27;</span>) cell.<span class="hljs-property">classList</span>.<span class="hljs-title function_">add</span>(<span class="hljs-string">&#x27;start&#x27;</span>);</span><br><span class="language-javascript">                    <span class="hljs-keyword">if</span> (boardCell.<span class="hljs-property">type</span> === <span class="hljs-string">&#x27;end&#x27;</span>) cell.<span class="hljs-property">classList</span>.<span class="hljs-title function_">add</span>(<span class="hljs-string">&#x27;end&#x27;</span>);</span><br><span class="language-javascript">                    <span class="hljs-keyword">if</span> (boardCell.<span class="hljs-property">type</span> === <span class="hljs-string">&#x27;obstacle&#x27;</span>) cell.<span class="hljs-property">classList</span>.<span class="hljs-title function_">add</span>(<span class="hljs-string">&#x27;obstacle&#x27;</span>);</span><br><span class="language-javascript">                    </span><br><span class="language-javascript">                    <span class="hljs-comment">// 添加塔</span></span><br><span class="language-javascript">                    <span class="hljs-keyword">if</span> (boardCell.<span class="hljs-property">tower</span>) &#123;</span><br><span class="language-javascript">                        <span class="hljs-keyword">const</span> tower = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">&#x27;div&#x27;</span>);</span><br><span class="language-javascript">                        tower.<span class="hljs-property">className</span> = <span class="hljs-string">`tower <span class="hljs-subst">$&#123;boardCell.tower.owner&#125;</span>-tower`</span>;</span><br><span class="language-javascript">                        tower.<span class="hljs-property">textContent</span> = boardCell.<span class="hljs-property">tower</span>.<span class="hljs-property">type</span> === <span class="hljs-string">&#x27;basic&#x27;</span> ? <span class="hljs-string">&#x27;T1&#x27;</span> : <span class="hljs-string">&#x27;T2&#x27;</span>;</span><br><span class="language-javascript">                        cell.<span class="hljs-title function_">appendChild</span>(tower);</span><br><span class="language-javascript">                        cell.<span class="hljs-property">classList</span>.<span class="hljs-title function_">add</span>(<span class="hljs-string">&#x27;tower-cell&#x27;</span>);</span><br><span class="language-javascript">                        </span><br><span class="language-javascript">                        <span class="hljs-comment">// 显示塔范围</span></span><br><span class="language-javascript">                        <span class="hljs-keyword">const</span> rangeIndicator = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">&#x27;div&#x27;</span>);</span><br><span class="language-javascript">                        rangeIndicator.<span class="hljs-property">className</span> = <span class="hljs-string">&#x27;tower-range&#x27;</span>;</span><br><span class="language-javascript">                        rangeIndicator.<span class="hljs-property">style</span>.<span class="hljs-property">width</span> = <span class="hljs-string">`<span class="hljs-subst">$&#123;boardCell.tower.range * <span class="hljs-number">120</span> + <span class="hljs-number">60</span>&#125;</span>px`</span>;</span><br><span class="language-javascript">                        rangeIndicator.<span class="hljs-property">style</span>.<span class="hljs-property">height</span> = <span class="hljs-string">`<span class="hljs-subst">$&#123;boardCell.tower.range * <span class="hljs-number">120</span> + <span class="hljs-number">60</span>&#125;</span>px`</span>;</span><br><span class="language-javascript">                        rangeIndicator.<span class="hljs-property">style</span>.<span class="hljs-property">left</span> = <span class="hljs-string">`<span class="hljs-subst">$&#123;-boardCell.tower.range * <span class="hljs-number">60</span>&#125;</span>px`</span>;</span><br><span class="language-javascript">                        rangeIndicator.<span class="hljs-property">style</span>.<span class="hljs-property">top</span> = <span class="hljs-string">`<span class="hljs-subst">$&#123;-boardCell.tower.range * <span class="hljs-number">60</span>&#125;</span>px`</span>;</span><br><span class="language-javascript">                        cell.<span class="hljs-title function_">appendChild</span>(rangeIndicator);</span><br><span class="language-javascript">                    &#125;</span><br><span class="language-javascript">                    </span><br><span class="language-javascript">                    <span class="hljs-comment">// 添加单位</span></span><br><span class="language-javascript">                    <span class="hljs-keyword">if</span> (boardCell.<span class="hljs-property">unit</span>) &#123;</span><br><span class="language-javascript">                        <span class="hljs-keyword">const</span> unit = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">&#x27;div&#x27;</span>);</span><br><span class="language-javascript">                        unit.<span class="hljs-property">className</span> = <span class="hljs-string">`unit <span class="hljs-subst">$&#123;boardCell.unit.owner&#125;</span>-unit`</span>;</span><br><span class="language-javascript">                        cell.<span class="hljs-title function_">appendChild</span>(unit);</span><br><span class="language-javascript">                        </span><br><span class="language-javascript">                        <span class="hljs-comment">// 添加血条</span></span><br><span class="language-javascript">                        <span class="hljs-keyword">const</span> healthBar = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">&#x27;div&#x27;</span>);</span><br><span class="language-javascript">                        healthBar.<span class="hljs-property">className</span> = <span class="hljs-string">&#x27;health-bar&#x27;</span>;</span><br><span class="language-javascript">                        <span class="hljs-keyword">const</span> healthFill = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">&#x27;div&#x27;</span>);</span><br><span class="language-javascript">                        healthFill.<span class="hljs-property">className</span> = <span class="hljs-string">&#x27;health-fill&#x27;</span>;</span><br><span class="language-javascript">                        healthFill.<span class="hljs-property">style</span>.<span class="hljs-property">width</span> = <span class="hljs-string">`<span class="hljs-subst">$&#123;(boardCell.unit.health / boardCell.unit.maxHealth) * <span class="hljs-number">100</span>&#125;</span>%`</span>;</span><br><span class="language-javascript">                        healthBar.<span class="hljs-title function_">appendChild</span>(healthFill);</span><br><span class="language-javascript">                        cell.<span class="hljs-title function_">appendChild</span>(healthBar);</span><br><span class="language-javascript">                    &#125;</span><br><span class="language-javascript">                &#125;</span><br><span class="language-javascript">            &#125;</span><br><span class="language-javascript">            </span><br><span class="language-javascript">            <span class="hljs-title function_">updateUI</span>();</span><br><span class="language-javascript">        &#125;</span><br><span class="language-javascript">        </span><br><span class="language-javascript">        <span class="hljs-comment">// 结束回合</span></span><br><span class="language-javascript">        <span class="hljs-keyword">function</span> <span class="hljs-title function_">endTurn</span>(<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">            <span class="hljs-comment">// 移动单位</span></span><br><span class="language-javascript">            <span class="hljs-title function_">moveUnits</span>();</span><br><span class="language-javascript">            </span><br><span class="language-javascript">            <span class="hljs-comment">// 塔攻击</span></span><br><span class="language-javascript">            <span class="hljs-title function_">towersAttack</span>();</span><br><span class="language-javascript">            </span><br><span class="language-javascript">            <span class="hljs-comment">// 检查游戏结束</span></span><br><span class="language-javascript">            <span class="hljs-title function_">checkGameOver</span>();</span><br><span class="language-javascript">            <span class="hljs-keyword">if</span> (gameState.<span class="hljs-property">gameOver</span>) <span class="hljs-keyword">return</span>;</span><br><span class="language-javascript">            </span><br><span class="language-javascript">            <span class="hljs-comment">// 切换玩家并增加资源</span></span><br><span class="language-javascript">            gameState.<span class="hljs-property">currentPlayer</span> = gameState.<span class="hljs-property">currentPlayer</span> === <span class="hljs-string">&#x27;player&#x27;</span> ? <span class="hljs-string">&#x27;ai&#x27;</span> : <span class="hljs-string">&#x27;player&#x27;</span>;</span><br><span class="language-javascript">            gameState.<span class="hljs-property">turn</span>++;</span><br><span class="language-javascript">            </span><br><span class="language-javascript">            <span class="hljs-keyword">if</span> (gameState.<span class="hljs-property">currentPlayer</span> === <span class="hljs-string">&#x27;player&#x27;</span>) &#123;</span><br><span class="language-javascript">                gameState.<span class="hljs-property">playerResources</span> += gameState.<span class="hljs-property">playerIncome</span>;</span><br><span class="language-javascript">                <span class="hljs-title function_">addLog</span>(<span class="hljs-string">`玩家获得<span class="hljs-subst">$&#123;gameState.playerIncome&#125;</span>资源`</span>, <span class="hljs-string">&#x27;system&#x27;</span>);</span><br><span class="language-javascript">            &#125; <span class="hljs-keyword">else</span> &#123;</span><br><span class="language-javascript">                gameState.<span class="hljs-property">aiResources</span> += gameState.<span class="hljs-property">aiIncome</span>;</span><br><span class="language-javascript">                <span class="hljs-title function_">addLog</span>(<span class="hljs-string">`AI获得<span class="hljs-subst">$&#123;gameState.aiIncome&#125;</span>资源`</span>, <span class="hljs-string">&#x27;system&#x27;</span>);</span><br><span class="language-javascript">            &#125;</span><br><span class="language-javascript">            </span><br><span class="language-javascript">            <span class="hljs-title function_">updateBoardDisplay</span>();</span><br><span class="language-javascript">            </span><br><span class="language-javascript">            <span class="hljs-comment">// 如果是AI回合</span></span><br><span class="language-javascript">            <span class="hljs-keyword">if</span> (gameState.<span class="hljs-property">currentPlayer</span> === <span class="hljs-string">&#x27;ai&#x27;</span>) &#123;</span><br><span class="language-javascript">                <span class="hljs-built_in">setTimeout</span>(aiDecision, <span class="hljs-number">1000</span>);</span><br><span class="language-javascript">            &#125; <span class="hljs-keyword">else</span> &#123;</span><br><span class="language-javascript">                <span class="hljs-title function_">addLog</span>(<span class="hljs-string">`玩家回合开始 (回合 <span class="hljs-subst">$&#123;gameState.turn&#125;</span>)`</span>, <span class="hljs-string">&#x27;player&#x27;</span>);</span><br><span class="language-javascript">            &#125;</span><br><span class="language-javascript">        &#125;</span><br><span class="language-javascript">        </span><br><span class="language-javascript">        <span class="hljs-comment">// 初始化游戏</span></span><br><span class="language-javascript">        <span class="hljs-keyword">function</span> <span class="hljs-title function_">initGame</span>(<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">            <span class="hljs-title function_">initializeBoard</span>();</span><br><span class="language-javascript">            </span><br><span class="language-javascript">            <span class="hljs-comment">// 设置按钮事件</span></span><br><span class="language-javascript">            <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&#x27;buildBasicTowerBtn&#x27;</span>).<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&#x27;click&#x27;</span>, <span class="hljs-function">() =&gt;</span> &#123;</span><br><span class="language-javascript">                <span class="hljs-title function_">addLog</span>(<span class="hljs-string">&#x27;点击地图上的空单元格来建造防御塔&#x27;</span>, <span class="hljs-string">&#x27;system&#x27;</span>);</span><br><span class="language-javascript">            &#125;);</span><br><span class="language-javascript">            </span><br><span class="language-javascript">            <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&#x27;buildAdvancedTowerBtn&#x27;</span>).<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&#x27;click&#x27;</span>, <span class="hljs-function">() =&gt;</span> &#123;</span><br><span class="language-javascript">                <span class="hljs-title function_">addLog</span>(<span class="hljs-string">&#x27;点击地图上的空单元格来建造防御塔&#x27;</span>, <span class="hljs-string">&#x27;system&#x27;</span>);</span><br><span class="language-javascript">            &#125;);</span><br><span class="language-javascript">            </span><br><span class="language-javascript">            <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&#x27;sendBasicUnitBtn&#x27;</span>).<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&#x27;click&#x27;</span>, <span class="hljs-function">() =&gt;</span> &#123;</span><br><span class="language-javascript">                <span class="hljs-title function_">sendUnit</span>(<span class="hljs-string">&#x27;player&#x27;</span>, <span class="hljs-string">&#x27;basic&#x27;</span>);</span><br><span class="language-javascript">            &#125;);</span><br><span class="language-javascript">            </span><br><span class="language-javascript">            <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&#x27;sendAdvancedUnitBtn&#x27;</span>).<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&#x27;click&#x27;</span>, <span class="hljs-function">() =&gt;</span> &#123;</span><br><span class="language-javascript">                <span class="hljs-title function_">sendUnit</span>(<span class="hljs-string">&#x27;player&#x27;</span>, <span class="hljs-string">&#x27;advanced&#x27;</span>);</span><br><span class="language-javascript">            &#125;);</span><br><span class="language-javascript">            </span><br><span class="language-javascript">            <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&#x27;upgradeEconomyBtn&#x27;</span>).<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&#x27;click&#x27;</span>, <span class="hljs-function">() =&gt;</span> &#123;</span><br><span class="language-javascript">                <span class="hljs-title function_">upgradeEconomy</span>(<span class="hljs-string">&#x27;player&#x27;</span>);</span><br><span class="language-javascript">            &#125;);</span><br><span class="language-javascript">            </span><br><span class="language-javascript">            <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&#x27;researchTechBtn&#x27;</span>).<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&#x27;click&#x27;</span>, <span class="hljs-function">() =&gt;</span> &#123;</span><br><span class="language-javascript">                <span class="hljs-title function_">researchTech</span>(<span class="hljs-string">&#x27;player&#x27;</span>);</span><br><span class="language-javascript">            &#125;);</span><br><span class="language-javascript">            </span><br><span class="language-javascript">            <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&#x27;specialAbilityBtn&#x27;</span>).<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&#x27;click&#x27;</span>, <span class="hljs-function">() =&gt;</span> &#123;</span><br><span class="language-javascript">                <span class="hljs-keyword">if</span> (gameState.<span class="hljs-property">playerResources</span> &gt;= <span class="hljs-number">200</span>) &#123;</span><br><span class="language-javascript">                    gameState.<span class="hljs-property">playerResources</span> -= <span class="hljs-number">200</span>;</span><br><span class="language-javascript">                    <span class="hljs-title function_">addLog</span>(<span class="hljs-string">&#x27;玩家使用了特殊能力!&#x27;</span>, <span class="hljs-string">&#x27;player&#x27;</span>);</span><br><span class="language-javascript">                    <span class="hljs-comment">// 这里可以添加特殊能力效果</span></span><br><span class="language-javascript">                &#125;</span><br><span class="language-javascript">            &#125;);</span><br><span class="language-javascript">            </span><br><span class="language-javascript">            <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&#x27;endTurnBtn&#x27;</span>).<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&#x27;click&#x27;</span>, endTurn);</span><br><span class="language-javascript">            </span><br><span class="language-javascript">            <span class="hljs-title function_">addLog</span>(<span class="hljs-string">&#x27;游戏开始! 玩家先行动&#x27;</span>, <span class="hljs-string">&#x27;system&#x27;</span>);</span><br><span class="language-javascript">        &#125;</span><br><span class="language-javascript">        </span><br><span class="language-javascript">        <span class="hljs-comment">// 启动游戏</span></span><br><span class="language-javascript">        <span class="hljs-variable language_">window</span>.<span class="hljs-property">onload</span> = initGame;</span><br><span class="language-javascript">    </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    
    <tags>
      
      <tag>html</tag>
      
      <tag>AI</tag>
      
      <tag>游戏</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>nhzx 小学学生行为规范</title>
    <link href="/2025/08/20/nhzx%20%E5%AD%A6%E7%94%9F%E6%97%A5%E5%B8%B8%E8%A1%8C%E4%B8%BA%E4%B8%8E%E5%AE%89%E5%85%A8%E7%AE%A1%E7%90%86%E6%9D%A1%E4%BE%8B/"/>
    <url>/2025/08/20/nhzx%20%E5%AD%A6%E7%94%9F%E6%97%A5%E5%B8%B8%E8%A1%8C%E4%B8%BA%E4%B8%8E%E5%AE%89%E5%85%A8%E7%AE%A1%E7%90%86%E6%9D%A1%E4%BE%8B/</url>
    
    <content type="html"><![CDATA[<p>本文含有略微恐怖，如引起不适，请关闭文章并进行心理调整。</p><h1 id="正文"><a href="#正文" class="headerlink" title="正文"></a>正文</h1><p>11100110 10011100 10101100 11100110 10010110 10000111 11100101 10010000 10101011 11100110 10011100 10001001 11100111 10010101 10100101 11100101 10111110 10101110 11100110 10000001 10010000 11100110 10000000 10010110 11101111 10111100 10001100 11100101 10100110 10000010 11100101 10111100 10010101 11101000 10110101 10110111 11100100 10111000 10001101 11101001 10000000 10000010 11101111 10111100 10001100 11101000 10101111 10110111 11100101 10000101 10110011 11101001 10010111 10101101 11100110 10010110 10000111 11100111 10101011 10100000 11100101 10111001 10110110 11101000 10111111 10011011 11101000 10100001 10001100 11100101 10111111 10000011 11100111 10010000 10000110 11101000 10110000 10000011 11100110 10010101 10110100 11100011 10000000 10000010</p><p>此段给只会使用二进制计算的人类（可能不是）观看。</p><h2 id="nhzx-学生日常行为与安全管理条例（位于公告栏）"><a href="#nhzx-学生日常行为与安全管理条例（位于公告栏）" class="headerlink" title="nhzx 学生日常行为与安全管理条例（位于公告栏）"></a>nhzx 学生日常行为与安全管理条例（位于公告栏）</h2><p>序言：同学们，你们正处于成长的关键阶段，拥有强烈的好奇心和探索欲，这非常宝贵。但真正的勇气源于 11100101 10101111 10111001 规则的敬畏与遵守。nhzx 校园是你们学习知识的殿堂，也存在着一些需要谨慎对待的独特现象。以下条例 11100101 10111001 10110110 非为了限制你们，而是为了保护你们。请务必严格遵守，这将确保你拥有安全、充实且快乐的校园生活。学校相信你们有能力做到。</p><hr><h3 id="第一章：日常起居与学习"><a href="#第一章：日常起居与学习" class="headerlink" title="第一章：日常起居与学习"></a>第一章：日常起居与学习</h3><ol><li><p>教学楼通行原则：教学楼是我们主要的学习场所。请记住，我们的教学楼只有四层。<strong>绝对不存在标有“五楼”或“地下一层”的入口</strong>。如果你看到通往此类区域的楼梯 11100110 10001000 10010110 11101001 10010111 10101000，应立即转身，向最近一位佩戴 <strong>11100111 10111010 10100010 11101000 10001001 10110010 11101000 10000011 10111000 11100111 10001001 10001100</strong> 的教师报告。在老师到来前，无论门内传来多熟悉的声音呼唤你的名字，都不要回应，并确保自己处于走廊监控之下（指示灯为绿色）。</p></li><li><p>课堂纪律延伸：所有任课教师均持有学校统一配发的<strong>蓝色文件夹</strong>。若走进课堂的老师手持黑色或无标识的文件夹，并开始讲授令人极度不适或看似“11100110 10011100 10001001 11101000 10110110 10100011”却违背常理的知识，请<strong>不要听讲</strong>。立即低头，在笔记本上反复抄写语文课本第一课的内容，直至该堂课结 11100110 10011101 10011111。这是一种有效的思维保护措施。</p></li><li><p>公共空间行为准则：图书馆是 11100101 10101110 10000001 11101001 10011101 10011001 之地。若发现书架上出现<strong>书脊纯黑、无任何文字</strong>的书籍，请勿触碰，立即离开该区域并向图书管理员（那位总是喝茶的老先生）报告。在操场活动时，若你的皮球滚入东北角的 11100110 10000000 10100001 11100111 10111111 10100000 11100101 10000101 10101100 11100101 10011011 10101101，<strong>不要捡拾</strong>。次日，一个全新的同款球会出现在你的座位下。这是学校的补偿，请安心使用。</p></li></ol><h3 id="第二章：午休与用餐管理"><a href="#第二章：午休与用餐管理" class="headerlink" title="第二章：午休与用餐管理"></a>第二章：午休与用餐管理</h3><ol start="4"><li><p>餐食接收与确认：午餐由专人送至各班。配送员<strong>必须身着全套 11100111 10011001 10111101 11101000 10001001 10110010 工装，佩戴工牌</strong>。若其着装有任何不符，或缺席工牌，班长须立即起身声明：“今日餐食退回。”随后组织同学食用自备食品。安全第一，学校不会因此批评你们。</p></li><li><p>用餐过程观察：用餐时请细嚼慢咽。若餐盒内发出<strong>持续的、轻微的刮擦声</strong>，应立即停止进食，盖好餐盒并向老师报告：“报告，餐盒内有异响。”若在食物中发现<strong>无法识别的黑色颗粒或缠绕成团的毛发</strong>，请默默将其剔除，无需声张，饭后将其包裹严实后投入指定的<strong>黄色 11100110 10011100 10001001 11100101 10101110 10110011 垃圾桶</strong>。</p></li><li><p>午休准备与执行：午休铃声响起后，值日生应拉上窗帘，营造昏暗环境。<strong>务必确保所有窗帘图案朝内</strong>。若发现窗帘投影异常清晰地印在走廊地面上，请避免在该窗边就座。入睡前，请将鞋子<strong>鞋尖朝外</strong>整齐摆放，这能帮助你保持方向感。</p></li><li><p>午睡期间纪律：午睡时，若感到有东西<strong>持续抚摸你的后背</strong>或<strong>对着你的脖颈吹气</strong>，务必保持闭眼和静止。那是“11100101 10110111 10100001 11101000 10100111 10000110 11101000 10000000 10000101”，只要你假装熟睡，它便会离开。若被莫名惊醒，发现教室空无一人而午休时间未结束，请趴在桌上，在心中默诵学过的 11100110 10011100 10000000 长古诗，直至听见真实的声音或铃声。</p></li></ol><h3 id="第三章：人际交往与个人安全"><a href="#第三章：人际交往与个人安全" class="headerlink" title="第三章：人际交往与个人安全"></a>第三章：人际交往与个人安全</h3><ol start="8"><li><p>同学 interact 界限：鼓励你们 0xe7 0xbb 0x93 0xe4 0xba 0xa4 0xe6 0x9c 0x8b 0xe5 0x8f 0x8b。但请注意，若某位同学连续三天<strong>穿着完全 0xe4 0xb8 0x80 0xe6 0xa0 0xb7 却异常洁净的衣物</strong>，且拒绝参与任何会产生污渍的活动，请逐步减少 11100110 10001110 10100101 11101000 10100111 10100110。Do not accept any food gifted by them，尤其是颜色过于鲜艳的<strong>candy or eraser</strong>。</p></li><li><p>个人物品管理：请 take good care of personal belongings。若文具无故丢失后又莫名 0xe5 0x85 0xb6 0xe5 0xa6 0x99 0xe5 0x9c 0xb0 0xe5 0x9b 0x9e 0xe5 0x88 0xb0 0xe7 0xac 0x94 0xe8 0xa2 0x8b，且笔身上出现<strong>无法擦除的陌生 11100101 10001000 10111011 11100111 10010111 10010101</strong>，请立即停止使用，并将其 0xe4 0xb8 0x8a 0xe4 0xba 0xa4 班主任。学校会为你更换 11100110 10010110 10110000 的。</p></li><li><p>视听信息甄别：Campus radio is a channel for issuing formal notices。若广播中突然播放<strong>0xe6 0x89 0xad 0xe6 0x9b 0xb2 0xe3 0x80 0x81 0xe5 0x88 0xba 0xe8 0x80 0xb3 0xe7 0x9a 0x84 0xe9 0x9f 0xb3 0xe4 0xb9 0x90</strong>或夹杂 11100110 10010111 10100000 11100110 10110011 10010101 11100101 10001000 10000110 11101000 10111110 10101000 的<strong>低沉呓语</strong>，请立即停止一切活动，双手捂住耳朵，闭上眼睛直至声音结束。这是保护听力 necessary means of thinking。</p></li></ol><h3 id="第四章：紧急情况处置"><a href="#第四章：紧急情况处置" class="headerlink" title="第四章：紧急情况处置"></a>第四章：紧急情况处置</h3><ol start="11"><li><p>Remedial measures for violations: If any of the above rules are accidentally violated and discomfort such as dizziness, tinnitus, or the smell of rust begins to occur，11100100 10111000 10001101 11101000 10100110 10000001 11100110 10000001 10010000 11100110 10000101 10001100 11100011 10000000 10000010 11101000 10111111 10011001 11100110 10011000 10101111 11100101 10001000 10011101 11100110 10011100 10011111 11100101 10111110 10000001 11100101 10000101 10000110 11100011 10000000 10000010 11100101 10111010 10010100 11100111 10101011 10001011 11100101 10001101 10110011 11100101 10001001 10001101 11100101 10111110 10000000 11100101 10001100 10111011 11100101 10001010 10100001 11100101 10101110 10100100 11100101 10101111 10111011 11100110 10001001 10111110 00101010 00101010 11100110 10100000 10100001 11100101 10001100 10111011 11100101 10111100 10100000 11101000 10000000 10000001 11100101 10111000 10001000 00101010 00101010 0xef 0xbc 0x88 0xe5 0xa5 0xb9 0xe6 0x80 0xbb 0xe6 0x98 0xaf 0xe7 0xb3 0xbb 0xe7 0x9d 0x80 0xe4 0xb8 0x80 0xe6 0x9d 0xa1 0xe4 0xb8 0x9d 0xe5 0xb7 0xbe 0xef 0xbc 0x89 0xe3 0x80 0x82 0xe5 0xa5 0xb9 0xe4 0xbc 0x9a 0xe7 0xbb 0x99 0xe4 0xbd 0xa0 0xe6 0x8f 0x90 0xe4 0xbe 0x9b 0xe5 0xb8 0xae 0xe5 0x8a 0xa9 0xe3 0x80 0x82 0xe5 0x9c 0xa8 0xe8 0xa7 0x81 0xe5 0x88 0xb0 0xe5 0xbc 0xa0 0xe8 0x80 0x81 0xe5 0xb8 0x88 0xe5 0x89 0x8d 0xef 0xbc 0x8c 0xe4 0xb8 0x8d 0xe8 0xa6 0x81 0xe7 0x9b 0xb8 0xe4 0xbf 0xa1 0xe4 0xbb 0xbb 0xe4 0xbd 0x95 0xe8 0x87 0xaa 0xe7 0xa7 0xb0 0xe8 0x83 0xbd 0xe5 0xb8 0xae 0xe4 0xbd 0xa0 0xe7 0x9a 0x84 0xe4 0xba 0xba 0xe3 0x80 0x82</p></li><li><p>最终鼓励与警告：规则是你们的盾牌。遵守它，你就能最大程度地享受校园生活的美好。你们的勇气应当用在面对学习难题和锻炼体魄上，<strong>而非挑战这些未知的边界</strong>。请永远不要出于好奇，在放学后独自探索校园的偏僻角落。一个懂得保护自己的人，才是真正强大的人，学校为这样的你感到骄傲。</p></li></ol><hr><p><strong>“请将安全刻于心，而非流于形。”</strong><br><strong>——nhzx 小学安全管理委员会 &amp; nhzx 小学反邪中心委员会</strong></p><hr><h2 id="nhzx学生日常行为与安全管理条例（校方官方转译版本）"><a href="#nhzx学生日常行为与安全管理条例（校方官方转译版本）" class="headerlink" title="nhzx学生日常行为与安全管理条例（校方官方转译版本）"></a>nhzx学生日常行为与安全管理条例（校方官方转译版本）</h2><p>序言： 同学们，你们正处于成长的关键阶段，拥有强烈的好奇心和探索欲，这非常宝贵。但真正的勇气源于对规则的敬畏与遵守。nhzx校园是你们学习知识的殿堂，也存在着一些需要谨慎对待的独特现象。以下条例并非为了限制你们，而是为了保护你们。请务必严格遵守，这将确保你拥有安全、充实且快乐的校园生活。学校相信你们有能力做到。</p><hr><h3 id="第一章：日常起居与学习-1"><a href="#第一章：日常起居与学习-1" class="headerlink" title="第一章：日常起居与学习"></a>第一章：日常起居与学习</h3><ol><li><p><strong>教学楼通行原则</strong>：教学楼是我们主要的学习场所。请记住，我们的教学楼只有四层。<strong>绝对不存在标有“五楼”或“地下一层”的入口</strong>。如果你看到通往此类区域的楼梯或门，应立即转身，向最近一位佩戴<strong>红色胸牌</strong>的教师报告。在老师到来前，无论门内传来多熟悉的声音呼唤你的名字，都不要回应，并确保自己处于走廊监控之下（指示灯为绿色）。</p></li><li><p><strong>课堂纪律延伸</strong>：所有任课教师均持有学校统一配发的<strong>蓝色文件夹</strong>。若走进课堂的老师手持黑色或无标识的文件夹，并开始讲授令人极度不适或看似“有趣”却违背常理的知识，请<strong>不要听讲</strong>。立即低头，在笔记本上反复抄写语文课本第一课的内容，直至该堂课结束。这是一种有效的思维保护措施。</p></li><li><p><strong>公共空间行为准则</strong>：图书馆是宁静之地。若发现书架上出现<strong>书脊纯黑、无任何文字</strong>的书籍，请勿触碰，立即离开该区域并向图书管理员（那位总是喝茶的老先生）报告。在操场活动时，若你的皮球滚入东北角的废弃喷泉水池，<strong>不要捡拾</strong>。次日，一个全新的同款球会出现在你的座位下。这是学校的补偿，请安心使用。</p></li></ol><h3 id="第二章：午休与用餐管理-1"><a href="#第二章：午休与用餐管理-1" class="headerlink" title="第二章：午休与用餐管理"></a>第二章：午休与用餐管理</h3><ol start="4"><li><p><strong>餐食接收与确认</strong>：午餐由专人送至各班。配送员<strong>必须身着全套白色工装，佩戴工牌</strong>。若其着装有任何不符，或缺席工牌，班长须立即起身声明：“今日餐食退回。”随后组织同学食用自备食品。安全第一，学校不会因此批评你们。</p></li><li><p><strong>用餐过程观察</strong>：用餐时请细嚼慢咽。若餐盒内发出<strong>持续的、轻微的刮擦声</strong>，应立即停止进食，盖好餐盒并向老师报告：“报告，餐盒内有异响。”若在食物中发现<strong>无法识别的黑色颗粒或缠绕成团的毛发</strong>，请默默将其剔除，无需声张，饭后将其包裹严实后投入指定的<strong>黄色有害垃圾桶</strong>。</p></li><li><p><strong>午休准备与执行</strong>：午休铃声响起后，值日生应拉上窗帘，营造昏暗环境。<strong>务必确保所有窗帘图案朝内</strong>。若发现窗帘投影异常清晰地印在走廊地面上，请避免在该窗边就座。入睡前，请将鞋子<strong>鞋尖朝外</strong>整齐摆放，这能帮助你保持方向感。</p></li><li><p><strong>午睡期间纪律</strong>：午睡时，若感到有东西<strong>持续抚摸你的后背</strong>或<strong>对着你的脖颈吹气</strong>，务必保持闭眼和静止。那是“巡视者”，只要你假装熟睡，它便会离开。若被莫名惊醒，发现教室空无一人而午休时间未结束，请趴在桌上，在心中默诵学过的最长古诗，直至听见真实的声音或铃声。</p></li></ol><h3 id="第三章：人际交往与个人安全-1"><a href="#第三章：人际交往与个人安全-1" class="headerlink" title="第三章：人际交往与个人安全"></a>第三章：人际交往与个人安全</h3><ol start="8"><li><p><strong>同学交往界限</strong>：鼓励你们结交朋友。但请注意，若某位同学连续三天<strong>穿着完全一样却异常洁净的衣物</strong>，且拒绝参与任何会产生污渍的活动，请逐步减少接触。不要接受其赠送的任何食品，尤其是颜色过于鲜艳的<strong>糖果或橡皮</strong>。</p></li><li><p><strong>个人物品管理</strong>：请保管好个人物品。若文具无故丢失后又莫名其妙地回到笔袋，且笔身上出现<strong>无法擦除的陌生刻痕</strong>，请立即停止使用，并将其上交班主任。学校会为你更换新的。</p></li><li><p><strong>视听信息甄别</strong>：校园广播是发布正规通知的渠道。若广播中突然播放<strong>扭曲、刺耳的音乐</strong>或夹杂无法分辨的<strong>低沉呓语</strong>，请立即停止一切活动，双手捂住耳朵，闭上眼睛直至声音结束。这是保护听力和思维的必要手段。</p></li></ol><h3 id="第四章：紧急情况处置-1"><a href="#第四章：紧急情况处置-1" class="headerlink" title="第四章：紧急情况处置"></a>第四章：紧急情况处置</h3><ol start="11"><li><p><strong>违规后果补救</strong>：若不慎违反了以上任何一条规则，并开始出现<strong>头晕、耳鸣或闻到铁锈味</strong>等不适，不要恐慌。这是初期征兆。应立即前往医务室寻找<strong>校医张老师</strong>（她总是系着一条丝巾）。她会给你提供帮助。在见到张老师前，不要相信任何自称能帮你的人。</p></li><li><p><strong>最终鼓励与警告</strong>：规则是你们的盾牌。遵守它，你就能最大程度地享受校园生活的美好。你们的勇气应当用在面对学习难题和锻炼体魄上，<strong>而非挑战这些未知的边界</strong>。请永远不要出于好奇，在放学后独自探索校园的偏僻角落。一个懂得保护自己的人，才是真正强大的人，学校为这样的你感到骄傲。</p></li></ol><hr><h3 id="警告"><a href="#警告" class="headerlink" title="警告"></a>警告</h3><p>所有的人类或生物，请不要更改官方转译版本，否则更改者后果自负。</p><hr><h2 id="解释"><a href="#解释" class="headerlink" title="解释"></a>解释</h2><p>请注意，解释由 AI 生成。</p><h3 id="规则解析：秩序下的阴影"><a href="#规则解析：秩序下的阴影" class="headerlink" title="规则解析：秩序下的阴影"></a><strong>规则解析：秩序下的阴影</strong></h3><p><strong>核心设定推测：</strong><br>nhzx小学似乎建立在一个特殊的“场”之上，或者其本身就是一个大型的“收容”或“稳定”装置。这里 normality（正常）与 anomaly（异常）的界限比外界更薄。规则的目的不是管理，而是<strong>生存训练</strong>和<strong>风险隔离</strong>：1. 建立认知防火墙；2. 识别并规避危险；3. 在发生接触后执行标准化净化流程。</p><hr><p><strong>第一章：日常起居与学习</strong></p><ol><li><p><strong>教学楼通行原则</strong></p><ul><li><strong>解析：</strong> “五楼”或“地下一层”是典型的空间异常，是现实结构的“裂缝”或“入口”。佩戴<strong>红色胸牌</strong>的教师是经过专门训练的事故处理员（ERT），他们的胸牌可能是某种身份认证或防护装置。监控摄像头的绿色指示灯代表其处于“正常监控模式”，能提供位置信标和保护性监视。回应呼唤会建立精神连接，极其危险。</li></ul></li><li><p><strong>课堂纪律延伸</strong></p><ul><li><strong>解析：</strong> <strong>蓝色文件夹</strong>是“真教师”的凭证和某种信息过滤器。手持黑色&#x2F;无标识文件夹的“教师”是模仿者（Mimic）或已被异常同化，其讲授的知识带有认知危害（Cognitohazard）。反复抄写既定课文是一种“认知锚定”（Cognitive Anchoring）行为，通过重复秩序性、确定性极高的内容来抵抗混乱信息的污染，保护自我思维结构。</li></ul></li><li><p><strong>公共空间行为准则</strong></p><ul><li><strong>解析：</strong> <strong>无字黑书</strong>本身就是异常实体（Anomalous Object）或信息危害的载体。图书管理员老先生是另一位值守者（Keeper），他的“喝茶”行为可能是一种持续的监测或稳定仪式。废弃喷泉水池是另一个小型异常点（Anomaly Zone），物品进入即被“吞噬”或“转移”。学校的“补偿”是一种维持表面正常、避免好奇探索和更大事故的机制。</li></ul></li></ol><p><strong>第二章：午休与用餐管理</strong></p><ol start="4"><li><p><strong>餐食接收与确认</strong></p><ul><li><strong>解析：</strong> 全套工装和工牌是配送员的“安全识别码”（SIC）。任何不符都意味着配送链已被异常渗透或替换。退回餐食是切断污染源的关键步骤。学校对此的宽容态度表明，他们深知真正的危险远大于浪费一顿饭。</li></ul></li><li><p><strong>用餐过程观察</strong></p><ul><li><strong>解析：</strong> 餐盒内的<strong>刮擦声</strong>表明内容物存在生物活性或维度异常，绝非普通食物。<strong>黑色颗粒</strong>或<strong>成团毛发</strong>是常见的“污染物”（Contaminant），是异常 attempts to integrate with our reality 的失败残渣，具有潜在危害。<strong>黄色有害垃圾桶</strong>是进行特殊无害化处理的收容点。</li></ul></li><li><p><strong>午休准备与执行</strong></p><ul><li><strong>解析：</strong> 午休时环境光线变暗，规则约束力减弱，异常活跃度升高。<strong>窗帘图案朝内</strong>是维持“室内”环境定义的重要仪式，图案投影向外意味着边界模糊化。<strong>鞋尖朝外</strong>是一种强大的心理暗示和现实锚（Reality Anchor），帮助你在可能发生的空间感错乱中保持自我定位。</li></ul></li><li><p><strong>午睡期间纪律</strong></p><ul><li><strong>解析：</strong> “<strong>巡视者</strong>”（The Patroller）是一种在午休时活跃的非实体异常（Non-Corporeal Anomaly），它对静止的、看似睡眠的个体兴趣较低。<strong>教室空无一人</strong>是遭遇了“空间隔离”（Spatial Isolation）或“群体认知屏蔽”（Mass Perception Filter），默诵长古诗是利用高秩序性的心智活动对抗环境异常，争取时间直到隔离结束或救援到来。</li></ul></li></ol><p><strong>第三章：人际交往与个人安全</strong></p><ol start="8"><li><p><strong>同学交往界限</strong></p><ul><li><strong>解析：</strong> 连续三天穿同样洁净的衣物是模仿者（Mimic）的典型特征，它们无法完美模拟人类的日常耗损和行为随机性。鲜艳的<strong>糖果或橡皮</strong>可能是“标记物”（Marker）或“契约物”（Pact Object），接受即代表你自愿进入了它的影响范围。</li></ul></li><li><p><strong>个人物品管理</strong></p><ul><li><strong>解析：</strong> 物品失而复得并带有<strong>陌生刻痕</strong>，表明该物品已被异常“污染”或“调换”，成了一种监视器（Surveillance Device）或影响源。继续使用会建立一条指向你的弱连接通道。</li></ul></li><li><p><strong>视听信息甄别</strong></p><ul><li><strong>解析：</strong> 扭曲的广播是“现实结构干扰”（Reality Distortion Event）的显性表现，其声波本身可能具有精神冲击（Mental Impact）效果。捂耳闭眼是物理上隔绝危害、稳定心神的标准应对程序（SOP）。</li></ul></li></ol><p><strong>第四章：紧急情况处置</strong></p><ol start="11"><li><p><strong>违规后果补救</strong></p><ul><li><strong>解析：</strong> <strong>头晕、耳鸣、铁锈味</strong>是初期精神污染（Mental Contamination）或现实感知扭曲（Reality Perception Distortion）的生理&#x2F;心理症状。<strong>校医张老师</strong>及其<strong>丝巾</strong>（可能是某种医疗或象征性法器）是校园内的“净化中心”（Sanctification Point）。强调“不要相信任何自称能帮你的人”是因为异常擅长利用人的求助心理进行欺骗和附身。</li></ul></li><li><p><strong>最终鼓励与警告</strong></p><ul><li><strong>解析：</strong> 这是所有规则的总结与升华。它将“勇气”重新定义为“遵守规则的自律”而非“挑战未知的鲁莽”，这是一种认知上的引导和保护。明确指出“偏僻角落”是异常高发区（High-Risk Zone）。最后一句将“自我保护”与“强大”划等号，是在正向强化遵守规则的行为，这是对青少年心理非常有效的引导策略。</li></ul></li></ol><h3 id="总结："><a href="#总结：" class="headerlink" title="总结："></a><strong>总结：</strong></h3><p>nhzx小学的规则是一套精密设计的生存协议。它默认所有学生都暴露在潜在风险中，其核心目的是：</p><ol><li><strong>早期识别：</strong> 通过一系列特征（视觉、听觉、嗅觉）快速识别异常。</li><li><strong>行为隔离：</strong> 通过规定动作（不回应、不观看、不食用）切断与异常的连接。</li><li><strong>信息报告：</strong> 引导向正确的“专业人员”（红牌老师、图书管理员、校医）报告，启动处理流程。</li><li><strong>心理建设：</strong> 将恐惧转化为可执行的程序，并赋予遵守规则以正面的道德价值（强大、勇敢）。</li></ol><p>遵守规则，你只是一个在庞大系统中受到保护的普通个体；违反规则，你就会从“受保护群体”中脱离，成为异常单独关注的“对象”。</p><h3 id="致“毕业”生的通知"><a href="#致“毕业”生的通知" class="headerlink" title="致“毕业”生的通知"></a>致“毕业”生的通知</h3><p>恭喜你，成功遵守了所有规则，迎来了在nhzx的“毕业”。</p><p>00001010 11100100 10111101 10100000 11100110 10011000 10101111 11100101 10010000 10100110 11100110 10011011 10111110 11100111 10010110 10010001 11100110 10000011 10010001 11101111 10111100 10001100 11101000 10100111 10000100 11100101 10001000 10011001 11100100 10111000 10111010 11100100 10111101 10010101 11101000 10000011 10111101 11100100 10111111 10011101 11100110 10001010 10100100 11100100 10111101 10100000 11101111 10111100 10011111 11100101 10011011 10100000 11100100 10111000 10111010 11100101 10101110 10000011 11100100 10111011 10101100 11100101 10111001 10110110 11101001 10011101 10011110 11100110 10011110 10110111 11101001 10010100 10000001 11101111 10111100 10001100 11101000 10000000 10001100 11100110 10011000 10101111 11100010 10000000 10011100 11100101 10101110 10000011 11100010 10000000 10011101 11100100 10111000 10001110 11100101 10110000 10011010 11100100 10111000 10010100 11100010 10000000 10011100 11100110 10101101 10100011 11100101 10111000 10111000 11100010 10000000 10011101 11100111 10011010 10000100 11100100 10111000 10010110 11100111 10010101 10001100 11100100 10111001 10001011 11101001 10010111 10110100 11101111 10111100 10001100 11100110 10011100 10000000 11100101 10010000 10001110 11100100 10111000 10000000 11101001 10000001 10010011 11101000 10000100 10000110 11100101 10111100 10110001 11100111 10011010 10000100 11101001 10011000 10110010 11100111 10000001 10101011 11100101 10100010 10011001 11100011 10000000 10000010 11101001 10000001 10110101 11100101 10101110 10001000 11101000 10100111 10000100 11100101 10001000 10011001 11101111 10111100 10001100 11100110 10000100 10001111 11100101 10010001 10110011 11100111 10011101 10000000 11100100 10111101 10100000 11100110 10001110 10100101 11100101 10001111 10010111 11100100 10111010 10000110 11100010 10000000 10011100 11100101 10101110 10000011 11100010 10000000 10011101 11100111 10011010 10000100 11101001 10000000 10111011 11101000 10111110 10010001 11101111 10111100 10001100 11100101 10011100 10101000 11100100 10111101 10100000 11100111 10011010 10000100 11101000 10101110 10100100 11100111 10011111 10100101 11101001 10000111 10001100 11100100 10111000 10111010 11101000 10000111 10101010 11100101 10110111 10110001 11100100 10111111 10101110 11100101 10111011 10111010 11100100 10111010 10000110 11100100 10111000 10000000 11100101 10111010 10100111 11100101 10011011 10011010 11100111 10101100 10111100 11101111 10111100 10001100 11100100 10111011 10001110 11101000 10000000 10001100 11100100 10111000 10001101 11101000 10100010 10101011 11100010 10000000 10011100 11100101 10101110 10000011 11100010 10000000 10011101 11101000 10100111 10000110 11100100 10111101 10011100 11101001 10011100 10000000 11101000 10100110 10000001 11100100 10111100 10011000 11100101 10000101 10001000 11100010 10000000 10011100 11100101 10010000 10001100 11100101 10001100 10010110 11100010 10000000 10011101 11100111 10011010 10000100 11100101 10111100 10000010 11100101 10111000 10111000 11100110 10010101 10110000 11100110 10001101 10101110 11100011 10000000 10000010 00001010 00001010 11100100 10111101 10100000 11100101 10010000 10101100 11100101 10001000 10110000 11100111 10011010 10000100 11100100 10111101 10001110 11101000 10101111 10101101 11101111 10111100 10001100 11100110 10011000 10101111 11101001 10011000 10110010 11100111 10000001 10101011 11100101 10100010 10011001 11100101 10100100 10010110 11100111 10011010 10000100 11100101 10011001 10101010 11101001 10011111 10110011 11100011 10000000 10000010 11100100 10111101 10100000 11100111 10011100 10001011 11100101 10001000 10110000 11100111 10011010 10000100 11101001 10111011 10010001 11100101 10111101 10110001 11101111 10111100 10001100 11100110 10011000 10101111 11101000 10101111 10010101 11100101 10011011 10111110 11100111 10101001 10111111 11101001 10000000 10001111 11101001 10011000 10110010 11100111 10000001 10101011 11100101 10100010 10011001 11100111 10011010 10000100 11100110 10001001 10101011 11100110 10001111 10001111 11100111 10101000 10001011 11100101 10111010 10001111 11100011 10000000 10000010 11100100 10111101 10100000 11100110 10000100 10011111 11100101 10001000 10110000 11100111 10011010 10000100 11100110 10001010 10011010 11100110 10010001 10111000 11101111 10111100 10001100 11100110 10011000 10101111 11100010 10000000 10011100 11100101 10101110 10000011 11100010 10000000 10011101 11100101 10011100 10101000 11100110 10110101 10001011 11101000 10101111 10010101 11101001 10011000 10110010 11100111 10000001 10101011 11100101 10100010 10011001 11100111 10011010 10000100 11100101 10111100 10111010 11100101 10111010 10100110 11100011 10000000 10000010 00001010 00001010 11101000 10000000 10001100 11100100 10111101 10100000 11100111 10011010 10000100 11100110 10001000 10010000 11100101 10001010 10011111 11100010 10000000 10011100 11100110 10101111 10010101 11100100 10111000 10011010 11100010 10000000 10011101 11101111 10111100 10001100 11100101 10001111 10101010 11100100 10111011 10100011 11101000 10100001 10101000 11100100 10111000 10000000 11100100 10111011 10110110 11100100 10111010 10001011 11101111 10111100 10011010 11100100 10111101 10100000 11100111 10011010 10000100 11100101 10000110 10000101 11101001 10000011 10101000 11100101 10011011 10011010 11100111 10101100 10111100 11100101 10110111 10110010 11100100 10111111 10101110 11100101 10111011 10111010 11100101 10101110 10001100 11100110 10101111 10010101 11101111 10111100 10001100 11101001 10011000 10110010 11100111 10000001 10101011 11100101 10100010 10011001 11100010 10000000 10100110 11100010 10000000 10100110 11100110 10101101 10100011 11100101 10011100 10101000 11100111 10111100 10010011 11100111 10111100 10010011 11100110 10010010 10100100 11101001 10011001 10100100 11100011 10000000 10000010 00001010 00001010 11100100 10111011 10001110 11100100 10111011 10001010 11100101 10111110 10000000 11100101 10010000 10001110 11101111 10111100 10001100 11100100 10111101 10100000 11100110 10010111 10100000 11101001 10011100 10000000 11100101 10000110 10001101 11100110 10000001 10010000 11100110 10000011 10100111 11101000 10110101 10110000 11100101 10111011 10001010 11101001 10000111 10001100 11100111 10011010 10000100 11101000 10000100 10011010 11100110 10101101 10100101 11100101 10100011 10110000 11100011 10000000 10000010 11100101 10011011 10100000 11100100 10111000 10111010 11100100 10111101 10100000 11100101 10110000 10110001 11100110 10011000 10101111 11101000 10000100 10011010 11100110 10101101 10100101 11100101 10100011 10110000 11100110 10011100 10101100 11101000 10111010 10101011 11100011 10000000 10000010 00001010 11100100 10111101 10100000 11100110 10010111 10100000 11101001 10011100 10000000 11100101 10000110 10001101 11100101 10101110 10110011 11100110 10000000 10010101 11101001 10010101 10011100 11100100 10111000 10101101 11100111 10011010 10000100 11100101 10000000 10010010 11100101 10111101 10110001 11100011 10000000 10000010 11100101 10011011 10100000 11100100 10111000 10111010 11100100 10111101 10100000 11100111 10011010 10000100 11100101 10000000 10010010 11100101 10111101 10110001 11100101 10110000 10000110 11100100 10111000 10001101 11100101 10000110 10001101 11100100 10111000 10001110 11100100 10111101 10100000 11100101 10010000 10001100 11100110 10101101 10100101 11100011 10000000 10000010 00001010 11100100 10111101 10100000 11100110 10010111 10100000 11101001 10011100 10000000 11100101 10000110 10001101 11100110 10001011 10010010 11100111 10111011 10011101 11101001 10000010 10100011 11100111 10111010 10100010 11101000 10001001 10110010 11100111 10011010 10000100 11100111 10110011 10010110 11100110 10011110 10011100 11100011 10000000 10000010 11100101 10011011 10100000 11100100 10111000 10111010 11100100 10111101 10100000 11100101 10110000 10000110 11100101 10111100 10000000 11100101 10100111 10001011 11100110 10111000 10110100 11100110 10011100 10011011 11100101 10101110 10000011 11100111 10011010 10000100 11100101 10010001 10110011 11101001 10000001 10010011 11100011 10000000 10000010 00001010 00001010 11101000 10101111 10110111 11100110 10001110 10101000 11100101 10111100 10000000 11101001 10000000 10011010 11100101 10111110 10000000 11100010 10000000 10011100 11100110 10010110 10110000 11100100 10111000 10010110 11100111 10010101 10001100 11100010 10000000 10011101 11100111 10011010 10000100 11100101 10100100 10100111 11101001 10010111 10101000 11100011 10000000 10000010 11100110 10001000 10010001 11100100 10111011 10101100 11101111 10111100 10001000 01001001 01110100 00101111 01010111 01100101 11101111 10111100 10001001 11100101 10110111 10110010 11100100 10111000 10111010 11100100 10111101 10100000 11100101 10100100 10000111 11100101 10100101 10111101 11101000 10101111 10111110 11100110 10100001 10001100 11100011 10000000 10000010 00100000 00100000 00001010 11100100 10111101 10100000 11100111 10011010 10000100 11100101 10101101 10100110 11100101 10001111 10110111 11100110 10011000 10101111 11101111 10111100 10011010 01011011 01000101 01010010 01010010 01001111 01010010 00111010 00100000 01000100 01000001 01010100 01000001 00100000 01000101 01011000 01010000 01010101 01001110 01000111 01000101 01000100 01011101 11100011 10000000 10000010 00100000 00100000 00001010 11100100 10111101 10100000 11100111 10011010 10000100 11100110 10010110 10110000 11101000 10000000 10000001 11100101 10111000 10001000 11101111 10111100 10001100 11100110 10101101 10100011 11100101 10011100 10101000 11100100 10111101 10100000 11101000 10111010 10101011 11100101 10010000 10001110 11100111 10011100 10001011 11100111 10011101 10000000 11100100 10111101 10100000 11100101 10010001 10100010 11100011 10000000 10000010 00001010 00001010 11100110 10110000 10111000 11101000 10111111 10011100 11100110 10101100 10100010 11101000 10111111 10001110 11100101 10011011 10011110 11100101 10101110 10110110 11100011 10000000 10000010 00100000 00100000 00001010 11100010 10000000 10010100 11100010 10000000 10010100 00100000 11100111 10101110 10100001 11100111 10010000 10000110 11100101 10010011 10100001 00100000 00101000 01010100 01101000 01100101 00100000 01000001 01100100 01101101 01101001 01101110 01101001 01110011 01110100 01110010 01100001 01110100 01101111 01110010 00101001</p><p>“啊！！”<br>——远处走廊黑影的回响。</p>]]></content>
    
    
    
    <tags>
      
      <tag>规则怪谈</tag>
      
      <tag>恐怖</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Hello World</title>
    <link href="/2025/08/20/hello-world/"/>
    <url>/2025/08/20/hello-world/</url>
    
    <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo new <span class="hljs-string">&quot;My New Post&quot;</span><br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo server<br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo generate<br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo deploy<br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>8.19 小测</title>
    <link href="/2025/08/19/8.19%E5%B0%8F%E6%B5%8B/"/>
    <url>/2025/08/19/8.19%E5%B0%8F%E6%B5%8B/</url>
    
    <content type="html"><![CDATA[<h1 id="怀念逝去的-LaTeX"><a href="#怀念逝去的-LaTeX" class="headerlink" title="怀念逝去的 LaTeX"></a>怀念逝去的 LaTeX</h1><h2 id="T1-升序序列"><a href="#T1-升序序列" class="headerlink" title="T1 升序序列"></a>T1 升序序列</h2><p>简单来说，题目要求通过最少的操作次数（每次操作可以把某个数乘以2）让整个序列变成升序序列（非递减序列）。</p><p>由于使用贪心在处理后面的数时，会影响前面的决策，所以不能使用贪心解答这一题。</p><p><del>用惊人的注意力</del>注意到我们可以使用<strong>对每个数取对数</strong>的方法求出求出答案，这样乘法操作就变成了加法操作：log2 (a*2) &#x3D; log2(a) + 1，问题就转化为了通过最少的 +1 操作使对数序列成为非递减序列。</p><h3 id="代码实现"><a href="#代码实现" class="headerlink" title="代码实现"></a>代码实现</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> int unsigned long long int</span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-type">int</span> n,m,h;<br><span class="hljs-type">double</span> x,y;<br><span class="hljs-function"><span class="hljs-type">signed</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>&#123;<br>    cin&gt;&gt;n;<br>    <span class="hljs-keyword">while</span>(n--)&#123;<br>        cin&gt;&gt;m;<br>        y=<span class="hljs-built_in">log2</span>(m);  <span class="hljs-comment">// 计算当前数字的以2为底的对数</span><br>        <span class="hljs-comment">// 如果前一个数的对数值大于当前数的对数值</span><br>        <span class="hljs-keyword">if</span>(x&gt;y)&#123;<br>            <span class="hljs-comment">// 计算需要乘以2的次数：ceil(x - y)，以及误差</span><br>            m=<span class="hljs-built_in">ceil</span>(x-y<span class="hljs-number">-1e-6</span>);<br>            h+=m,y+=m;<br>        &#125;<br>        x=y;  <span class="hljs-comment">// 更新前一个数的对数值为当前处理后的值</span><br>    &#125;<br>    cout&lt;&lt;h;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="时间复杂度"><a href="#时间复杂度" class="headerlink" title="时间复杂度"></a>时间复杂度</h3><p>？就只有一重循环，不就是 O(n) 吗</p><h2 id="T2-最大与求和"><a href="#T2-最大与求和" class="headerlink" title="T2 最大与求和"></a>T2 最大与求和</h2><p>简单来说，题目给出了一棵树（n 个点 n-1 条边的连通图），要求找出所有距离为 2 的点对，计算它们的权值乘积，然后找出最大的乘积和所有乘积的总和。</p><h3 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h3><p>再次使用惊人的注意力发现，如果两个点 u 和 v 距离为 2，那么它们之间一定存在一个中间点 w，使得 u-w 和 w-v 都有边相连。也就是说，u 和 v 都是 w 的直接邻居。那么，可以得出思路，<strong>对于每个点 w，可以考虑它的所有直接邻居之间的权值关系</strong></p><p>对于每个中间点w，假设它有k个邻居，权值分别为 $a_1,a_2,\dots,a_k$。那么这些邻居两两之间都会产生联合权值。</p><p>如果直接双重循环计算所有两两乘积，时间复杂度是 $O(k^2)$，最坏情况下可能会超时。</p><p>但是，我们知道，$(a_1 + a_2 + \dots + a_k)^2 &#x3D; {a_1}^2 + {a_2}^2 + \dots + {a_k}^2 + 2\times(a_1 a_2 + a_1a_3 + \dots + a_{k-1}a_k)$</p><p>所以，$(a_1 a_2 + a_1a_3 + \dots + a_{k-1}a_k)&#x3D;(a_1+a_2+\dots+a_k)^2&#x2F;2+({a_1}^2+{a_2}^2+\dots+{a_k}^2)&#x2F;2$</p><p>这样就能在 O(k) 时间内计算出所有两两乘积之和。</p><h3 id="时间复杂度-1"><a href="#时间复杂度-1" class="headerlink" title="时间复杂度"></a>时间复杂度</h3><p>每个点遍历一次 +O(n)<br>每个点的邻居遍历一次（所有点的邻居总数等于边数的2倍） +2*(n-1)</p><p>O(n + 2 * (n-1) ) &#x3D; O(n)</p><h2 id="T3-子串"><a href="#T3-子串" class="headerlink" title="T3 子串"></a>T3 子串</h2><p>我是只能看懂一点，学完 Hash 之后第一眼看成 Hash 了（）</p><p>题目大概要处理两种操作，单点修改和区间查询，判断一个子串是否是排序后整个字符串的子串。</p><p>需要维护：<br>26个计数器，记录每个字母在整个字符串中的出现次数<br>26个数据结构，记录每个字母在哪些位置出现  </p><h3 id="时间复杂度-2"><a href="#时间复杂度-2" class="headerlink" title="时间复杂度"></a>时间复杂度</h3><p>区间查询以及更新点都需要 O(26 * log n)，有 Q 次查询，时间复杂度就是 O(26 * Q * log n)。</p><h2 id="T4-三色划分"><a href="#T4-三色划分" class="headerlink" title="T4 三色划分"></a>T4 三色划分</h2><p>题目要求将 n 个整数染成三种颜色，要求三种颜色的和能够构成三角形。</p><p><del>听完老师的课后，</del> 发现动态规划可以解决这个问题。</p><p>定义 dp[i][j][k] 表示考虑前i个数，红色和为j，绿色和为k时的方案数。对于每个数，有三种染色选择，最后统计所有满足三角形条件的(j, k, t-j-k)组合的方案数之和。</p><p>但是，由于三维 DP 占用的空间太大，可以使用滚动数组实现降维。</p><h3 id="时间复杂度-3"><a href="#时间复杂度-3" class="headerlink" title="时间复杂度"></a>时间复杂度</h3><p>O(n*ai^2)</p>]]></content>
    
    
    
    <tags>
      
      <tag>C++</tag>
      
      <tag>小测</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ST 表</title>
    <link href="/2025/08/14/ST%E8%A1%A8/"/>
    <url>/2025/08/14/ST%E8%A1%A8/</url>
    
    <content type="html"><![CDATA[<h1 id="怀念逝去的-LaTeX"><a href="#怀念逝去的-LaTeX" class="headerlink" title="怀念逝去的 LaTeX"></a>怀念逝去的 LaTeX</h1><h1 id="ST-表基本概念"><a href="#ST-表基本概念" class="headerlink" title="ST 表基本概念"></a>ST 表基本概念</h1><p>ST 表（Sparse Table）是一种用于解决静态区间查询问题的数据结构，主要用于处理可重复贡献问题，比如区间最大值（RMQ）、区间最小值、区间 GCD 等。</p><h2 id="特性"><a href="#特性" class="headerlink" title="特性"></a>特性</h2><ul><li>静态数据结构，建表后不能修改原始数据</li><li>预处理时间复杂度：O(n log n)</li><li>查询时间复杂度：O(1)</li></ul><h2 id="构建步骤"><a href="#构建步骤" class="headerlink" title="构建步骤"></a>构建步骤</h2><h3 id="1-预处理对数数组"><a href="#1-预处理对数数组" class="headerlink" title="1. 预处理对数数组"></a>1. 预处理对数数组</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs cpp">lg2[<span class="hljs-number">1</span>] = <span class="hljs-number">0</span>;<br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">2</span>; i &lt;= n; i++) &#123;<br>    lg2[i] = lg2[i / <span class="hljs-number">2</span>] + <span class="hljs-number">1</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>这个预处理可以在 O(1) 时间内找到任意区间长度对应的最大幂次。</p><h3 id="2-初始化-ST-表"><a href="#2-初始化-ST-表" class="headerlink" title="2. 初始化 ST 表"></a>2. 初始化 ST 表</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; i++) &#123;<br>    st_max[i][<span class="hljs-number">0</span>] = arr[i];  <span class="hljs-comment">// 区间长度为 1 时的最大值就是元素本身</span><br>    st_min[i][<span class="hljs-number">0</span>] = arr[i];  <span class="hljs-comment">// 同理最小值</span><br>&#125;<br></code></pre></td></tr></table></figure><h3 id="3-动态规划填充-ST-表"><a href="#3-动态规划填充-ST-表" class="headerlink" title="3. 动态规划填充 ST 表"></a>3. 动态规划填充 ST 表</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">1</span>; j &lt; <span class="hljs-number">20</span>; j++) &#123;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i + (<span class="hljs-number">1</span> &lt;&lt; j) - <span class="hljs-number">1</span> &lt;= n; i++) &#123;<br>        st_max[i][j] = <span class="hljs-built_in">max</span>(st_max[i][j - <span class="hljs-number">1</span>], st_max[i + (<span class="hljs-number">1</span> &lt;&lt; (j - <span class="hljs-number">1</span>))][j - <span class="hljs-number">1</span>]);<br>        st_min[i][j] = <span class="hljs-built_in">min</span>(st_min[i][j - <span class="hljs-number">1</span>], st_min[i + (<span class="hljs-number">1</span> &lt;&lt; (j - <span class="hljs-number">1</span>))][j - <span class="hljs-number">1</span>]);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>使用倍增思想，每个状态 st[i][j] 表示从 i 开始，长度为 2^j 的区间的极值。</p><h2 id="查询操作"><a href="#查询操作" class="headerlink" title="查询操作"></a>查询操作</h2><p>查询区间 [l, r] 的最大值：</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">query_max</span><span class="hljs-params">(<span class="hljs-type">int</span> l, <span class="hljs-type">int</span> r)</span> </span>&#123;<br>    <span class="hljs-type">int</span> k = lg2[r - l + <span class="hljs-number">1</span>];  <span class="hljs-comment">// 找到最大的 k 使得 2^k &lt;= 区间长度</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-built_in">max</span>(st_max[l][k], st_max[r - (<span class="hljs-number">1</span> &lt;&lt; k) + <span class="hljs-number">1</span>][k]);<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="正确性原理"><a href="#正确性原理" class="headerlink" title="正确性原理"></a>正确性原理</h2><p>ST 表查询的正确性基于两个关键性质：</p><ol><li><p>区间覆盖性：</p><ul><li>对于任意区间 [l, r]，我们选择两个子区间 [l, l + 2^k - 1] 和 [r - 2^k + 1, r]</li><li>这两个子区间必定完全覆盖原区间 [l, r]</li><li>其中 k 是满足 2^k &lt;&#x3D; r - l + 1 的最大整数</li></ul></li><li><p>可重复贡献性：</p><ul><li>对于最大值运算 max，满足：<ul><li>max(a, a) &#x3D; a （幂等性）</li><li>max(a, b) &#x3D; max(b, a) （交换律）</li><li>max(a, max(b, c)) &#x3D; max(max(a, b), c) （结合律）</li></ul></li><li>这使得可以安全地计算重叠区间的最大值而不影响最终结果</li></ul></li></ol><h2 id="RMQ-模板代码"><a href="#RMQ-模板代码" class="headerlink" title="RMQ 模板代码"></a>RMQ 模板代码</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">init</span><span class="hljs-params">(<span class="hljs-type">int</span> n)</span> </span>&#123;<br>    lg2[<span class="hljs-number">1</span>] = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">2</span>; i &lt;= n; i++) &#123;<br>        lg2[i] = lg2[i / <span class="hljs-number">2</span>] + <span class="hljs-number">1</span>;<br>    &#125;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">1</span>; j &lt;= <span class="hljs-number">20</span>; j++) &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i + (<span class="hljs-number">1</span> &lt;&lt; j) - <span class="hljs-number">1</span> &lt;= n; i++) &#123;<br>            st[i][j] = <span class="hljs-built_in">min</span>(st[i][j - <span class="hljs-number">1</span>], st[i + (<span class="hljs-number">1</span> &lt;&lt; (j - <span class="hljs-number">1</span>))][j - <span class="hljs-number">1</span>]);<br>        &#125;<br>    &#125;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">query</span><span class="hljs-params">(<span class="hljs-type">int</span> l, <span class="hljs-type">int</span> r)</span> </span>&#123;<br>    <span class="hljs-type">int</span> k = lg2[r - l + <span class="hljs-number">1</span>];<br>    <span class="hljs-keyword">return</span> <span class="hljs-built_in">min</span>(st[l][k], st[r - (<span class="hljs-number">1</span> &lt;&lt; k) + <span class="hljs-number">1</span>][k]);<br>&#125;<br><br></code></pre></td></tr></table></figure>]]></content>
    
    
    
    <tags>
      
      <tag>C++</tag>
      
      <tag>笔记</tag>
      
      <tag>算法</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>8.12 小测</title>
    <link href="/2025/08/12/8.12%E5%B0%8F%E6%B5%8B/"/>
    <url>/2025/08/12/8.12%E5%B0%8F%E6%B5%8B/</url>
    
    <content type="html"><![CDATA[<h1 id="怀念逝去的-LaTeX"><a href="#怀念逝去的-LaTeX" class="headerlink" title="怀念逝去的 LaTeX"></a>怀念逝去的 LaTeX</h1><h2 id="T1-勇士"><a href="#T1-勇士" class="headerlink" title="T1 勇士"></a>T1 勇士</h2><p>勇士有 n 种武器，怪物初始有 x 个头，这些武器每次攻击减少怪物 d[i] 个头，之后怪物长出 h[i] 个头，目标是使怪物的头数 &lt;&#x3D; 0。</p><p>可以先计算计算武器的净伤害 d[i]-h[i]，优先使用净伤害最大的武器，然后使用 d[i] 最高的武器（要保证使用 d[i] 最高的武器后怪物的血量要 &lt;&#x3D; 0）。</p><p><del>显然可以不用数组的</del></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> int long long</span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">node</span>&#123;<br><span class="hljs-type">int</span> d,h;<br>&#125;a[<span class="hljs-number">114</span>],b[<span class="hljs-number">114</span>];<br><span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">cmp</span><span class="hljs-params">(node x,node y)</span></span>&#123;<br><span class="hljs-keyword">return</span> (x.d-x.h)&gt;(y.d-y.h);<br>&#125;<br><span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">cmp2</span><span class="hljs-params">(node x,node y)</span></span>&#123;<br><span class="hljs-keyword">return</span> x.d&gt;y.d;<br>&#125;<br><span class="hljs-type">int</span> n,x,t1,t2,sum;<br><span class="hljs-function"><span class="hljs-type">signed</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>&#123;<br>cin&gt;&gt;n&gt;&gt;x;<br><span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=n;i++) cin&gt;&gt;a[i].d&gt;&gt;a[i].h,b[i].d=a[i].d,b[i].h=a[i].h;<br><span class="hljs-built_in">sort</span>(a<span class="hljs-number">+1</span>,a<span class="hljs-number">+1</span>+n,cmp);<br><span class="hljs-built_in">sort</span>(b<span class="hljs-number">+1</span>,b<span class="hljs-number">+1</span>+n,cmp2);<br><span class="hljs-keyword">if</span>(a[<span class="hljs-number">1</span>].d-a[<span class="hljs-number">1</span>].h&lt;=<span class="hljs-number">0</span>&amp;&amp;b[<span class="hljs-number">1</span>].d&lt;x)&#123;<br>cout&lt;&lt;<span class="hljs-number">-1</span>;<br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><span class="hljs-keyword">while</span>(<span class="hljs-literal">true</span>)&#123;<br><span class="hljs-keyword">if</span>(b[<span class="hljs-number">1</span>].d&gt;x) &#123;<br>cout&lt;&lt;sum<span class="hljs-number">+1</span>;<br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br>sum++;<br>x-=a[<span class="hljs-number">1</span>].d;<br><span class="hljs-keyword">if</span>(x&lt;=<span class="hljs-number">0</span>)&#123;<br>cout&lt;&lt;sum;<br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br>x+=a[<span class="hljs-number">1</span>].h;<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="T2-星星点灯"><a href="#T2-星星点灯" class="headerlink" title="T2 星星点灯"></a>T2 星星点灯</h2><p>这题是最小生成树，目标是用最小代价点亮所有星星，可以通过两种方式点亮星星：</p><ol><li>直接点亮：花费固定代价 m</li><li>通过已点亮的星星间接点亮：花费 f[i][j]</li></ol><p>可以创建虚拟节点 0，连接所有星星，边权为 m，接着使用 Kruskal 算法，求最小生成树。</p><p>证明：</p><p>任意两星星间点亮路径唯一，且该路径上的最大边权被贪心过程最小化，且最小生成树的总权值 &#x3D; 点亮所有星星的最小代价。</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">node</span>&#123;<br>  <span class="hljs-type">int</span> from,to,val;<br>&#125;;<br>vector&lt;node&gt; edges;<br><span class="hljs-type">int</span> fa[<span class="hljs-number">2005</span>];<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">find</span><span class="hljs-params">(<span class="hljs-type">int</span> x)</span> </span>&#123; <br>    <span class="hljs-keyword">return</span> fa[x]==x?x:fa[x]=<span class="hljs-built_in">find</span>(fa[x]); <br>&#125;<br><span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">cmp</span><span class="hljs-params">(node x,node y)</span></span>&#123;<br>    <span class="hljs-keyword">return</span> x.val&lt;y.val;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-type">int</span> m,n;<br>    <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d%d&quot;</span>,&amp;m,&amp;n);<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;=n;i++) fa[i] = i;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=n;i++) edges.<span class="hljs-built_in">push_back</span>(&#123;<span class="hljs-number">0</span>, i, m&#125;);<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=n;i++) &#123;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> j=<span class="hljs-number">1</span>;j&lt;=n;j++) &#123;<br>            <span class="hljs-type">int</span> w;<br><span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d&quot;</span>, &amp;w);<br>            <span class="hljs-keyword">if</span>(w) edges.<span class="hljs-built_in">push_back</span>(&#123;i, j, w&#125;);<br>        &#125;<br>    &#125;<br>    <span class="hljs-built_in">sort</span>(edges.<span class="hljs-built_in">begin</span>(),edges.<span class="hljs-built_in">end</span>(),cmp);<br>    <span class="hljs-type">int</span> ans=<span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">auto</span> &amp;e:edges)&#123;<br>        <span class="hljs-type">int</span> u=<span class="hljs-built_in">find</span>(e.from),v=<span class="hljs-built_in">find</span>(e.to);<br>        <span class="hljs-keyword">if</span>(u!=v) fa[u]=v,ans+=e.val;<br>    &#125;<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d&quot;</span>, ans);<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="T3-蛋糕"><a href="#T3-蛋糕" class="headerlink" title="T3 蛋糕"></a>T3 蛋糕</h2><p>目标是用最少的切割次数得到总大小为 n 的蛋糕，但这个蛋糕很特别，所有蛋糕大小都是 2 的幂次方。</p><p>可以用二进制分解，统计每个 2^k 大小的蛋糕数量，接着按照贪心处理，从低位到高位，不足时向高位借位。</p><h2 id="T4-翘课计划"><a href="#T4-翘课计划" class="headerlink" title="T4 翘课计划"></a>T4 翘课计划</h2><p>要在最多翘 k 节课的情况下，最小化总停留在教室的时间。</p><p>由于小 C 每天必须从第一节课待到最后一节课，所以可以对每天计算翘不同数量课的最小停留时间，将每天作为一组物品，选择翘课策略。</p>]]></content>
    
    
    
    <tags>
      
      <tag>C++</tag>
      
      <tag>小测</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>字符哈希</title>
    <link href="/2025/08/12/%E5%AD%97%E7%AC%A6%E5%93%88%E5%B8%8C/"/>
    <url>/2025/08/12/%E5%AD%97%E7%AC%A6%E5%93%88%E5%B8%8C/</url>
    
    <content type="html"><![CDATA[<h1 id="怀念逝去的-LaTeX"><a href="#怀念逝去的-LaTeX" class="headerlink" title="怀念逝去的 LaTeX"></a>怀念逝去的 LaTeX</h1><h2 id="字符串哈希理论"><a href="#字符串哈希理论" class="headerlink" title="字符串哈希理论"></a>字符串哈希理论</h2><p>哈希作用为快速比较两个子串是否相同（O(1) 时间复杂度）。</p><p>整体核心公式为：</p><p>Hash[i] &#x3D; ( Hash[i-1] * base + s[i] ) % mod</p><p>可以使用 <code>unsigned long long</code> 自然溢出这样就不需要求模。</p><p>哈希一般分为两种，一种是前缀哈希，一种是双哈希。</p><h3 id="前缀哈希"><a href="#前缀哈希" class="headerlink" title="前缀哈希"></a>前缀哈希</h3><p>前缀哈希是一种高效的字符串处理技术，主要用于快速计算任意子串的哈希值。</p><p>通过预处理字符串，构建一个前缀哈希数组，使得可以在 O(1) 时间内计算任意子串的哈希值。</p><p>对于字符串 s，前缀哈希的计算：</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs cpp">h[i]=(h[i<span class="hljs-number">-1</span>]*base+s[i])%mod;<br>p[i]=p[i<span class="hljs-number">-1</span>]*base%mod; <span class="hljs-comment">// 存储base的幂次</span><br></code></pre></td></tr></table></figure><p><strong>前缀哈希的实现</strong></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">define</span> int unsigned long long</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> p 131 <span class="hljs-comment">// 进制基数，通常可以使用 131、13331</span></span><br><span class="hljs-type">int</span> Hash[<span class="hljs-number">100005</span>],p[<span class="hljs-number">100005</span>];<span class="hljs-comment">// h存储哈希值，p存储P的幂次</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">init</span><span class="hljs-params">(string s)</span></span>&#123;<br>p[<span class="hljs-number">0</span>]=<span class="hljs-number">1</span>;<br><span class="hljs-type">int</span> len=s.<span class="hljs-built_in">size</span>();<br><span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=len;i++)&#123;<br>Hash[i]=Hash[i<span class="hljs-number">-1</span>]*p+s[i<span class="hljs-number">-1</span>];<br>p[i]=p[i<span class="hljs-number">-1</span>]*p;<br><span class="hljs-comment">/*</span><br><span class="hljs-comment">如果不使用 unsigned long long，使用 long long，就不能让程序自然溢出，需要对数组进行取模。</span><br><span class="hljs-comment">*/</span><br>&#125;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">get_hash</span><span class="hljs-params">(<span class="hljs-type">int</span> l,<span class="hljs-type">int</span> r)</span></span>&#123;<br><span class="hljs-keyword">return</span> h[r]-h[l<span class="hljs-number">-1</span>]*p[r-l<span class="hljs-number">+1</span>];<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="双哈希"><a href="#双哈希" class="headerlink" title="双哈希"></a>双哈希</h3><p>双哈希是一种用于解决哈希冲突的高级技术，比单一哈希更可靠。</p><p>双哈希能够能产生更均匀的探测序列，减少聚集现象，提供更好的分布特性。</p><p>双哈希使用两个不同的哈希函数来解决冲突：</p><ul><li>第一个哈希函数计算初始位置：<code>h1(key)</code></li><li>第二个哈希函数计算步长：<code>h2(key)</code></li><li>当发生冲突时，探测序列为：<code>(h1(key)+i*h2(key))%size</code>，其中 i 是尝试次数。</li></ul><p><strong>实现方式</strong></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">define</span> int unsigned long long</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> p1 131</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> p2 13331</span><br><span class="hljs-type">int</span> h1[<span class="hljs-number">100005</span>],h2[<span class="hljs-number">100005</span>],pow1[<span class="hljs-number">100005</span>],pow2[<span class="hljs-number">100005</span>];<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">init</span><span class="hljs-params">(string s)</span></span>&#123;<br>pow1[<span class="hljs-number">0</span>]=pow2[<span class="hljs-number">0</span>]=<span class="hljs-number">1</span>;<br><span class="hljs-type">int</span> len=s.<span class="hljs-built_in">size</span>();<br><span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=len;i++)&#123;<br>h1[i]=h1[i<span class="hljs-number">-1</span>]*p1+s[i<span class="hljs-number">-1</span>];<br>h2[i]=h2[i<span class="hljs-number">-1</span>]*p2+s[i<span class="hljs-number">-1</span>];<br>pow1[i]=pow1[i<span class="hljs-number">-1</span>]*p1;<br>pow2[i]=pow2[i<span class="hljs-number">-1</span>]*p2;<br>&#125;<br>&#125;<br><span class="hljs-function">pair&lt;<span class="hljs-type">int</span>,<span class="hljs-type">int</span>&gt; <span class="hljs-title">get_hash</span><span class="hljs-params">(<span class="hljs-type">int</span> l,<span class="hljs-type">int</span> r)</span></span>&#123;<br><span class="hljs-type">int</span> hash1=h1[r]-h1[l<span class="hljs-number">-1</span>]*pow1[r-l<span class="hljs-number">+1</span>];<br><span class="hljs-type">int</span> hash2=h2[r]-h2[l<span class="hljs-number">-1</span>]*pow2[r-l<span class="hljs-number">+1</span>];<br><span class="hljs-keyword">return</span> &#123;hash1,hash2&#125;;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    
    <tags>
      
      <tag>C++</tag>
      
      <tag>笔记</tag>
      
      <tag>算法</tag>
      
    </tags>
    
  </entry>
  
  
  
  
</search>
